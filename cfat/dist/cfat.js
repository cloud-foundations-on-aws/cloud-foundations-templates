(()=>{"use strict";const e=require("@aws-sdk/client-sts"),n=require("@aws-sdk/client-organizations"),o=require("@aws-sdk/client-iam"),t=require("@aws-sdk/client-cloudformation"),a=require("@aws-sdk/client-sso-admin"),i=require("@aws-sdk/client-ec2"),s=require("@aws-sdk/client-cloudtrail"),r=require("@aws-sdk/client-config-service"),c=require("@aws-sdk/client-controltower"),l=require("@aws-sdk/client-cost-and-usage-report-service");async function d(e,n,o){return`${n} - Task ${e} - Deploy top-level OU ${o}.`}async function u(e,n,o){return`${n} - Task ${e} - Remove IAM user ${o}`}async function g(e,n,o,t){return`${n} - Task ${e} - Remove IAM user ${o} API key: ${t}`}async function m(e,n,o){return`${n} - Task ${e} - Delete VPC in the ${o} region.`}async function f(e,n,o){return`${n} - Task ${e} - Delete VPC in the ${o} region.`}async function w(e,n,o){return`${n} - Task ${e} - Enable the AWS service ${o} within your AWS Organization`}async function A(e,n,o){return`${n} - Task ${e} - Delegate the AWS service ${o} within your AWS Organization to a member account`}async function p(e,n,o){return`${n} - Task ${e} - Enable the policy type ${o} within your AWS Organization.`}const S=require("node:console"),h=new(require("node:stream").Transform)({transform(e,n,o){o(null,e)}}),C=new S.Console({stdout:h}),v=require("fs");(async()=>{let S={},y=[];const E=process.env.AWS_REGION||"us-east-1",I=await async function(){const e=new i.EC2Client({region:"us-east-1"});try{const n=new i.DescribeRegionsCommand({}),o=await e.send(n),t=[];for(const e of o.Regions||[])t.push(e.RegionName||"");return t}catch(e){return console.error("Error retrieving regions:",e),[]}finally{e.destroy()}}();console.log("discovering your AWS environment...");const T=await(async o=>{const t=new n.OrganizationsClient({region:o});let a=!1,i=!1;try{const s=await async function(n){const o=new e.STSClient({region:n});try{const n=new e.GetCallerIdentityCommand({});return(await o.send(n)).Account}catch(e){throw console.error("Error getting account ID:",e),e}}(o);if(s){const e=new n.DescribeOrganizationCommand({}),o=await t.send(e);if(o.Organization?.MasterAccountId){const e=o.Organization?.MasterAccountId;e==s?(i=!0,a=!0):a=!0}else a=!1}}catch(e){console.error("Error:",e)}finally{t.destroy()}return{isInOrganization:a,isManagementAccount:i}})(E);let O,b,z=!1,k=!1,N=!1,$=!1,R=!1,D=!1,M=!1,W=!1,L=!0,P=!1,U=!1,F=!1,q=!1,G=!1,V=!1,K=!1,Z=!1,B=!1,Y=!1,x=!1,_=!1,H=!1,j=!1,J=!1,Q=!1,X=!1,ee=!1,ne=!0,oe=!1;T&&(S.organizationDeploy=T.isInOrganization,S.managementAccount=T.isManagementAccount,void 0===T.isManagementAccount&&(T.isManagementAccount=!1,console.log("AWS account is not the Management Account of an AWS Organization")),ne=T.isManagementAccount),console.log("discovering IAM Users...");const te=await(async()=>{const e=new o.IAMClient({region:"us-east-1"}),n=[];try{const t=new o.ListUsersCommand({}),a=await e.send(t);for(const t of a.Users||[]){const a=t.UserName||"",i=new o.ListAccessKeysCommand({UserName:a}),s=(await e.send(i)).AccessKeyMetadata||[];if(s.length>0)for(const t of s){const i=t.AccessKeyId||"",s=new o.GetAccessKeyLastUsedCommand({AccessKeyId:i}),r=await e.send(s),c={userName:a,accessKeyId:i,lastUsed:r&&r.AccessKeyLastUsed&&`${r.AccessKeyLastUsed.LastUsedDate}`||"Not available"};n.push(c)}else{const e={userName:a};n.push(e)}}}catch(e){console.error("Error:",e)}finally{e.destroy()}return n})();te&&te.length>0?(console.log("IAM Users discovered."),S.iamUserChecks=te):$=!0,console.log("discovering EC2 instances across all AWS Regions...");const ae=await async function(e){let n=[];for(const o of e){const e=new i.EC2Client({region:o}),t=new i.DescribeInstancesCommand({});try{const a=await e.send(t);if(a.Reservations)if(a.Reservations.length>0){const e={region:o,ec2Found:!0};n.push(e)}else{const e={region:o,ec2Found:!1};n.push(e)}else{const e={region:o,ec2Found:!1};n.push(e)}}catch(e){console.log(`Error checking instance: ${e}`)}finally{e.destroy()}}return n}(I);if(ae&&ae.find((e=>!0===e.ec2Found))){S.ec2Checks=ae,console.info("warning: EC2 instances discovered.");for(const e of ae)P=!1}console.log("discovering VPCs across all AWS Regions...");const ie=await async function(e){let n=[];for(const o of e){const e=new i.EC2Client({region:o}),t=new i.DescribeVpcsCommand({});try{const a=await e.send(t);if(a.Vpcs)if(a.Vpcs.length>0){const e={region:o,vpcFound:!0};n.push(e)}else{const e={region:o,vpcFound:!1};n.push(e)}else{const e={region:o,vpcFound:!1};n.push(e)}}catch(e){console.log(`Error: ${e}`)}finally{e.destroy()}}return n}(I);if(S.vpcChecks=ie,ie&&ie.length>0&&(L=!1,console.log("warning: VPCs discovered.")),console.log("discovering AWS Config configurations across all AWS Regions..."),S.cloudTrailDetails=await async function(e){let n=[];for(const o of e){const e=new s.CloudTrailClient({region:o}),t=new s.DescribeTrailsCommand({});try{const a=await e.send(t);if(a.trailList)for(const e of a.trailList){let t={};t=e.HomeRegion==o?{region:o,trailFound:!0,isOrgTrail:e.IsMultiRegionTrail,isMultiRegion:e.IsMultiRegionTrail}:{region:o,trailFound:!1},n.push(t)}}catch(e){console.log(`Error checking instance: ${e}`)}finally{e.destroy()}}return n}(I),S.configDetails=await async function(e){let n=[];for(const o of e){const e=new r.ConfigServiceClient({region:o});let t={region:o,configRecorderFound:!1,configDeliveryChannelFound:!1};try{const o=await e.send(new r.DescribeConfigurationRecorderStatusCommand({}));0!==o.ConfigurationRecordersStatus?.length&&(t.configRecorderFound=!0);const a=await e.send(new r.DescribeDeliveryChannelsCommand({}));0!==a.DeliveryChannels?.length&&(t.configDeliveryChannelFound=!0),n.push(t)}catch(e){console.error(`Error checking AWS Config in ${o}:`,e)}finally{e.destroy()}}return n}(I),S.configDetails&&S.configDetails.find((e=>!0===e.configRecorderFound)))for(const e of S.configDetails)e.configRecorderFound&&(U=!0),e.configDeliveryChannelFound&&(F=!0);if(T.isInOrganization&&T.isManagementAccount){console.log("collecting general AWS Organization details...");const e=await async function(e){const o=new n.OrganizationsClient({region:e});let t={};try{const e=new n.DescribeOrganizationCommand({}),a=await o.send(e);a.Organization&&(t.id=a.Organization.Id??"",t.arn=a.Organization.Arn??"");const i=new n.ListRootsCommand({}),s=await o.send(i);s.Roots?t.rootOuId=s.Roots[0].Id:console.log("No info found for your AWS Organization.")}catch(e){console.error(`An error occurred: ${e}`)}finally{return o.destroy(),t}}("us-east-1");console.log("collecting CUR details...");const o=await(async e=>{const n=new l.CostAndUsageReportServiceClient({region:e});let o=!1;try{const e={},t=new l.DescribeReportDefinitionsCommand(e),a=await n.send(t);return a.ReportDefinitions&&a.ReportDefinitions.length>0&&(o=!0),{isLegacyCurSetup:o}}catch(e){return console.error(`Error: ${e}`),o=!1,{isLegacyCurSetup:o}}finally{n.destroy()}})("us-east-1");console.log("collecting AWS Organization Policy details...");const i=await async function(e){const o=new n.OrganizationsClient({region:e});let t={scpEnabled:!1,tagPolicyEnabled:!1,backupPolicyEnabled:!1};try{const e={},a=new n.ListRootsCommand(e),i=await o.send(a);if(i.Roots&&i.Roots[0].PolicyTypes)for(const e of i.Roots[0].PolicyTypes)"SERVICE_CONTROL_POLICY"==e.Type&&"ENABLED"==e.Status&&(t.scpEnabled=!0),"TAG_POLICY"==e.Type&&"ENABLED"==e.Status&&(t.tagPolicyEnabled=!0),"BACKUP_POLICY"==e.Type&&"ENABLED"==e.Status&&(t.backupPolicyEnabled=!0)}catch(e){console.error(`An error occurred: ${e}`)}finally{return o.destroy(),t}}("us-east-1");console.log("collecting AWS Organization service trusted access details..."),S.orgServices=await async function(e){const o=[],t=new n.OrganizationsClient({region:e});try{const e=new n.ListAWSServiceAccessForOrganizationCommand({}),a=await t.send(e);if(a.EnabledServicePrincipals&&a.EnabledServicePrincipals.length>0){a.EnabledServicePrincipals;for(const e of a.EnabledServicePrincipals){const n={service:e.ServicePrincipal??""};o.push(n)}}}catch(e){console.error("Error checking service access:",e)}finally{return t.destroy(),o}}("us-east-1"),console.log("collecting AWS Organization CloudFormation status details...");const s=await async function(e){let n={status:"disabled"};const o=new t.CloudFormationClient({region:e});try{const e={},a=new t.DescribeOrganizationsAccessCommand(e),i=await o.send(a);n.status=i.Status??"disabled"}catch(e){console.log(`Error: ${e}`)}finally{return o.destroy(),n}}(E);console.log("collecting AWS Control Tower details...");const r=await async function(e){let n={};const o=new c.ControlTowerClient({region:e});try{const e=new c.ListLandingZonesCommand({}),t=await o.send(e);if(t.landingZones&&t.landingZones.length>0){const e={landingZoneIdentifier:t.landingZones[0].arn},o=t.landingZones[0].arn?.toString().split(":")[3]??"";if(o){n.controlTowerRegion=o;const t=new c.ControlTowerClient({region:o}),a=new c.GetLandingZoneCommand(e),i=await t.send(a);i.landingZone&&(n.status=i.landingZone.status,n.latestAvailableVersion=i.landingZone.latestAvailableVersion,n.deployedVersion=i.landingZone.version,n.driftStatus=i.landingZone.driftStatus?.status)}}}catch(n){console.error(`Error checking Control Tower in ${e}:`,n)}finally{o.destroy()}return n}(E);if(S.idcInfo=await async function(e){let n={found:!1};for(const o of e){const e=new a.SSOAdminClient({region:o});try{const t={MaxResults:Number("100")},i=new a.ListInstancesCommand(t),s=await e.send(i);if(s.Instances&&s.Instances.length>0){const e=s.Instances[0];n.found=!0,n.region=o,n.arn=e.InstanceArn,n.id=e.IdentityStoreId;break}}catch(e){console.log(`Error looking for AWS Identity Center details in region ${o}`)}finally{e.destroy()}}return n}(I),console.log("collecting AWS Organization service delegated admin details..."),S.orgDelegatedAdminAccounts=await async function(){let e=[];const o=new n.OrganizationsClient({region:"us-east-1"});let t={};try{const a=new n.ListDelegatedAdministratorsCommand({}),i=await o.send(a);if(i.DelegatedAdministrators)for(const a of i.DelegatedAdministrators){const i={AccountId:a.Id},s=new n.ListDelegatedServicesForAccountCommand(i),r=await o.send(s);r.DelegatedServices&&(t={services:r.DelegatedServices,accountName:a.Name},e.push(t))}}catch(e){console.log("Error looking for delegated services.")}finally{o.destroy()}return e}(),console.log("collecting AWS Organization member account details..."),S.orgMemberAccounts=await async function(){let e=[];const o=new n.OrganizationsClient({region:"us-east-1"});Number("200");try{let t=await o.send(new n.ListAccountsCommand({}));if(t.Accounts&&t.Accounts.length>0){for(const n of t.Accounts){let o={accountName:n.Name,accountEmail:n.Email};e.push(o)}do{if(t.NextToken&&(t=await o.send(new n.ListAccountsCommand({NextToken:t.NextToken})),t.Accounts&&t.Accounts.length>0))for(const n of t.Accounts){let o={accountName:n.Name,accountEmail:n.Email};e.push(o)}}while(t.NextToken)}}catch(e){console.error("Error listing AWS accounts:",e)}finally{o.destroy()}return e}(),S.isLegacyCurSetup=o.isLegacyCurSetup,S.orgArn=e.arn,S.orgId=e.id,S.orgRootOuId=e.rootOuId,S.backupPolicyEnabled=i.backupPolicyEnabled,S.scpEnabled=i.scpEnabled,S.tagPolicyEnabled=i.tagPolicyEnabled,S.orgCloudFormationStatus=s.status,S.controlTowerDeployedVersion=r.deployedVersion,S.controlTowerDriftStatus=r.driftStatus,S.controlTowerLatestAvailableVersion=r.latestAvailableVersion,S.controlTowerRegion=r.controlTowerRegion,S.controlTowerStatus=r.status,S.idcInfo.arn&&(D=!0),S.cloudTrailDetails&&S.cloudTrailDetails.length>0){M=!0;for(const e of S.cloudTrailDetails)e.trailFound&&e.isOrgTrail&&(W=!0)}if(S.orgServices.find((e=>"cloudtrail.amazonaws.com"===e.service))&&(q=!0),S.orgServices.find((e=>"config.amazonaws.com"===e.service))&&(_=!0),i.scpEnabled&&(V=!0),i.tagPolicyEnabled&&(G=!0),i.backupPolicyEnabled&&(K=!0),e.rootOuId&&(console.log("collecting OU and member account details..."),S.orgOuInfo=await async function(e,o){const t=new n.OrganizationsClient({region:e});let a=[];try{const e=new n.ListOrganizationalUnitsForParentCommand({ParentId:o}),i=await t.send(e);if(i.OrganizationalUnits)for(const e of i.OrganizationalUnits){let o={id:e.Id,name:e.Name};const i=await t.send(new n.ListAccountsForParentCommand({ParentId:e.Id}));i.Accounts&&i.Accounts.length>0&&(o.accounts=i.Accounts),a.push(o)}}catch(e){return console.error("Error checking service access:",e),[]}finally{t.destroy()}return a}("us-east-1",e.rootOuId),S.orgOuInfo&&S.orgOuInfo.length>0))for(const e of S.orgOuInfo)"suspended"===e.name?.toLowerCase()&&(b=!0),"transitional"===e.name?.toLowerCase()&&(O=!0),"workloads"===e.name?.toLowerCase()&&(k=!0),"security"===e.name?.toLowerCase()&&(N=!0),"infrastructure"===e.name?.toLowerCase()&&(z=!0);if(S.orgMemberAccounts&&S.orgMemberAccounts.length>0)for(const e of S.orgMemberAccounts)e.accountName&&("log archive"===e.accountName.toLowerCase()&&(X=!0),"audit"===e.accountName.toLowerCase()&&(ee=!0),"security tooling"===e.accountName.toLowerCase()&&(ee=!0));let d=!1,u=!1,g=!1,m=!1,f=!1,w=!1,A=!1,p=!1,h=!1;if(S.orgDelegatedAdminAccounts&&S.orgDelegatedAdminAccounts.length>0)for(const e of S.orgDelegatedAdminAccounts)if(e.services&&e.services.length>0)for(const n of e.services)"securityhub.amazonaws.com"===n.ServicePrincipal&&(u=!0),"guardduty.amazonaws.com"===n.ServicePrincipal&&(g=!0),"sso.amazonaws.com"===n.ServicePrincipal&&(d=!0),"config.amazonaws.com"===n.ServicePrincipal&&(m=!0),"access-analyzer.amazonaws.com"===n.ServicePrincipal&&(f=!0),"storage-lens.s3.amazonaws.com"===n.ServicePrincipal&&(w=!0),"ipam.amazonaws.com"===n.ServicePrincipal&&(A=!0),"account.amazonaws.com"===n.ServicePrincipal&&(p=!0),"backup.amazonaws.com"===n.ServicePrincipal&&(h=!0);r.controlTowerRegion&&(j=!0),"DRIFTED"!==r.driftStatus&&(J=!0),r.deployedVersion===r.latestAvailableVersion&&(Q=!0),S.orgServices.find((e=>"member.org.stacksets.cloudformation.amazonaws.com"===e.service))&&(Z=!0),S.orgServices.find((e=>"sso.amazonaws.com"===e.service))&&(R=!0),S.orgServices.find((e=>"guardduty.amazonaws.com"===e.service))&&(B=!0),S.orgServices.find((e=>"securityhub.amazonaws.com"===e.service))&&(Y=!0),S.orgServices.find((e=>"access-analyzer.amazonaws.com"===e.service))&&(x=!0),S.orgServices.find((e=>"ram.amazonaws.com"===e.service))&&(H=!0),S.orgServices.find((e=>"backup.amazonaws.com"===e.service))&&(oe=!0)}else if(T.isInOrganization&&!T.isManagementAccount){const e="\nWARNING: You are running CFAT from an account that is a member of your AWS Organization. Please run the solution from your AWS Management account.";console.warn(e)}else{const e="\nWARNING: You are running CFAT from an account that not part of an AWS Organization. This account will be treated as a standalone account.";console.warn(e)}let se={task:"AWS Organization created",description:"AWS Organization is enabled.",status:T.isInOrganization?"complete":"incomplete",required:!0,weight:6,loe:1};y.push(se);let re={task:"Management Account created",description:"AWS Management account exists.",status:ne?"complete":"incomplete",required:!0,weight:6,loe:1};y.push(re);const ce={task:"Management Account IAM Users removed",description:"IAM Users should not exist in Management Account.",status:$?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(ce);const le={task:"Management Account EC2 instances removed",description:"EC2 Instances should not exist in Management Account.",status:P?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(le);const de={task:"Management Account VPCs removed",description:"Management Account should not have any VPCs.",status:L?"complete":"incomplete",required:!1,weight:4,loe:1,remediationLink:"https://github.com/cloud-foundations-on-aws/cloud-foundations-templates/blob/main/network/network-default-vpc-deletion/README.md"};y.push(de);const ue={task:"CloudTrail Trail created",description:"CloudTrail should be enabled within the account.",status:M?"complete":"incomplete",required:!0,weight:6,loe:3,remediationLink:"https://docs.aws.amazon.com/awscloudtrail/latest/userguide/creating-trail-organization.html"};y.push(ue);const ge={task:"CloudTrail Organization Service enabled",description:"CloudTrail should be enabled on the Organization.",status:q?"complete":"incomplete",required:!0,weight:6,loe:1,remediationLink:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-cloudtrail.html"};y.push(ge);const me={task:"CloudTrail Org Trail deployed",description:"At least one CloudTrail Organization Trail should be enabled.",status:W?"complete":"incomplete",required:!0,weight:6,loe:1,remediationLink:"https://docs.aws.amazon.com/awscloudtrail/latest/userguide/creating-trail-organization.html"};y.push(me);const fe={task:"Config Recorder in Management Account configured",description:"Config Recorder in the Management Account should be enabled.",status:U?"complete":"incomplete",required:!0,weight:6,loe:2,remediationLink:"https://aws.amazon.com/blogs/mt/managing-aws-organizations-accounts-using-aws-config-and-aws-cloudformation-stacksets/"};y.push(fe);const we={task:"Config Delivery Channel in Management Account configured",description:"Config Delivery Channel in Management Account should be enabled.",status:F?"complete":"incomplete",required:!0,weight:6,loe:2,remediationLink:"https://aws.amazon.com/blogs/mt/managing-aws-organizations-accounts-using-aws-config-and-aws-cloudformation-stacksets/"};y.push(we);y.push({task:"CloudFormation StackSets activated",description:"CloudFormation StackSets should be activated in the CloudFormation console.",status:"incomplete",required:!1,weight:5,loe:1,remediationLink:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-cloudformation.html#integrate-enable-ta-cloudformation"});const Ae={task:"GuardDuty Organization service enabled",description:"GuardDuty Organization services should be enabled.",status:B?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(Ae);const pe={task:"RAM Organization service enabled",description:"Resource Access Manager (RAM) trusted access should be enabled in the AWS Organization.",status:H?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(pe);const Se={task:"Security Hub Organization service enabled",description:"Security Hub trusted access should be enabled in the AWS Organization.",status:Y?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(Se);const he={task:"IAM Access Analyzer Organization service enabled",description:"IAM Access Analyzer trusted access should be enabled in the AWS Organization.",status:x?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(he);const Ce={task:"Config Organization service enabled",description:"AWS Config trusted access should be enabled in the AWS Organization.",status:_?"complete":"incomplete",required:!1,weight:4,loe:1};y.push(Ce);const ve={task:"CloudFormation Organization service enabled",description:"CloudFormation trusted access should be enabled in the AWS Organization.",status:K?"complete":"incomplete",required:!1,weight:5,loe:1,remediationLink:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-orgs-activate-trusted-access.html"};y.push(ve);const ye={task:"Top-level Infrastructure OU deployed",description:"Top-level Infrastructure OU should exist.",status:z?"complete":"incomplete",required:!1,weight:5,loe:2,remediationLink:"https://catalog.workshops.aws/control-tower/en-US/introduction/manage-ou"};y.push(ye);const Ee={task:"Top-level Security OU deployed",description:"Top-level Security OU should exist.",status:N?"complete":"incomplete",required:!0,weight:6,loe:2,remediationLink:"https://catalog.workshops.aws/control-tower/en-US/introduction/manage-ou"};y.push(Ee);const Ie={task:"Top-level Workloads OU deployed",description:"Top-level Workloads OU should exist.",status:k?"complete":"incomplete",required:!1,weight:5,loe:2,remediationLink:"https://catalog.workshops.aws/control-tower/en-US/introduction/manage-ou"};y.push(Ie);const Te={task:"IAM IdC Organization service enabled",description:"IAM Identity Center trusted access should be enabled in the AWS Organization",status:R?"complete":"incomplete",required:!0,weight:6,loe:1,remediationLink:"https://docs.aws.amazon.com/singlesignon/latest/userguide/get-set-up-for-idc.html"};y.push(Te);const Oe={task:"IAM IdC configured",description:"IAM Identity Center should be configured.",status:D?"complete":"incomplete",required:!0,weight:6,loe:3,remediationLink:"https://docs.aws.amazon.com/singlesignon/latest/userguide/tutorials.html"};y.push(Oe);const be={task:"Service Control Policies Enabled",description:"Service Control Policy should be enabled within the AWS Organization.",status:V?"complete":"incomplete",required:!0,weight:6,loe:1,remediationLink:"https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_enable-disable.html"};y.push(be);const ze={task:"Organization Tag Policy Enabled",description:"Tag Policy should be enabled within the AWS Organization.",status:G?"complete":"incomplete",required:!0,weight:6,loe:1,remediationLink:"https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_enable-disable.html"};y.push(ze);const ke={task:"Organization Backup Policy Enabled",description:"Backup Policy should be enabled within the AWS Organization.",status:K?"complete":"incomplete",required:!1,weight:5,loe:1,remediationLink:"https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_enable-disable.html"};y.push(ke);const Ne={task:"Control Tower Deployed",description:"Control Tower should be deployed.",status:j?"complete":"incomplete",required:!0,weight:6,loe:6,remediationLink:"https://catalog.workshops.aws/control-tower/en-US/prerequisites/deploying"};y.push(Ne);const $e={task:"Control Tower Latest Version",description:"Control Tower should be the latest version.",status:Q?"complete":"incomplete",required:!1,weight:5,loe:2,remediationLink:"https://docs.aws.amazon.com/controltower/latest/userguide/update-controltower.html"};y.push($e);const Re={task:"Control Tower not drifted",description:"Control Tower should not be drifted.",status:J?"complete":"incomplete",required:!0,weight:6,loe:2,remediationLink:"https://docs.aws.amazon.com/controltower/latest/userguide/resolve-drift.html"};y.push(Re);const De={task:"Log Archive account deployed",description:"Log Archive Account should exist.",status:X?"complete":"incomplete",required:!0,weight:6,loe:2};y.push(De);const Me={task:"Audit account deployed",description:"Audit account should exist.",status:ee?"complete":"incomplete",required:!0,weight:6,loe:2};y.push(Me),S.cfatChecks=y,console.table(y,["task","status","required","loe"]),console.log("compiling report...");const We=await async function(e){let n="Cloud Foundation Assessment Tool";n+=`\nGenerated on: ${(new Date).toUTCString()} \n\n`;let o=0,t=0,a=0,i="COMPLETE";if(e.cfatChecks&&e.cfatChecks.length>0){n+="\nIncomplete Requirements:";for(const s of e.cfatChecks)a+=s.weight,!0===s.required&&"incomplete"===s.status&&(n+=`\n    INCOMPLETE: ${s.task}`,t+=s.loe,i="INCOMPLETE"),"complete"===s.status&&(o+=s.weight);n+="\n\n====================================\n",n+=`\nFoundation Status: ${i}`,"INCOMPLETE"===i&&(n+=`\nEstimate of Required Level of Effort (LOE): ${t} hours`),n+=`\nCFAT Score: ${o} out of ${a}`,n+="\n\n====================================\n",n+="\nFoundation Checks:\n",e.cfatChecks&&e.cfatChecks.length>0&&(n+=`${s=e.cfatChecks,C.table(s),(h.read()||"").toString()}`)}var s;if(n+="\n\nStart Detailed Report:\n\n",n+="\n*********************************************************",n+="\n                   MANAGEMENT ACCOUNT",n+="\n*********************************************************",n+="\n\nAWS ACCOUNT TYPE\n",n+=`\n  Is in AWS Organization: ${e.organizationDeploy}`,n+=`\n  Assessing AWS Management Account: ${e.managementAccount}`,n+="\n\nIAM USERS CHECK\n",e.iamUserChecks&&e.iamUserChecks.length>0)for(const o of e.iamUserChecks)n+=`\n  IAM User: ${o.userName}`,o.accessKeyId&&(n+=`\n    User API Key ID: ${o.accessKeyId}`),n+="\n";else n+="\n  No IAM Users found.";if(n+="\n\nEC2 INSTANCE CHECK\n",e.ec2Checks&&e.ec2Checks.find((e=>!0===e.ec2Found)))for(const o of e.ec2Checks)o.ec2Found&&(n+=`\n  ${o.region} - found EC2 Instance(s).`);else n+="\n  No EC2 instances found.";if(n+="\n\nVPC CHECK\n",e.vpcChecks&&e.vpcChecks.length>0)for(const o of e.vpcChecks)o.vpcFound&&(n+=`\n  ${o.region} - found VPC(s).`);else n+="\n  No VPCs found.";if(n+="\n\nAWS CONFIG CHECK\n",e.configDetails&&e.configDetails.find((e=>!0===e.configRecorderFound)))for(const o of e.configDetails)o.configRecorderFound&&(n+=`\n  ${o.region} - Config Recorder found`),o.configDeliveryChannelFound&&(n+=`\n  ${o.region} - Config Delivery Channel found`);else n+="\n  No AWS Config resource discovered";n+="\n\nMANAGEMENT ACCOUNT RECOMMENDED TASKS:";let r=1;const c="Management Account";if(e.iamUserChecks&&e.iamUserChecks.length>0)for(const o of e.iamUserChecks)n+=`\n  ${await u(r,c,o.userName)}`,r++,o.accessKeyId&&(n+=`\n  ${await g(r,c,o.userName,o.accessKeyId)}`,r++);if(e.ec2Checks&&e.ec2Checks.find((e=>!0===e.ec2Found)))for(const o of e.ec2Checks)o.ec2Found&&o.region&&(n+=`\n  ${await f(r,c,o.region)}`,r++);if(e.vpcChecks&&e.vpcChecks.length>0)for(const o of e.vpcChecks)o.vpcFound&&o.region&&(n+=`\n  ${await m(r,c,o.region)}`,r++);if(n+="\n\n*********************************************************",n+="\n                    GOVERNANCE",n+="\n*********************************************************",n+="\n\nAWS ORGANIZATION POLICY TYPES\n",n+=`\n  Service Control Policies (SCP) enabled: ${e.scpEnabled}`,n+=`\n  Tag Policies enabled: ${e.tagPolicyEnabled}`,n+=`\n  Backup Policies enabled: ${e.backupPolicyEnabled}`,n+="\n\nAWS ORGANIZATION CLOUDFORMATION\n",n+=`\n  AWS CloudFormation Organization stack sets status : ${e.orgCloudFormationStatus}`,n+="\n\nCLOUDTRAIL CHECK\n",e.cloudTrailDetails&&e.cloudTrailDetails.length>0)for(const o of e.cloudTrailDetails)o.trailFound&&(n+=`\n  CloudTrail found in ${o.region}`,n+=`\n    Is Organization Trail: ${o.isOrgTrail}`,n+=`\n    Is MultiRegion: ${o.isMultiRegion}`,n+="\n");else n+="\n  No AWS CloudTrail resource discovered";n+="\n\nGOVERNANCE SERVICES ENABLED IN AWS ORGANIZATION:\n",e.orgServices?(e.orgServices.find((e=>"cloudtrail.amazonaws.com"===e.service))&&(n+="\n  AWS CloudTrail"),e.orgServices.find((e=>"config.amazonaws.com"===e.service))&&(n+="\n  AWS Config")):n+="\n  No governance service enabled",n+="\n\nGOVERNANCE RECOMMENDED TASKS:";const l="Governance";let S=1;e.orgServices&&e.orgServices.find((e=>"cloudtrail.amazonaws.com"===e.service))||(n+=`\n  ${await w(S,l,"AWS CloudTrail")}`,S++),e.orgServices&&e.orgServices.find((e=>"config.amazonaws.com"===e.service))||(n+=`\n  ${await w(S,l,"AWS Config")}`,S++),e.scpEnabled||(n+=`\n  ${await p(S,l,"Service Control Policy")}`,S++),e.tagPolicyEnabled||(n+=`\n  ${await p(S,l,"Tag Policy")}`,S++),e.backupPolicyEnabled||(n+=`\n  ${await p(S,l,"Backup Policy")}`,S++),n+="\n\n*********************************************************",n+="\n                FINANCIAL MANAGEMENT",n+="\n*********************************************************",n+="\n\nLegacy CUR",n+=`\n  Is legacy CUR setup: ${e.isLegacyCurSetup}`,n+="\n\nCLOUD FINANCIAL MANAGEMENT RECOMMENDED TASKS:",e.isLegacyCurSetup||(n+=`\n  ${await async function(e,n){return"Cloud Financial Management - Task 1 - Enable and create a Cost and Utilization Report (CUR) in the billing console."}()}`),n+="\n\n*********************************************************",n+="\n                MULTI-ACCOUNT STRATEGY",n+="\n*********************************************************",n+="\n\nAWS ORGANIZATION DETAILS\n",n+=`\n  AWS Organization Id: ${e.orgId}`,n+=`\n  AWS Organization ARN: ${e.orgArn}`,n+=`\n  AWS Organization Root OU Id: ${e.orgRootOuId}`,n+="\n\nAWS ORGANIZATION CLOUDFORMATION\n",n+=`\n  AWS CloudFormation Organization stack sets status : ${e.orgCloudFormationStatus}`;let v,y,E=!1,I=!1,T=!1;if(e.orgRootOuId)if(n+="\n\nAWS ORGANIZATION TOP-LEVEL ORGANIZATION UNITS\n",n+="\n  List of Organization's top-level OUs and AWS accounts:",e.orgOuInfo&&e.orgOuInfo.length>0)for(const o of e.orgOuInfo)if("suspended"===o.name?.toLowerCase()&&(y=!0),"transitional"===o.name?.toLowerCase()&&(v=!0),"workloads"===o.name?.toLowerCase()&&(I=!0),"security"===o.name?.toLowerCase()&&(T=!0),"infrastructure"===o.name?.toLowerCase()&&(E=!0),n+=`\n    Organizational Unit: ${o.name}`,n+=`\n      Organizational Unit Id: ${o.id}`,o.accounts&&o.accounts.length>0){n+="\n      AWS Accounts:";for(const e of o.accounts)n+=`\n        ${e.Name}`;n+="\n"}else n+="\n      AWS Accounts: None",n+="\n";else n+="\n  No top level OUs found.";if(n+="\n\nAWS ORGANIZATION MEMBER ACCOUNTS\n",e.orgMemberAccounts&&e.orgMemberAccounts.length>0)for(const o of e.orgMemberAccounts)n+=`\n  Account: ${o.accountName}`,n+=`\n  Account Email: ${o.accountEmail}\n`;else n+="No member accounts found which is amazing as this is running from one.";if(n+="\n\nAWS ORGANIZATION ENABLED SERVICES\n",n+="\n  The following AWS Services are enabled within your AWS Organization:",e.orgServices&&e.orgServices.length>0)for(const o of e.orgServices)n+=`\n    ${o.service}`;else n+="\n    No trusted access enabled in the AWS Organization";let O=!1,b=!1,z=!1,k=!1,N=!1,$=!1,R=!1,D=!1,M=!1;if(n+="\n\nAWS ORGANIZATION INTEGRATED SERVICE REGISTERED DELEGATED ADMINS\n",e.orgDelegatedAdminAccounts&&e.orgDelegatedAdminAccounts.length>0)for(const o of e.orgDelegatedAdminAccounts){if(n+=`\n  Account: ${o.accountName}`,o.services&&o.services.length>0){n+="\n  Delegated Services:";for(const e of o.services)n+=`\n    ${e.ServicePrincipal}`,"securityhub.amazonaws.com"===e.ServicePrincipal&&(b=!0),"guardduty.amazonaws.com"===e.ServicePrincipal&&(z=!0),"sso.amazonaws.com"===e.ServicePrincipal&&(O=!0),"config.amazonaws.com"===e.ServicePrincipal&&(k=!0),"access-analyzer.amazonaws.com"===e.ServicePrincipal&&(N=!0),"storage-lens.s3.amazonaws.com"===e.ServicePrincipal&&($=!0),"ipam.amazonaws.com"===e.ServicePrincipal&&(R=!0),"account.amazonaws.com"===e.ServicePrincipal&&(D=!0),"backup.amazonaws.com"===e.ServicePrincipal&&(M=!0)}n+="\n "}else n+="\n  No delegated admin accounts in AWS Organization";n+="\n\nMULTI-ACCOUNT STRATEGY RECOMMENDED TASKS:";let W=1,L="Multi-Account Strategy";n+=`\n  ${await async function(e,n){return`${n} - Task ${e} - Review and validate your email addresses and their domains for the root user administrator for management and all member accounts.`}(W,L)}`,W++,e.scpEnabled||(n+=`\n  ${await p(W,L,"Service Control Policy")}`,W++),v||(n+=`\n  ${await d(W,L,"Transitional")}`,W++),y||(n+=`\n  ${await d(W,L,"Suspended")}`,W++),I||(n+=`\n  ${await d(W,L,"Workloads")}`,W++),T||(n+=`\n  ${await d(W,L,"Security")}`,W++),E||(n+=`\n  ${await d(W,L,"Infrastructure")}`,W++),n+="\n\n*********************************************************",n+="\n                  LANDING ZONE",n+="\n*********************************************************",n+="\n\nAWS CONTROL TOWER\n",e.controlTowerRegion?(n+=`\n  Control Tower home region: ${e.controlTowerRegion}`,n+=`\n  Control Tower status: ${e.controlTowerStatus}`,n+=`\n  Control Tower Landing Zone version: ${e.controlTowerDeployedVersion}`,n+=`\n  Latest available version: ${e.controlTowerLatestAvailableVersion}`,n+=`\n  Drift Status: ${e.controlTowerDriftStatus}`):n+="\n  AWS Control Tower is not deployed in the AWS Organization",n+="\n\nLANDING ZONE RECOMMENDED TASKS:";let P=1;const U="Landing Zone";if(void 0===e.controlTowerRegion&&(n+=`\n  ${await async function(e,n){return`${n} - Task ${e} - Deploy AWS Control Tower in your home AWS Region.`}(P,U)}`,P++),"DRIFTED"===e.controlTowerDriftStatus&&(n+=`\n  ${await async function(e,n){return`${n} - Task ${e} - Fix drift in deployed landing zone.`}(P,U)}`,P++),e.controlTowerDeployedVersion!==e.controlTowerLatestAvailableVersion){const o=e.controlTowerDeployedVersion??"",t=e.controlTowerLatestAvailableVersion??"",a=await async function(e,n,o,t){return`${n} - Task ${e} - Update your AWS Control Tower Landing Zone from ${o} to ${t}.`}(P,U,o,t);n+=`\n  ${a}`,P++}e.orgServices&&e.orgServices.find((e=>"member.org.stacksets.cloudformation.amazonaws.com"===e.service))||(n+=`\n  ${await w(P,U,"AWS CloudFormation")}`,P++),n+="\n\n*********************************************************",n+="\n                    IDENTITY",n+="\n*********************************************************",e.idcInfo?(n+="\n\nAWS IAM IDENTITY CENTER\n",n+=`\n  IdC Region: ${e.idcInfo.region}`,n+=`\n  IdC ARN: ${e.idcInfo.arn}`,n+=`\n  IdC Instance Id: ${e.idcInfo.id}`):n+="\n\nAWS IAM IDENTITY CENTER NOT FOUND\n",n+="\n\nIDENTITY RECOMMENDED TASKS:";let F=1;const q="Identity";e.orgServices&&e.orgServices.find((e=>"sso.amazonaws.com"===e.service))||(n+=`\n  ${await w(F,q,"AWS IAM Identity Center")}`,F++),O||(n+=`\n  ${await A(F,q,"AWS IAM Identity Center")}`,F++),e.scpEnabled||(n+=`\n  ${await p(F,q,"Service Control Policy")}`,F++),n+="\n\n*********************************************************",n+="\n                    SECURITY",n+="\n*********************************************************",n+="\n\nAWS SECURITY SERVICES ENABLED IN AWS ORGANIZATION:\n",e.orgServices&&e.orgServices.find((e=>"guardduty.amazonaws.com"===e.service))&&(n+="\n  AWS GuardDuty"),e.orgServices&&e.orgServices.find((e=>"securityhub.amazonaws.com"===e.service))&&(n+="\n  AWS Security Hub"),e.orgServices&&e.orgServices.find((e=>"access-analyzer.amazonaws.com"===e.service))&&(n+="\n  IAM Access Analyzer"),e.orgServices&&e.orgServices.find((e=>"macie.amazonaws.com"===e.service))&&(n+="\n  Macie"),e.orgServices&&e.orgServices.find((e=>"storage-lens.s3.amazonaws.com"===e.service))&&(n+="\n  Amazon S3 Storage Lens"),e.orgServices&&e.orgServices.find((e=>"inspector2.amazonaws.com"===e.service))&&(n+="\n  Amazon Inspector"),e.orgServices&&e.orgServices.find((e=>"cloudtrail.amazonaws.com"===e.service))&&(n+="\n  AWS CloudTrail"),e.orgServices&&e.orgServices.find((e=>"config.amazonaws.com"===e.service))&&(n+="\n  AWS Config"),n+="\n\nSECURITY RECOMMENDED TASKS:";let G=1;const V="Security";e.scpEnabled||(n+=`\n  ${await p(G,V,"Service Control Policy")}`,G++),e.orgServices&&e.orgServices.find((e=>"guardduty.amazonaws.com"===e.service))||(n+=`\n  ${await w(G,V,"AWS GuardDuty")}`,G++),e.orgServices&&e.orgServices.find((e=>"securityhub.amazonaws.com"===e.service))||(n+=`\n  ${await w(G,V,"AWS SecurityHub")}`,G++),e.orgServices&&e.orgServices.find((e=>"access-analyzer.amazonaws.com"===e.service))||(n+=`\n  ${await w(G,V,"AWS IAM Access Analyzer")}`,G++),e.orgServices&&e.orgServices.find((e=>"cloudtrail.amazonaws.com"===e.service))||(n+=`\n  ${await w(G,V,"AWS CloudTrail")}`,G++),e.orgServices&&e.orgServices.find((e=>"config.amazonaws.com"===e.service))||(n+=`\n  ${await w(G,V,"AWS Config")}`,G++),b||(n+=`\n  ${await A(G,V,"Security Hub")}`,G++),z||(n+=`\n  ${await A(G,V,"GuardDuty")}`,G++),k||(n+=`\n  ${await A(G,V,"AWS Config")}`,G++),N||(n+=`\n  ${await A(G,V,"AWS IAM Access Analyzer")}`,G++),$||(n+=`\n  ${await A(G,V,"S3 Storage Lens")}`,G++),n+="\n\n*********************************************************",n+="\n                    NETWORK",n+="\n*********************************************************",n+="\n\nNETWORK RECOMMENDED TASKS:";let K=1;const Z="Network";e.orgServices&&e.orgServices.find((e=>"guardduty.amazonaws.com"===e.service))||(n+=`\n  ${await w(K,Z,"AWS GuardDuty")}`,K++),e.orgServices&&e.orgServices.find((e=>"ipam.amazonaws.com"===e.service))||(n+=`\n  ${await w(K,Z,"AWS IPAM")}`,K++),e.orgServices&&e.orgServices.find((e=>"ram.amazonaws.com"===e.service))||(n+=`\n  ${await w(K,Z,"AWS Resource Access Manager")}`,K++),R||(n+=`\n  ${await A(K,Z,"AWS IPAM")}`,K++),e.scpEnabled||(n+=`\n  ${await p(K,Z,"Service Control Policy")}`,K++),n+="\n\n*********************************************************",n+="\n                  OBSERVABILITY",n+="\n*********************************************************",n+="\n\nOBSERVABILITY RECOMMENDED TASKS:";let B=1;const Y="Observability";e.orgServices&&e.orgServices.find((e=>"account.amazonaws.com"===e.service))||(n+=`\n  ${await w(B,Y,"Account Manager")}`,B++),D||(n+=`\n  ${await A(B,Y,"Account Manager")}`,B++),n+="\n\n*********************************************************",n+="\n               BACKUP AND RECOVERY",n+="\n*********************************************************",n+="\n\nBACKUP AND RECOVERY RECOMMENDED TASKS:";let x=1;const _="Backup and Recovery";return e.orgServices&&e.orgServices.find((e=>"backup.amazonaws.com"===e.service))||(n+=`\n  ${await w(x,_,"AWS Backup")}`,x++),M||(n+=`\n  ${await A(x,_,"AWS Backup")}`,x++),e.backupPolicyEnabled||(n+=`\n  ${await p(x,_,"Backup Policy")}`,x++),e.scpEnabled||(n+=`\n  ${await p(x,_,"Service Control Policy")}`,x++),n+="\n\n\n  END REVIEW",n}(S);console.log("saving report to ./cfat/cfat.txt..."),v.appendFileSync("./cfat.txt",We),console.log("cloud foundation assessment complete. Access your report at ./cfat/cfat.txt")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Olsid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1zdHNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1pYW1cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvbmZpZy1zZXJ2aWNlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvbnRyb2x0b3dlclwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL3Rhc2tzLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibm9kZTpjb25zb2xlXCIiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY3JlYXRlLXJlcG9ydC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcIm5vZGU6c3RyZWFtXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJmc1wiIiwid2VicGFjazovLy8uL2J1aWxkL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9kZWZpbmUtYWNjb3VudC10eXBlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWlhbS11c2Vycy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY2xvdWR0cmFpbC1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29uZmlnLWV4aXN0ZW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLWRldGFpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stbGVnYWN5LWN1ci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctcG9saWN5LXR5cGVzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1zZXJ2aWNlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stY29udHJvbC10b3dlci5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLW1lbWJlci1hY2NvdW50cy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtb3JnLW91cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1zdHNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1pYW1cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb25cIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvbmZpZy1zZXJ2aWNlXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNvbnRyb2x0b3dlclwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiKTsiLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q29uZmlnUmVjb3JkZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVwbG95IEFXUyBDb25maWcgUmVjb3JkZXIgdG8gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lDb25maWdEZWxpdmVyeUNoYW5uZWxUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gQWRkIEFXUyBDb25maWcgRGVsaXZlcnkgQ2hhbm5lbCB0byB0aGUgJHtyZWdpb259IHJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveUNsb3VkVHJhaWxPcmdUcmFpbFRhc2sodGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gQ3JlYXRlIGEgbXVsdGktcmVnaW9uIENsb3VkVHJhaWwgT3JnYW5pemF0aW9uIFRyYWlsIGluIHlvdXIgaG9tZSBBV1MgUmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q29udHJvbFRvd2VyVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZXBsb3kgQVdTIENvbnRyb2wgVG93ZXIgaW4geW91ciBob21lIEFXUyBSZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMekNvbnRyb2xUb3dlclRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIGN1cnJlbnRWZXJzaW9uLCBsYXRlc3RWZXJzaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFVwZGF0ZSB5b3VyIEFXUyBDb250cm9sIFRvd2VyIExhbmRpbmcgWm9uZSBmcm9tICR7Y3VycmVudFZlcnNpb259IHRvICR7bGF0ZXN0VmVyc2lvbn0uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaXhMekRyaWZ0KHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEZpeCBkcmlmdCBpbiBkZXBsb3llZCBsYW5kaW5nIHpvbmUuYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lPdVRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIE91TmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZXBsb3kgdG9wLWxldmVsIE9VICR7T3VOYW1lfS5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUlhbVVzZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBJYW1Vc2VyTmFtZSkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBSZW1vdmUgSUFNIHVzZXIgJHtJYW1Vc2VyTmFtZX1gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZUlhbVVzZXJBcGlLZXlUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBJYW1Vc2VyTmFtZSwgSWFtVXNlckFwaUtleUlkKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFJlbW92ZSBJQU0gdXNlciAke0lhbVVzZXJOYW1lfSBBUEkga2V5OiAke0lhbVVzZXJBcGlLZXlJZH1gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZwYyh0YXNrTnVtYmVyLCB3YXlwb2ludCwgcmVnaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlbGV0ZSBWUEMgaW4gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFYzIodGFza051bWJlciwgd2F5cG9pbnQsIHJlZ2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZWxldGUgVlBDIGluIHRoZSAke3JlZ2lvbn0gcmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZSh0YXNrTnVtYmVyLCB3YXlwb2ludCwgc2VydmljZU5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRW5hYmxlIHRoZSBBV1Mgc2VydmljZSAke3NlcnZpY2VOYW1lfSB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZSh0YXNrTnVtYmVyLCB3YXlwb2ludCwgc2VydmljZU5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVsZWdhdGUgdGhlIEFXUyBzZXJ2aWNlICR7c2VydmljZU5hbWV9IHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb24gdG8gYSBtZW1iZXIgYWNjb3VudGA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlQXdzQ3VyKHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEVuYWJsZSBhbmQgY3JlYXRlIGEgQ29zdCBhbmQgVXRpbGl6YXRpb24gUmVwb3J0IChDVVIpIGluIHRoZSBiaWxsaW5nIGNvbnNvbGUuYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXZpZXdBY2NvdW50RW1haWxBZGRyZXNzZXModGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gUmV2aWV3IGFuZCB2YWxpZGF0ZSB5b3VyIGVtYWlsIGFkZHJlc3NlcyBhbmQgdGhlaXIgZG9tYWlucyBmb3IgdGhlIHJvb3QgdXNlciBhZG1pbmlzdHJhdG9yIGZvciBtYW5hZ2VtZW50IGFuZCBhbGwgbWVtYmVyIGFjY291bnRzLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlUG9saWN5VHlwZVRhc2sodGFza051bWJlciwgd2F5cG9pbnQsIHBvbGljeVR5cGUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRW5hYmxlIHRoZSBwb2xpY3kgdHlwZSAke3BvbGljeVR5cGV9IHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbiIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwibm9kZTpjb25zb2xlXCIpOyIsImltcG9ydCAqIGFzIHRhc2tzIGZyb20gJy4vdGFza3MuanMnO1xuaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gJ25vZGU6Y29uc29sZSc7XG5pbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tICdub2RlOnN0cmVhbSc7XG5jb25zdCB0cyA9IG5ldyBUcmFuc2Zvcm0oeyB0cmFuc2Zvcm0oY2h1bmssIGVuYywgY2IpIHsgY2IobnVsbCwgY2h1bmspOyB9IH0pO1xuY29uc3QgbG9nZ2VyID0gbmV3IENvbnNvbGUoeyBzdGRvdXQ6IHRzIH0pO1xuZnVuY3Rpb24gZ2V0VGFibGUoZGF0YSkge1xuICAgIGxvZ2dlci50YWJsZShkYXRhKTtcbiAgICByZXR1cm4gKHRzLnJlYWQoKSB8fCAnJykudG9TdHJpbmcoKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJlcG9ydChhc3Nlc3NtZW50KSB7XG4gICAgbGV0IGRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCByZXBvcnRGaWxlID0gXCIuL2NmYXQudHh0XCI7XG4gICAgbGV0IHJlcG9ydCA9IFwiQ2xvdWQgRm91bmRhdGlvbiBBc3Nlc3NtZW50IFRvb2xcIjtcbiAgICByZXBvcnQgKz0gYFxcbkdlbmVyYXRlZCBvbjogJHtkYXRlVGltZS50b1VUQ1N0cmluZygpfSBcXG5cXG5gO1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgbGV0IHRvdGFsUmVxdWlyZWRMb2UgPSAwO1xuICAgIGxldCB0b3RhbFNjb3JlID0gMDtcbiAgICBsZXQgY2ZhdFN0YXR1cyA9IFwiQ09NUExFVEVcIjtcbiAgICBpZiAoYXNzZXNzbWVudC5jZmF0Q2hlY2tzICYmIGFzc2Vzc21lbnQuY2ZhdENoZWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuSW5jb21wbGV0ZSBSZXF1aXJlbWVudHM6YDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiBhc3Nlc3NtZW50LmNmYXRDaGVja3MpIHtcbiAgICAgICAgICAgIHRvdGFsU2NvcmUgKz0gY2hlY2sud2VpZ2h0O1xuICAgICAgICAgICAgaWYgKGNoZWNrLnJlcXVpcmVkID09PSB0cnVlICYmIGNoZWNrLnN0YXR1cyA9PT0gJ2luY29tcGxldGUnKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICAgSU5DT01QTEVURTogJHtjaGVjay50YXNrfWA7XG4gICAgICAgICAgICAgICAgdG90YWxSZXF1aXJlZExvZSArPSBjaGVjay5sb2U7XG4gICAgICAgICAgICAgICAgY2ZhdFN0YXR1cyA9IFwiSU5DT01QTEVURVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrLnN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9IGNoZWNrLndlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXBvcnQgKz0gYFxcblxcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuRm91bmRhdGlvbiBTdGF0dXM6ICR7Y2ZhdFN0YXR1c31gO1xuICAgICAgICBpZiAoY2ZhdFN0YXR1cyA9PT0gXCJJTkNPTVBMRVRFXCIpIHtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuRXN0aW1hdGUgb2YgUmVxdWlyZWQgTGV2ZWwgb2YgRWZmb3J0IChMT0UpOiAke3RvdGFsUmVxdWlyZWRMb2V9IGhvdXJzYDtcbiAgICAgICAgfVxuICAgICAgICByZXBvcnQgKz0gYFxcbkNGQVQgU2NvcmU6ICR7c2NvcmV9IG91dCBvZiAke3RvdGFsU2NvcmV9YDtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG5cXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYFxcbkZvdW5kYXRpb24gQ2hlY2tzOlxcbmA7XG4gICAgICAgIGlmIChhc3Nlc3NtZW50LmNmYXRDaGVja3MgJiYgYXNzZXNzbWVudC5jZmF0Q2hlY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0clRhYmxlID0gZ2V0VGFibGUoYXNzZXNzbWVudC5jZmF0Q2hlY2tzKTtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgJHtzdHJUYWJsZX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuU3RhcnQgRGV0YWlsZWQgUmVwb3J0OlxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgICAgIE1BTkFHRU1FTlQgQUNDT1VOVGA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIEFDQ09VTlQgVFlQRVxcbmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gIElzIGluIEFXUyBPcmdhbml6YXRpb246ICR7YXNzZXNzbWVudC5vcmdhbml6YXRpb25EZXBsb3l9YDtcbiAgICByZXBvcnQgKz0gYFxcbiAgQXNzZXNzaW5nIEFXUyBNYW5hZ2VtZW50IEFjY291bnQ6ICR7YXNzZXNzbWVudC5tYW5hZ2VtZW50QWNjb3VudH1gO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuSUFNIFVTRVJTIENIRUNLXFxuYDtcbiAgICBpZiAoYXNzZXNzbWVudC5pYW1Vc2VyQ2hlY2tzICYmIGFzc2Vzc21lbnQuaWFtVXNlckNoZWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgaWFtVXNlciBvZiBhc3Nlc3NtZW50LmlhbVVzZXJDaGVja3MpIHtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuICBJQU0gVXNlcjogJHtpYW1Vc2VyLnVzZXJOYW1lfWA7XG4gICAgICAgICAgICBpZiAoaWFtVXNlci5hY2Nlc3NLZXlJZCkge1xuICAgICAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuICAgIFVzZXIgQVBJIEtleSBJRDogJHtpYW1Vc2VyLmFjY2Vzc0tleUlkfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbmA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBObyBJQU0gVXNlcnMgZm91bmQuYDtcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5FQzIgSU5TVEFOQ0UgQ0hFQ0tcXG5gO1xuICAgIGlmIChhc3Nlc3NtZW50LmVjMkNoZWNrcyAmJiBhc3Nlc3NtZW50LmVjMkNoZWNrcy5maW5kKHBhcmFtID0+IHBhcmFtLmVjMkZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGVjMiBvZiBhc3Nlc3NtZW50LmVjMkNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGVjMi5lYzJGb3VuZCkge1xuICAgICAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuICAke2VjMi5yZWdpb259IC0gZm91bmQgRUMyIEluc3RhbmNlKHMpLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBObyBFQzIgaW5zdGFuY2VzIGZvdW5kLmA7XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuVlBDIENIRUNLXFxuYDtcbiAgICBpZiAoYXNzZXNzbWVudC52cGNDaGVja3MgJiYgYXNzZXNzbWVudC52cGNDaGVja3MubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IHZwY0ZpbmQgb2YgYXNzZXNzbWVudC52cGNDaGVja3MpIHtcbiAgICAgICAgICAgIGlmICh2cGNGaW5kLnZwY0ZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7dnBjRmluZC5yZWdpb259IC0gZm91bmQgVlBDKHMpLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBObyBWUENzIGZvdW5kLmA7XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIENPTkZJRyBDSEVDS1xcbmA7XG4gICAgaWYgKGFzc2Vzc21lbnQuY29uZmlnRGV0YWlscyAmJiBhc3Nlc3NtZW50LmNvbmZpZ0RldGFpbHMuZmluZChwYXJhbSA9PiBwYXJhbS5jb25maWdSZWNvcmRlckZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbmZpZ0ZpbmQgb2YgYXNzZXNzbWVudC5jb25maWdEZXRhaWxzKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnRmluZC5jb25maWdSZWNvcmRlckZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7Y29uZmlnRmluZC5yZWdpb259IC0gQ29uZmlnIFJlY29yZGVyIGZvdW5kYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7Y29uZmlnRmluZC5yZWdpb259IC0gQ29uZmlnIERlbGl2ZXJ5IENoYW5uZWwgZm91bmRgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgTm8gQVdTIENvbmZpZyByZXNvdXJjZSBkaXNjb3ZlcmVkYDtcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5NQU5BR0VNRU5UIEFDQ09VTlQgUkVDT01NRU5ERUQgVEFTS1M6YDtcbiAgICBsZXQgbWd0VGFza051bWJlciA9IDE7XG4gICAgY29uc3QgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCA9IFwiTWFuYWdlbWVudCBBY2NvdW50XCI7XG4gICAgaWYgKGFzc2Vzc21lbnQuaWFtVXNlckNoZWNrcyAmJiBhc3Nlc3NtZW50LmlhbVVzZXJDaGVja3MubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGlhbVVzZXIgb2YgYXNzZXNzbWVudC5pYW1Vc2VyQ2hlY2tzKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MucmVtb3ZlSWFtVXNlclRhc2sobWd0VGFza051bWJlciwgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCwgaWFtVXNlci51c2VyTmFtZSk7XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgICAgICBtZ3RUYXNrTnVtYmVyKys7XG4gICAgICAgICAgICBpZiAoaWFtVXNlci5hY2Nlc3NLZXlJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5yZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayhtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCBpYW1Vc2VyLnVzZXJOYW1lLCBpYW1Vc2VyLmFjY2Vzc0tleUlkKTtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhc3Nlc3NtZW50LmVjMkNoZWNrcyAmJiBhc3Nlc3NtZW50LmVjMkNoZWNrcy5maW5kKHBhcmFtID0+IHBhcmFtLmVjMkZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGVjMiBvZiBhc3Nlc3NtZW50LmVjMkNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGVjMi5lYzJGb3VuZCAmJiBlYzIucmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGV0ZUVjMihtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCBlYzIucmVnaW9uKTtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhc3Nlc3NtZW50LnZwY0NoZWNrcyAmJiBhc3Nlc3NtZW50LnZwY0NoZWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgdnBjRmluZCBvZiBhc3Nlc3NtZW50LnZwY0NoZWNrcykge1xuICAgICAgICAgICAgaWYgKHZwY0ZpbmQudnBjRm91bmQgJiYgdnBjRmluZC5yZWdpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZXRlVnBjKG1ndFRhc2tOdW1iZXIsIG1hbmFnZW1lbnRBY2NvdW50V2F5cG9pbnQsIHZwY0ZpbmQucmVnaW9uKTtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYDtcbiAgICByZXBvcnQgKz0gYFxcbiAgICAgICAgICAgICAgICAgICAgR09WRVJOQU5DRWA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBQT0xJQ1kgVFlQRVNcXG5gO1xuICAgIHJlcG9ydCArPSBgXFxuICBTZXJ2aWNlIENvbnRyb2wgUG9saWNpZXMgKFNDUCkgZW5hYmxlZDogJHthc3Nlc3NtZW50LnNjcEVuYWJsZWR9YDtcbiAgICByZXBvcnQgKz0gYFxcbiAgVGFnIFBvbGljaWVzIGVuYWJsZWQ6ICR7YXNzZXNzbWVudC50YWdQb2xpY3lFbmFibGVkfWA7XG4gICAgcmVwb3J0ICs9IGBcXG4gIEJhY2t1cCBQb2xpY2llcyBlbmFibGVkOiAke2Fzc2Vzc21lbnQuYmFja3VwUG9saWN5RW5hYmxlZH1gO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBDTE9VREZPUk1BVElPTlxcbmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBDbG91ZEZvcm1hdGlvbiBPcmdhbml6YXRpb24gc3RhY2sgc2V0cyBzdGF0dXMgOiAke2Fzc2Vzc21lbnQub3JnQ2xvdWRGb3JtYXRpb25TdGF0dXN9YDtcbiAgICByZXBvcnQgKz0gYFxcblxcbkNMT1VEVFJBSUwgQ0hFQ0tcXG5gO1xuICAgIGlmIChhc3Nlc3NtZW50LmNsb3VkVHJhaWxEZXRhaWxzICYmIGFzc2Vzc21lbnQuY2xvdWRUcmFpbERldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGN0RmluZCBvZiBhc3Nlc3NtZW50LmNsb3VkVHJhaWxEZXRhaWxzKSB7XG4gICAgICAgICAgICBpZiAoY3RGaW5kLnRyYWlsRm91bmQpIHtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgQ2xvdWRUcmFpbCBmb3VuZCBpbiAke2N0RmluZC5yZWdpb259YDtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgICBJcyBPcmdhbml6YXRpb24gVHJhaWw6ICR7Y3RGaW5kLmlzT3JnVHJhaWx9YDtcbiAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgICBJcyBNdWx0aVJlZ2lvbjogJHtjdEZpbmQuaXNNdWx0aVJlZ2lvbn1gO1xuICAgICAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIE5vIEFXUyBDbG91ZFRyYWlsIHJlc291cmNlIGRpc2NvdmVyZWRgO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbkdPVkVSTkFOQ0UgU0VSVklDRVMgRU5BQkxFRCBJTiBBV1MgT1JHQU5JWkFUSU9OOlxcbmA7XG4gICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMpIHtcbiAgICAgICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuICBBV1MgQ2xvdWRUcmFpbGA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBDb25maWdgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgTm8gZ292ZXJuYW5jZSBzZXJ2aWNlIGVuYWJsZWRgO1xuICAgIH1cbiAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgR09WRVJOQU5DRSAvLy8vL1xuICAgIHJlcG9ydCArPSBgXFxuXFxuR09WRVJOQU5DRSBSRUNPTU1FTkRFRCBUQVNLUzpgO1xuICAgIGNvbnN0IGdvdldheXBvaW50ID0gXCJHb3Zlcm5hbmNlXCI7XG4gICAgbGV0IGdvdlRhc2tOdW1iZXIgPSAxO1xuICAgIGlmICghYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyB8fCAhYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJBV1MgQ2xvdWRUcmFpbFwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyB8fCAhYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIkFXUyBDb25maWdcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIWFzc2Vzc21lbnQuc2NwRW5hYmxlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYXNzZXNzbWVudC50YWdQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJUYWcgUG9saWN5XCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50LmJhY2t1cFBvbGljeUVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIkJhY2t1cCBQb2xpY3lcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gICAgICAgICAgICAgICAgRklOQU5DSUFMIE1BTkFHRU1FTlRgO1xuICAgIHJlcG9ydCArPSBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYDtcbiAgICByZXBvcnQgKz0gYFxcblxcbkxlZ2FjeSBDVVJgO1xuICAgIHJlcG9ydCArPSBgXFxuICBJcyBsZWdhY3kgQ1VSIHNldHVwOiAke2Fzc2Vzc21lbnQuaXNMZWdhY3lDdXJTZXR1cH1gO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQ0xPVUQgRklOQU5DSUFMIE1BTkFHRU1FTlQgUkVDT01NRU5ERUQgVEFTS1M6YDtcbiAgICBsZXQgZmluVGFza051bWJlciA9IDE7XG4gICAgY29uc3QgZmluV2F5cG9pbnQgPSBcIkNsb3VkIEZpbmFuY2lhbCBNYW5hZ2VtZW50XCI7XG4gICAgaWYgKCFhc3Nlc3NtZW50LmlzTGVnYWN5Q3VyU2V0dXApIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c0N1cihmaW5UYXNrTnVtYmVyLCBmaW5XYXlwb2ludCk7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgIE1VTFRJLUFDQ09VTlQgU1RSQVRFR1lgO1xuICAgIHJlcG9ydCArPSBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYDtcbiAgICByZXBvcnQgKz0gYFxcblxcbkFXUyBPUkdBTklaQVRJT04gREVUQUlMU1xcbmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBPcmdhbml6YXRpb24gSWQ6ICR7YXNzZXNzbWVudC5vcmdJZH1gO1xuICAgIHJlcG9ydCArPSBgXFxuICBBV1MgT3JnYW5pemF0aW9uIEFSTjogJHthc3Nlc3NtZW50Lm9yZ0Fybn1gO1xuICAgIHJlcG9ydCArPSBgXFxuICBBV1MgT3JnYW5pemF0aW9uIFJvb3QgT1UgSWQ6ICR7YXNzZXNzbWVudC5vcmdSb290T3VJZH1gO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBDTE9VREZPUk1BVElPTlxcbmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBDbG91ZEZvcm1hdGlvbiBPcmdhbml6YXRpb24gc3RhY2sgc2V0cyBzdGF0dXMgOiAke2Fzc2Vzc21lbnQub3JnQ2xvdWRGb3JtYXRpb25TdGF0dXN9YDtcbiAgICBsZXQgdHJhbnNpdGlvbmFsRm91bmQsIHN1c3BlbmRlZEZvdW5kLCBpbmZyYXN0cnVjdHVyZUZvdW5kID0gZmFsc2U7XG4gICAgbGV0IHdvcmtsb2Fkc0ZvdW5kID0gZmFsc2U7XG4gICAgbGV0IHNlY3VyaXR5Rm91bmQgPSBmYWxzZTtcbiAgICBpZiAoYXNzZXNzbWVudC5vcmdSb290T3VJZCkge1xuICAgICAgICByZXBvcnQgKz0gYFxcblxcbkFXUyBPUkdBTklaQVRJT04gVE9QLUxFVkVMIE9SR0FOSVpBVElPTiBVTklUU1xcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBMaXN0IG9mIE9yZ2FuaXphdGlvbidzIHRvcC1sZXZlbCBPVXMgYW5kIEFXUyBhY2NvdW50czpgO1xuICAgICAgICBpZiAoYXNzZXNzbWVudC5vcmdPdUluZm8gJiYgYXNzZXNzbWVudC5vcmdPdUluZm8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBvdSBvZiBhc3Nlc3NtZW50Lm9yZ091SW5mbykge1xuICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgICAgICAgICAgICAgICBzdXNwZW5kZWRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAndHJhbnNpdGlvbmFsJykge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uYWxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnd29ya2xvYWRzJykge1xuICAgICAgICAgICAgICAgICAgICB3b3JrbG9hZHNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnc2VjdXJpdHknKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3VyaXR5Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3UubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ2luZnJhc3RydWN0dXJlJykge1xuICAgICAgICAgICAgICAgICAgICBpbmZyYXN0cnVjdHVyZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICAgT3JnYW5pemF0aW9uYWwgVW5pdDogJHtvdS5uYW1lfWA7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICAgICBPcmdhbml6YXRpb25hbCBVbml0IElkOiAke291LmlkfWA7XG4gICAgICAgICAgICAgICAgaWYgKG91LmFjY291bnRzICYmIG91LmFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICAgICBBV1MgQWNjb3VudHM6YDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIG91LmFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgICAgICAgJHthY2NvdW50Lk5hbWV9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgICAgIEFXUyBBY2NvdW50czogTm9uZWA7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydCArPSBgXFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgTm8gdG9wIGxldmVsIE9VcyBmb3VuZC5gO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBNRU1CRVIgQUNDT1VOVFNcXG5gO1xuICAgIGlmIChhc3Nlc3NtZW50Lm9yZ01lbWJlckFjY291bnRzICYmIGFzc2Vzc21lbnQub3JnTWVtYmVyQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1lbWJlckFjY291bnQgb2YgYXNzZXNzbWVudC5vcmdNZW1iZXJBY2NvdW50cykge1xuICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFjY291bnQ6ICR7bWVtYmVyQWNjb3VudC5hY2NvdW50TmFtZX1gO1xuICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFjY291bnQgRW1haWw6ICR7bWVtYmVyQWNjb3VudC5hY2NvdW50RW1haWx9XFxuYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVwb3J0ICs9IGBObyBtZW1iZXIgYWNjb3VudHMgZm91bmQgd2hpY2ggaXMgYW1hemluZyBhcyB0aGlzIGlzIHJ1bm5pbmcgZnJvbSBvbmUuYDtcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIEVOQUJMRUQgU0VSVklDRVNcXG5gO1xuICAgIHJlcG9ydCArPSBgXFxuICBUaGUgZm9sbG93aW5nIEFXUyBTZXJ2aWNlcyBhcmUgZW5hYmxlZCB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uOmA7XG4gICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMgJiYgYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3JnU2VydmljZSBvZiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzKSB7XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbiAgICAke29yZ1NlcnZpY2Uuc2VydmljZX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgICBObyB0cnVzdGVkIGFjY2VzcyBlbmFibGVkIGluIHRoZSBBV1MgT3JnYW5pemF0aW9uYDtcbiAgICB9XG4gICAgbGV0IGlkZW50aXR5RGVsZWdhdGVkID0gZmFsc2U7XG4gICAgbGV0IHNlY3VyaXR5SHViRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgbGV0IGd1YXJkRHV0eURlbGVnYXRlZCA9IGZhbHNlO1xuICAgIGxldCBjb25maWdEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgczNTdG9yYWdlTGVuc0RlbGVnYXRlZCA9IGZhbHNlO1xuICAgIGxldCBpcGFtRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgbGV0IGFjY291bnREZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgYmFja3VwRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgT1JHQU5JWkFUSU9OIElOVEVHUkFURUQgU0VSVklDRSBSRUdJU1RFUkVEIERFTEVHQVRFRCBBRE1JTlNcXG5gO1xuICAgIGlmIChhc3Nlc3NtZW50Lm9yZ0RlbGVnYXRlZEFkbWluQWNjb3VudHMgJiYgYXNzZXNzbWVudC5vcmdEZWxlZ2F0ZWRBZG1pbkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIGFzc2Vzc21lbnQub3JnRGVsZWdhdGVkQWRtaW5BY2NvdW50cykge1xuICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFjY291bnQ6ICR7YWNjb3VudC5hY2NvdW50TmFtZX1gO1xuICAgICAgICAgICAgaWYgKGFjY291bnQuc2VydmljZXMgJiYgYWNjb3VudC5zZXJ2aWNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gIERlbGVnYXRlZCBTZXJ2aWNlczpgO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3J2IG9mIGFjY291bnQuc2VydmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ICs9IGBcXG4gICAgJHtzcnYuU2VydmljZVByaW5jaXBhbH1gO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdXJpdHlIdWJEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmREdXR5RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdzc28uYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0RlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYWNjZXNzLWFuYWx5emVyLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc3RvcmFnZS1sZW5zLnMzLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdpcGFtLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpcGFtRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdhY2NvdW50LmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdiYWNrdXAuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cERlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXBvcnQgKz0gYFxcbiBgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgTm8gZGVsZWdhdGVkIGFkbWluIGFjY291bnRzIGluIEFXUyBPcmdhbml6YXRpb25gO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbk1VTFRJLUFDQ09VTlQgU1RSQVRFR1kgUkVDT01NRU5ERUQgVEFTS1M6YDtcbiAgICBsZXQgbWFzVGFza051bWJlciA9IDE7XG4gICAgbGV0IG1hc1dheXBvaW50ID0gJ011bHRpLUFjY291bnQgU3RyYXRlZ3knO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5yZXZpZXdBY2NvdW50RW1haWxBZGRyZXNzZXMobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQpO1xuICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgaWYgKCFhc3Nlc3NtZW50LnNjcEVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIXRyYW5zaXRpb25hbEZvdW5kKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lPdVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiVHJhbnNpdGlvbmFsXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFzdXNwZW5kZWRGb3VuZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlN1c3BlbmRlZFwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghd29ya2xvYWRzRm91bmQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJXb3JrbG9hZHNcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgbWFzVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIXNlY3VyaXR5Rm91bmQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveU91VGFzayhtYXNUYXNrTnVtYmVyLCBtYXNXYXlwb2ludCwgXCJTZWN1cml0eVwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghaW5mcmFzdHJ1Y3R1cmVGb3VuZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIkluZnJhc3RydWN0dXJlXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgICAgTEFORElORyBaT05FYDtcbiAgICByZXBvcnQgKz0gYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmA7XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgQ09OVFJPTCBUT1dFUlxcbmA7XG4gICAgaWYgKGFzc2Vzc21lbnQuY29udHJvbFRvd2VyUmVnaW9uKSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBDb250cm9sIFRvd2VyIGhvbWUgcmVnaW9uOiAke2Fzc2Vzc21lbnQuY29udHJvbFRvd2VyUmVnaW9ufWA7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBDb250cm9sIFRvd2VyIHN0YXR1czogJHthc3Nlc3NtZW50LmNvbnRyb2xUb3dlclN0YXR1c31gO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgQ29udHJvbCBUb3dlciBMYW5kaW5nIFpvbmUgdmVyc2lvbjogJHthc3Nlc3NtZW50LmNvbnRyb2xUb3dlckRlcGxveWVkVmVyc2lvbn1gO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgTGF0ZXN0IGF2YWlsYWJsZSB2ZXJzaW9uOiAke2Fzc2Vzc21lbnQuY29udHJvbFRvd2VyTGF0ZXN0QXZhaWxhYmxlVmVyc2lvbn1gO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgRHJpZnQgU3RhdHVzOiAke2Fzc2Vzc21lbnQuY29udHJvbFRvd2VyRHJpZnRTdGF0dXN9YDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBBV1MgQ29udHJvbCBUb3dlciBpcyBub3QgZGVwbG95ZWQgaW4gdGhlIEFXUyBPcmdhbml6YXRpb25gO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbkxBTkRJTkcgWk9ORSBSRUNPTU1FTkRFRCBUQVNLUzpgO1xuICAgIGxldCBselRhc2tOdW1iZXIgPSAxO1xuICAgIGNvbnN0IGx6V2F5cG9pbnQgPSBcIkxhbmRpbmcgWm9uZVwiO1xuICAgIGlmIChhc3Nlc3NtZW50LmNvbnRyb2xUb3dlclJlZ2lvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lDb250cm9sVG93ZXJUYXNrKGx6VGFza051bWJlciwgbHpXYXlwb2ludCk7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmIChhc3Nlc3NtZW50LmNvbnRyb2xUb3dlckRyaWZ0U3RhdHVzID09PSAnRFJJRlRFRCcpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmZpeEx6RHJpZnQobHpUYXNrTnVtYmVyLCBseldheXBvaW50KTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKGFzc2Vzc21lbnQuY29udHJvbFRvd2VyRGVwbG95ZWRWZXJzaW9uICE9PSBhc3Nlc3NtZW50LmNvbnRyb2xUb3dlckxhdGVzdEF2YWlsYWJsZVZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgY3VycmVudFZlcnNpb24gPSBhc3Nlc3NtZW50LmNvbnRyb2xUb3dlckRlcGxveWVkVmVyc2lvbiA/PyBcIlwiO1xuICAgICAgICBjb25zdCBsYXRlc3RWZXJzaW9uID0gYXNzZXNzbWVudC5jb250cm9sVG93ZXJMYXRlc3RBdmFpbGFibGVWZXJzaW9uID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy51cGRhdGVMekNvbnRyb2xUb3dlclRhc2sobHpUYXNrTnVtYmVyLCBseldheXBvaW50LCBjdXJyZW50VmVyc2lvbiwgbGF0ZXN0VmVyc2lvbik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgbHpUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyB8fCAhYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdtZW1iZXIub3JnLnN0YWNrc2V0cy5jbG91ZGZvcm1hdGlvbi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobHpUYXNrTnVtYmVyLCBseldheXBvaW50LCBcIkFXUyBDbG91ZEZvcm1hdGlvblwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgICAgICBJREVOVElUWWA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIGlmIChhc3Nlc3NtZW50LmlkY0luZm8pIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgSUFNIElERU5USVRZIENFTlRFUlxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBJZEMgUmVnaW9uOiAke2Fzc2Vzc21lbnQuaWRjSW5mby5yZWdpb259YDtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIElkQyBBUk46ICR7YXNzZXNzbWVudC5pZGNJbmZvLmFybn1gO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgSWRDIEluc3RhbmNlIElkOiAke2Fzc2Vzc21lbnQuaWRjSW5mby5pZH1gO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgSUFNIElERU5USVRZIENFTlRFUiBOT1QgRk9VTkRcXG5gO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbklERU5USVRZIFJFQ09NTUVOREVEIFRBU0tTOmA7XG4gICAgbGV0IHNzb1Rhc2tOdW1iZXIgPSAxO1xuICAgIGNvbnN0IHNzb1dheXBvaW50ID0gJ0lkZW50aXR5JztcbiAgICBpZiAoIWFzc2Vzc21lbnQub3JnU2VydmljZXMgfHwgIWFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc3NvLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzc29UYXNrTnVtYmVyLCBzc29XYXlwb2ludCwgXCJBV1MgSUFNIElkZW50aXR5IENlbnRlclwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBzc29UYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghaWRlbnRpdHlEZWxlZ2F0ZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNzb1Rhc2tOdW1iZXIsIHNzb1dheXBvaW50LCBcIkFXUyBJQU0gSWRlbnRpdHkgQ2VudGVyXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNzb1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50LnNjcEVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKHNzb1Rhc2tOdW1iZXIsIHNzb1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgc3NvVGFza051bWJlcisrO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmA7XG4gICAgcmVwb3J0ICs9IGBcXG4gICAgICAgICAgICAgICAgICAgIFNFQ1VSSVRZYDtcbiAgICByZXBvcnQgKz0gYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmA7XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5BV1MgU0VDVVJJVFkgU0VSVklDRVMgRU5BQkxFRCBJTiBBV1MgT1JHQU5JWkFUSU9OOlxcbmA7XG4gICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMgJiYgYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBBV1MgR3VhcmREdXR5YDtcbiAgICB9XG4gICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMgJiYgYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBTZWN1cml0eSBIdWJgO1xuICAgIH1cbiAgICBpZiAoYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyAmJiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIElBTSBBY2Nlc3MgQW5hbHl6ZXJgO1xuICAgIH1cbiAgICBpZiAoYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyAmJiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ21hY2llLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgTWFjaWVgO1xuICAgIH1cbiAgICBpZiAoYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyAmJiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3N0b3JhZ2UtbGVucy5zMy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFtYXpvbiBTMyBTdG9yYWdlIExlbnNgO1xuICAgIH1cbiAgICBpZiAoYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyAmJiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2luc3BlY3RvcjIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICBBbWF6b24gSW5zcGVjdG9yYDtcbiAgICB9XG4gICAgaWYgKGFzc2Vzc21lbnQub3JnU2VydmljZXMgJiYgYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgQVdTIENsb3VkVHJhaWxgO1xuICAgIH1cbiAgICBpZiAoYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyAmJiBhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gIEFXUyBDb25maWdgO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcblxcblNFQ1VSSVRZIFJFQ09NTUVOREVEIFRBU0tTOmA7XG4gICAgbGV0IHNlY1Rhc2tOdW1iZXIgPSAxO1xuICAgIGNvbnN0IHNlY1dheXBvaW50ID0gXCJTZWN1cml0eVwiO1xuICAgIGlmICghYXNzZXNzbWVudC5zY3BFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIEd1YXJkRHV0eVwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYXNzZXNzbWVudC5vcmdTZXJ2aWNlcyB8fCAhYXNzZXNzbWVudC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIFNlY3VyaXR5SHViXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIElBTSBBY2Nlc3MgQW5hbHl6ZXJcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIWFzc2Vzc21lbnQub3JnU2VydmljZXMgfHwgIWFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIENsb3VkVHJhaWxcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIWFzc2Vzc21lbnQub3JnU2VydmljZXMgfHwgIWFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgQ29uZmlnXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFzZWN1cml0eUh1YkRlbGVnYXRlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiU2VjdXJpdHkgSHViXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFndWFyZER1dHlEZWxlZ2F0ZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkd1YXJkRHV0eVwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghY29uZmlnRGVsZWdhdGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgQ29uZmlnXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIElBTSBBY2Nlc3MgQW5hbHl6ZXJcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIXMzU3RvcmFnZUxlbnNEZWxlZ2F0ZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIlMzIFN0b3JhZ2UgTGVuc1wiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYDtcbiAgICByZXBvcnQgKz0gYFxcbiAgICAgICAgICAgICAgICAgICAgTkVUV09SS2A7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuTkVUV09SSyBSRUNPTU1FTkRFRCBUQVNLUzpgO1xuICAgIGxldCBuZXRUYXNrTnVtYmVyID0gMTtcbiAgICBjb25zdCBuZXR3b3JrV2F5cG9pbnQgPSAnTmV0d29yayc7XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbmV0R3VhcmREdXR5RW5hYmxlTWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBHdWFyZER1dHlcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke25ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2V9YDtcbiAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIWFzc2Vzc21lbnQub3JnU2VydmljZXMgfHwgIWFzc2Vzc21lbnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnaXBhbS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBJUEFNXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3JhbS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBSZXNvdXJjZSBBY2Nlc3MgTWFuYWdlclwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghaXBhbURlbGVnYXRlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBJUEFNXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFhc3Nlc3NtZW50LnNjcEVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgICAgT0JTRVJWQUJJTElUWWA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuT0JTRVJWQUJJTElUWSBSRUNPTU1FTkRFRCBUQVNLUzpgO1xuICAgIGxldCBvYlRhc2tOdW1iZXIgPSAxO1xuICAgIGNvbnN0IG9iV2F5cG9pbnQgPSAnT2JzZXJ2YWJpbGl0eSc7XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY291bnQuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKG9iVGFza051bWJlciwgb2JXYXlwb2ludCwgXCJBY2NvdW50IE1hbmFnZXJcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgb2JUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYWNjb3VudERlbGVnYXRlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uob2JUYXNrTnVtYmVyLCBvYldheXBvaW50LCBcIkFjY291bnQgTWFuYWdlclwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBvYlRhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuICAgICAgICAgICAgICAgQkFDS1VQIEFORCBSRUNPVkVSWWA7XG4gICAgcmVwb3J0ICs9IGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgO1xuICAgIHJlcG9ydCArPSBgXFxuXFxuQkFDS1VQIEFORCBSRUNPVkVSWSBSRUNPTU1FTkRFRCBUQVNLUzpgO1xuICAgIGxldCBiYWNrVGFza051bWJlciA9IDE7XG4gICAgY29uc3QgYmFja3VwV2F5cG9pbnQgPSAnQmFja3VwIGFuZCBSZWNvdmVyeSc7XG4gICAgaWYgKCFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzIHx8ICFhc3Nlc3NtZW50Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2JhY2t1cC5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UoYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIkFXUyBCYWNrdXBcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgaWYgKCFiYWNrdXBEZWxlZ2F0ZWQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKGJhY2tUYXNrTnVtYmVyLCBiYWNrdXBXYXlwb2ludCwgXCJBV1MgQmFja3VwXCIpO1xuICAgICAgICByZXBvcnQgKz0gYFxcbiAgJHttZXNzYWdlfWA7XG4gICAgICAgIGJhY2tUYXNrTnVtYmVyKys7XG4gICAgfVxuICAgIGlmICghYXNzZXNzbWVudC5iYWNrdXBQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhiYWNrVGFza051bWJlciwgYmFja3VwV2F5cG9pbnQsIFwiQmFja3VwIFBvbGljeVwiKTtcbiAgICAgICAgcmVwb3J0ICs9IGBcXG4gICR7bWVzc2FnZX1gO1xuICAgICAgICBiYWNrVGFza051bWJlcisrO1xuICAgIH1cbiAgICBpZiAoIWFzc2Vzc21lbnQuc2NwRW5hYmxlZCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soYmFja1Rhc2tOdW1iZXIsIGJhY2t1cFdheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgIHJlcG9ydCArPSBgXFxuICAke21lc3NhZ2V9YDtcbiAgICAgICAgYmFja1Rhc2tOdW1iZXIrKztcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5cXG5cXG4gIEVORCBSRVZJRVdgO1xuICAgIHJldHVybiByZXBvcnQ7XG59XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVSZXBvcnQ7XG4iLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIm5vZGU6c3RyZWFtXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiZnNcIik7IiwiaW1wb3J0IHsgZGVmaW5lQWNjb3VudFR5cGUgfSBmcm9tICcuL3NyYy9hY3Rpb25zL2RlZmluZS1hY2NvdW50LXR5cGUuanMnO1xuaW1wb3J0IGNoZWNrSWFtVXNlcnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1pYW0tdXNlcnMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1wb2xpY3ktdHlwZXMuanMnO1xuaW1wb3J0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1lbmFibGVkLW9yZy1zZXJ2aWNlcy5qcyc7XG5pbXBvcnQgZ2V0T3JnQ2xvdWRGb3JtYXRpb24gZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1vcmctY2xvdWRmb3JtYXRpb24uanMnO1xuaW1wb3J0IGdldElkY0luZm8gZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtaWRjLWluZm8uanMnO1xuaW1wb3J0IGdldE9yZ0RldGFpbHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLWRldGFpbHMuanMnO1xuaW1wb3J0IGdldE9yZ1RvcExldmVsT3VzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1vdXMuanMnO1xuaW1wb3J0IGdldEFsbFJlZ2lvbnMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtcmVnaW9ucy5qcyc7XG5pbXBvcnQgY2hlY2tFYzJFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1lYzItZXhpc3RlbmNlLmpzJztcbmltcG9ydCBjaGVja1ZwY0V4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLXZwYy1leGlzdGVuY2UuanMnO1xuaW1wb3J0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWNsb3VkdHJhaWwtZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdEYUFjY291bnRzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1kYS1hY2NvdW50cy5qcyc7XG5pbXBvcnQgY2hlY2tDb25maWdFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb25maWctZXhpc3RlbmNlLmpzJztcbmltcG9ydCBnZXRPcmdNZW1iZXJBY2NvdW50cyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctbWVtYmVyLWFjY291bnRzLmpzJztcbmltcG9ydCBnZXRDb250cm9sVG93ZXIgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jb250cm9sLXRvd2VyLmpzJztcbmltcG9ydCBjaGVja0xlZ2FjeUN1ciBmcm9tICcuL3NyYy9hY3Rpb25zL2NoZWNrLWxlZ2FjeS1jdXIuanMnO1xuaW1wb3J0IGNyZWF0ZVJlcG9ydCBmcm9tICcuL3NyYy9hY3Rpb25zL2NyZWF0ZS1yZXBvcnQuanMnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuY29uc3QgbWFpbiA9IGFzeW5jICgpID0+IHtcbiAgICBsZXQgcmVwb3J0ID0ge307XG4gICAgbGV0IENmYXRDaGVja3MgPSBbXTtcbiAgICBjb25zdCByZWdpb24gPSBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnO1xuICAgIGNvbnN0IGFsbFJlZ2lvbnMgPSBhd2FpdCBnZXRBbGxSZWdpb25zKCk7XG4gICAgY29uc29sZS5sb2coXCJkaXNjb3ZlcmluZyB5b3VyIEFXUyBlbnZpcm9ubWVudC4uLlwiKTtcbiAgICBjb25zdCBhY2NvdW50VHlwZSA9IGF3YWl0IGRlZmluZUFjY291bnRUeXBlKHJlZ2lvbik7XG4gICAgbGV0IHRyYW5zaXRpb25hbEZvdW5kLCBzdXNwZW5kZWRGb3VuZCwgaW5mcmFzdHJ1Y3R1cmVGb3VuZCA9IGZhbHNlO1xuICAgIGxldCB3b3JrbG9hZHNGb3VuZCA9IGZhbHNlO1xuICAgIGxldCBzZWN1cml0eUZvdW5kID0gZmFsc2U7XG4gICAgbGV0IGNmYXRJYW1Vc2VyUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0SWFtSWRQT3JnU2VydmljZVBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdElhbUlkY0NvbmZpZ3VyZWRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRDbG91ZFRyYWlsUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0Q2xvdWRUcmFpbE9yZ1RyYWlsUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0VnBjUGFzcyA9IHRydWU7XG4gICAgbGV0IGNmYXRFYzJQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRDb25maWdNYW5hZ2VtZW50QWNjb3VudFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdENvbmZpZ1JlY29yZGVyTWFuYWdlbWVudEFjY291bnRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRDbG91ZFRyYWlsT3JnU2VydmljZUVuYWJsZWRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRUYWdQb2xpY2llc0VuYWJsZWRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRTY3BFbmFibGVkUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0QmFja3VwUG9saWNpZXNFbmFibGVkUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0T3JnQ2xvdWRGb3JtYXRpb25FbmFibGVkUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0T3JnQ2xvdWRGb3JtYXRpb25TdGF0dXNQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRPcmdTZXJ2aWNlR3VhcmREdXR5RW5hYmxlZFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdE9yZ1NlcnZpY2VTZWN1cml0eUh1YkVuYWJsZWRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRPcmdTZXJ2aWNlSWFtQWNjZXNzQW5hbHl6ZXJFbmFibGVkUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0T3JnU2VydmljZUF3c0NvbmZpZ0VuYWJsZWRQYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRPcmdTZXJ2aWNlUmFtRW5hYmxlZFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdENvbnRyb2xUb3dlckRlcGxveWVkUGFzcyA9IGZhbHNlO1xuICAgIGxldCBjZmF0Q29udHJvbFRvd2VyTm90RHJpZnRlZFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdENvbnRyb2xUb3dlckxhdGVzdFZlcnNpb25QYXNzID0gZmFsc2U7XG4gICAgbGV0IGNmYXRMb2dBcmNoaXZlQWNjb3VudFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdEF1ZGl0QWNjb3VudFBhc3MgPSBmYWxzZTtcbiAgICBsZXQgY2ZhdE1hbmFnZW1lbnRBY2NvdW50UGFzcyA9IHRydWU7XG4gICAgbGV0IGNmYXRPcmdTZXJ2aWNlQmFja3VwRW5hYmxlZFBhc3MgPSBmYWxzZTtcbiAgICBpZiAoYWNjb3VudFR5cGUpIHtcbiAgICAgICAgcmVwb3J0Lm9yZ2FuaXphdGlvbkRlcGxveSA9IGFjY291bnRUeXBlLmlzSW5Pcmdhbml6YXRpb247XG4gICAgICAgIHJlcG9ydC5tYW5hZ2VtZW50QWNjb3VudCA9IGFjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnQ7XG4gICAgICAgIGlmIChhY2NvdW50VHlwZS5pc01hbmFnZW1lbnRBY2NvdW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFjY291bnRUeXBlLmlzTWFuYWdlbWVudEFjY291bnQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQVdTIGFjY291bnQgaXMgbm90IHRoZSBNYW5hZ2VtZW50IEFjY291bnQgb2YgYW4gQVdTIE9yZ2FuaXphdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBjZmF0TWFuYWdlbWVudEFjY291bnRQYXNzID0gYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudDtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJkaXNjb3ZlcmluZyBJQU0gVXNlcnMuLi5cIik7XG4gICAgY29uc3QgaWFtVXNlclJlc3VsdCA9IGF3YWl0IGNoZWNrSWFtVXNlcnMoKTtcbiAgICBpZiAoaWFtVXNlclJlc3VsdCAmJiBpYW1Vc2VyUmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJJQU0gVXNlcnMgZGlzY292ZXJlZC5cIik7XG4gICAgICAgIHJlcG9ydC5pYW1Vc2VyQ2hlY2tzID0gaWFtVXNlclJlc3VsdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNmYXRJYW1Vc2VyUGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiZGlzY292ZXJpbmcgRUMyIGluc3RhbmNlcyBhY3Jvc3MgYWxsIEFXUyBSZWdpb25zLi4uXCIpO1xuICAgIGNvbnN0IGVjMkNoZWNrID0gYXdhaXQgY2hlY2tFYzJFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgaWYgKGVjMkNoZWNrICYmIGVjMkNoZWNrLmZpbmQocGFyYW0gPT4gcGFyYW0uZWMyRm91bmQgPT09IHRydWUpKSB7XG4gICAgICAgIHJlcG9ydC5lYzJDaGVja3MgPSBlYzJDaGVjaztcbiAgICAgICAgY29uc29sZS5pbmZvKFwid2FybmluZzogRUMyIGluc3RhbmNlcyBkaXNjb3ZlcmVkLlwiKTtcbiAgICAgICAgZm9yIChjb25zdCBlYzIgb2YgZWMyQ2hlY2spIHtcbiAgICAgICAgICAgIGNmYXRFYzJQYXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJkaXNjb3ZlcmluZyBWUENzIGFjcm9zcyBhbGwgQVdTIFJlZ2lvbnMuLi5cIik7XG4gICAgY29uc3QgdnBjQ2hlY2sgPSBhd2FpdCBjaGVja1ZwY0V4aXN0cyhhbGxSZWdpb25zKTtcbiAgICByZXBvcnQudnBjQ2hlY2tzID0gdnBjQ2hlY2s7XG4gICAgaWYgKHZwY0NoZWNrICYmIHZwY0NoZWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2ZhdFZwY1Bhc3MgPSBmYWxzZTtcbiAgICAgICAgY29uc29sZS5sb2coXCJ3YXJuaW5nOiBWUENzIGRpc2NvdmVyZWQuXCIpO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcImRpc2NvdmVyaW5nIEFXUyBDb25maWcgY29uZmlndXJhdGlvbnMgYWNyb3NzIGFsbCBBV1MgUmVnaW9ucy4uLlwiKTtcbiAgICByZXBvcnQuY2xvdWRUcmFpbERldGFpbHMgPSBhd2FpdCBjaGVja0Nsb3VkVHJhaWxFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgcmVwb3J0LmNvbmZpZ0RldGFpbHMgPSBhd2FpdCBjaGVja0NvbmZpZ0V4aXN0cyhhbGxSZWdpb25zKTtcbiAgICBpZiAocmVwb3J0LmNvbmZpZ0RldGFpbHMgJiYgcmVwb3J0LmNvbmZpZ0RldGFpbHMuZmluZChwYXJhbSA9PiBwYXJhbS5jb25maWdSZWNvcmRlckZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbmZpZ0ZpbmQgb2YgcmVwb3J0LmNvbmZpZ0RldGFpbHMpIHtcbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ1JlY29yZGVyRm91bmQpIHtcbiAgICAgICAgICAgICAgICBjZmF0Q29uZmlnTWFuYWdlbWVudEFjY291bnRQYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWdGaW5kLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgY2ZhdENvbmZpZ1JlY29yZGVyTWFuYWdlbWVudEFjY291bnRQYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBhbGwgdGhlIGZvbGxvd2luZyBjYWxscyByZXF1aXJlIGFuIEFXUyBPcmdhbml6YXRpb24gdG8gZXhpc3QgYW5kIHRoZSBhY2NvdW50IGJlIGEgbWFuYWdlbWVudCBhY2NvdW50XG4gICAgaWYgKGFjY291bnRUeXBlLmlzSW5Pcmdhbml6YXRpb24gJiYgYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImNvbGxlY3RpbmcgZ2VuZXJhbCBBV1MgT3JnYW5pemF0aW9uIGRldGFpbHMuLi5cIik7XG4gICAgICAgIGNvbnN0IG9yZ0RldGFpbHMgPSBhd2FpdCBnZXRPcmdEZXRhaWxzKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJjb2xsZWN0aW5nIENVUiBkZXRhaWxzLi4uXCIpO1xuICAgICAgICBjb25zdCBsZWdhY3lDdXJDaGVjayA9IGF3YWl0IGNoZWNrTGVnYWN5Q3VyKCd1cy1lYXN0LTEnKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJjb2xsZWN0aW5nIEFXUyBPcmdhbml6YXRpb24gUG9saWN5IGRldGFpbHMuLi5cIik7XG4gICAgICAgIGNvbnN0IGVuYWJsZU9yZ1BvbGljaWVzQ2hlY2sgPSBhd2FpdCBnZXRFbmFibGVkT3JnUG9saWN5VHlwZXMoJ3VzLWVhc3QtMScpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImNvbGxlY3RpbmcgQVdTIE9yZ2FuaXphdGlvbiBzZXJ2aWNlIHRydXN0ZWQgYWNjZXNzIGRldGFpbHMuLi5cIik7XG4gICAgICAgIHJlcG9ydC5vcmdTZXJ2aWNlcyA9IGF3YWl0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcygndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29sbGVjdGluZyBBV1MgT3JnYW5pemF0aW9uIENsb3VkRm9ybWF0aW9uIHN0YXR1cyBkZXRhaWxzLi4uXCIpO1xuICAgICAgICBjb25zdCBjZm5PcmdTdGF0dXMgPSBhd2FpdCBnZXRPcmdDbG91ZEZvcm1hdGlvbihyZWdpb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhcImNvbGxlY3RpbmcgQVdTIENvbnRyb2wgVG93ZXIgZGV0YWlscy4uLlwiKTtcbiAgICAgICAgY29uc3QgY29udHJvbFRvd2VyRGV0YWlscyA9IGF3YWl0IGdldENvbnRyb2xUb3dlcihyZWdpb24pO1xuICAgICAgICByZXBvcnQuaWRjSW5mbyA9IGF3YWl0IGdldElkY0luZm8oYWxsUmVnaW9ucyk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY29sbGVjdGluZyBBV1MgT3JnYW5pemF0aW9uIHNlcnZpY2UgZGVsZWdhdGVkIGFkbWluIGRldGFpbHMuLi5cIik7XG4gICAgICAgIHJlcG9ydC5vcmdEZWxlZ2F0ZWRBZG1pbkFjY291bnRzID0gYXdhaXQgZ2V0T3JnRGFBY2NvdW50cygpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImNvbGxlY3RpbmcgQVdTIE9yZ2FuaXphdGlvbiBtZW1iZXIgYWNjb3VudCBkZXRhaWxzLi4uXCIpO1xuICAgICAgICByZXBvcnQub3JnTWVtYmVyQWNjb3VudHMgPSBhd2FpdCBnZXRPcmdNZW1iZXJBY2NvdW50cygpO1xuICAgICAgICByZXBvcnQuaXNMZWdhY3lDdXJTZXR1cCA9IGxlZ2FjeUN1ckNoZWNrLmlzTGVnYWN5Q3VyU2V0dXA7XG4gICAgICAgIHJlcG9ydC5vcmdBcm4gPSBvcmdEZXRhaWxzLmFybjtcbiAgICAgICAgcmVwb3J0Lm9yZ0lkID0gb3JnRGV0YWlscy5pZDtcbiAgICAgICAgcmVwb3J0Lm9yZ1Jvb3RPdUlkID0gb3JnRGV0YWlscy5yb290T3VJZDtcbiAgICAgICAgcmVwb3J0LmJhY2t1cFBvbGljeUVuYWJsZWQgPSBlbmFibGVPcmdQb2xpY2llc0NoZWNrLmJhY2t1cFBvbGljeUVuYWJsZWQ7XG4gICAgICAgIHJlcG9ydC5zY3BFbmFibGVkID0gZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkO1xuICAgICAgICByZXBvcnQudGFnUG9saWN5RW5hYmxlZCA9IGVuYWJsZU9yZ1BvbGljaWVzQ2hlY2sudGFnUG9saWN5RW5hYmxlZDtcbiAgICAgICAgcmVwb3J0Lm9yZ0Nsb3VkRm9ybWF0aW9uU3RhdHVzID0gY2ZuT3JnU3RhdHVzLnN0YXR1cztcbiAgICAgICAgcmVwb3J0LmNvbnRyb2xUb3dlckRlcGxveWVkVmVyc2lvbiA9IGNvbnRyb2xUb3dlckRldGFpbHMuZGVwbG95ZWRWZXJzaW9uO1xuICAgICAgICByZXBvcnQuY29udHJvbFRvd2VyRHJpZnRTdGF0dXMgPSBjb250cm9sVG93ZXJEZXRhaWxzLmRyaWZ0U3RhdHVzO1xuICAgICAgICByZXBvcnQuY29udHJvbFRvd2VyTGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiA9IGNvbnRyb2xUb3dlckRldGFpbHMubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbjtcbiAgICAgICAgcmVwb3J0LmNvbnRyb2xUb3dlclJlZ2lvbiA9IGNvbnRyb2xUb3dlckRldGFpbHMuY29udHJvbFRvd2VyUmVnaW9uO1xuICAgICAgICByZXBvcnQuY29udHJvbFRvd2VyU3RhdHVzID0gY29udHJvbFRvd2VyRGV0YWlscy5zdGF0dXM7XG4gICAgICAgIGlmIChyZXBvcnQuaWRjSW5mby5hcm4pIHtcbiAgICAgICAgICAgIGNmYXRJYW1JZGNDb25maWd1cmVkUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC5jbG91ZFRyYWlsRGV0YWlscyAmJiByZXBvcnQuY2xvdWRUcmFpbERldGFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2ZhdENsb3VkVHJhaWxQYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3RGaW5kIG9mIHJlcG9ydC5jbG91ZFRyYWlsRGV0YWlscykge1xuICAgICAgICAgICAgICAgIGlmIChjdEZpbmQudHJhaWxGb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3RGaW5kLmlzT3JnVHJhaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNmYXRDbG91ZFRyYWlsT3JnVHJhaWxQYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2Nsb3VkdHJhaWwuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjZmF0Q2xvdWRUcmFpbE9yZ1NlcnZpY2VFbmFibGVkUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjb25maWcuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjZmF0T3JnU2VydmljZUF3c0NvbmZpZ0VuYWJsZWRQYXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjZmF0U2NwRW5hYmxlZFBhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmFibGVPcmdQb2xpY2llc0NoZWNrLnRhZ1BvbGljeUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNmYXRUYWdQb2xpY2llc0VuYWJsZWRQYXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5hYmxlT3JnUG9saWNpZXNDaGVjay5iYWNrdXBQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgICAgICBjZmF0QmFja3VwUG9saWNpZXNFbmFibGVkUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0RldGFpbHMucm9vdE91SWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29sbGVjdGluZyBPVSBhbmQgbWVtYmVyIGFjY291bnQgZGV0YWlscy4uLlwiKTtcbiAgICAgICAgICAgIHJlcG9ydC5vcmdPdUluZm8gPSBhd2FpdCBnZXRPcmdUb3BMZXZlbE91cygndXMtZWFzdC0xJywgb3JnRGV0YWlscy5yb290T3VJZCk7XG4gICAgICAgICAgICBpZiAocmVwb3J0Lm9yZ091SW5mbyAmJiByZXBvcnQub3JnT3VJbmZvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG91IG9mIHJlcG9ydC5vcmdPdUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5kZWRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICd0cmFuc2l0aW9uYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uYWxGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICd3b3JrbG9hZHMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrbG9hZHNGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG91Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdzZWN1cml0eScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3VyaXR5Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnaW5mcmFzdHJ1Y3R1cmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZyYXN0cnVjdHVyZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0Lm9yZ01lbWJlckFjY291bnRzICYmIHJlcG9ydC5vcmdNZW1iZXJBY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lbWJlckFjY291bnQgb2YgcmVwb3J0Lm9yZ01lbWJlckFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lbWJlckFjY291bnQuYWNjb3VudE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlckFjY291bnQuYWNjb3VudE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2xvZyBhcmNoaXZlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2ZhdExvZ0FyY2hpdmVBY2NvdW50UGFzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbWJlckFjY291bnQuYWNjb3VudE5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2F1ZGl0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2ZhdEF1ZGl0QWNjb3VudFBhc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZW1iZXJBY2NvdW50LmFjY291bnROYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzZWN1cml0eSB0b29saW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2ZhdEF1ZGl0QWNjb3VudFBhc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBpZGVudGl0eURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgc2VjdXJpdHlIdWJEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGd1YXJkRHV0eURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgY29uZmlnRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgczNTdG9yYWdlTGVuc0RlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaXBhbURlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgYWNjb3VudERlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgYmFja3VwRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChyZXBvcnQub3JnRGVsZWdhdGVkQWRtaW5BY2NvdW50cyAmJiByZXBvcnQub3JnRGVsZWdhdGVkQWRtaW5BY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgcmVwb3J0Lm9yZ0RlbGVnYXRlZEFkbWluQWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudC5zZXJ2aWNlcyAmJiBhY2NvdW50LnNlcnZpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzcnYgb2YgYWNjb3VudC5zZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc2VjdXJpdHlodWIuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN1cml0eUh1YkRlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZER1dHlEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnc3NvLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHlEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlhbUFjY2Vzc0FuYWx5emVyRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ3N0b3JhZ2UtbGVucy5zMy5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMzU3RvcmFnZUxlbnNEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnaXBhbS5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlwYW1EZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYWNjb3VudC5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnREZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnYmFja3VwLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbFRvd2VyRGV0YWlscy5jb250cm9sVG93ZXJSZWdpb24pIHtcbiAgICAgICAgICAgIGNmYXRDb250cm9sVG93ZXJEZXBsb3llZFBhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cm9sVG93ZXJEZXRhaWxzLmRyaWZ0U3RhdHVzICE9PSAnRFJJRlRFRCcpIHtcbiAgICAgICAgICAgIGNmYXRDb250cm9sVG93ZXJOb3REcmlmdGVkUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xUb3dlckRldGFpbHMuZGVwbG95ZWRWZXJzaW9uID09PSBjb250cm9sVG93ZXJEZXRhaWxzLmxhdGVzdEF2YWlsYWJsZVZlcnNpb24pIHtcbiAgICAgICAgICAgIGNmYXRDb250cm9sVG93ZXJMYXRlc3RWZXJzaW9uUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC5vcmdTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdtZW1iZXIub3JnLnN0YWNrc2V0cy5jbG91ZGZvcm1hdGlvbi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNmYXRPcmdDbG91ZEZvcm1hdGlvblN0YXR1c1Bhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc3NvLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY2ZhdElhbUlkUE9yZ1NlcnZpY2VQYXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2d1YXJkZHV0eS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNmYXRPcmdTZXJ2aWNlR3VhcmREdXR5RW5hYmxlZFBhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnc2VjdXJpdHlodWIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjZmF0T3JnU2VydmljZVNlY3VyaXR5SHViRW5hYmxlZFBhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYWNjZXNzLWFuYWx5emVyLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY2ZhdE9yZ1NlcnZpY2VJYW1BY2Nlc3NBbmFseXplckVuYWJsZWRQYXNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVwb3J0Lm9yZ1NlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3JhbS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNmYXRPcmdTZXJ2aWNlUmFtRW5hYmxlZFBhc3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBvcnQub3JnU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnYmFja3VwLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY2ZhdE9yZ1NlcnZpY2VCYWNrdXBFbmFibGVkUGFzcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYWNjb3VudFR5cGUuaXNJbk9yZ2FuaXphdGlvbiAmJiAhYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1xcbldBUk5JTkc6IFlvdSBhcmUgcnVubmluZyBDRkFUIGZyb20gYW4gYWNjb3VudCB0aGF0IGlzIGEgbWVtYmVyIG9mIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi4gUGxlYXNlIHJ1biB0aGUgc29sdXRpb24gZnJvbSB5b3VyIEFXUyBNYW5hZ2VtZW50IGFjY291bnQuJztcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdcXG5XQVJOSU5HOiBZb3UgYXJlIHJ1bm5pbmcgQ0ZBVCBmcm9tIGFuIGFjY291bnQgdGhhdCBub3QgcGFydCBvZiBhbiBBV1MgT3JnYW5pemF0aW9uLiBUaGlzIGFjY291bnQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgc3RhbmRhbG9uZSBhY2NvdW50Lic7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICB9XG4gICAgLy8vL1NDT1JJTkdcbiAgICBsZXQgT3JnQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQVdTIE9yZ2FuaXphdGlvbiBjcmVhdGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkFXUyBPcmdhbml6YXRpb24gaXMgZW5hYmxlZC5cIixcbiAgICAgICAgc3RhdHVzOiBhY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9uID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMVxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKE9yZ0NoZWNrKTtcbiAgICBsZXQgTUFDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJNYW5hZ2VtZW50IEFjY291bnQgY3JlYXRlZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBV1MgTWFuYWdlbWVudCBhY2NvdW50IGV4aXN0cy5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0TWFuYWdlbWVudEFjY291bnRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMVxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKE1BQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRJYW1Vc2VyQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiTWFuYWdlbWVudCBBY2NvdW50IElBTSBVc2VycyByZW1vdmVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIklBTSBVc2VycyBzaG91bGQgbm90IGV4aXN0IGluIE1hbmFnZW1lbnQgQWNjb3VudC5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0SWFtVXNlclBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB3ZWlnaHQ6IDQsXG4gICAgICAgIGxvZTogMVxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRJYW1Vc2VyQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRFYzJDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJNYW5hZ2VtZW50IEFjY291bnQgRUMyIGluc3RhbmNlcyByZW1vdmVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkVDMiBJbnN0YW5jZXMgc2hvdWxkIG5vdCBleGlzdCBpbiBNYW5hZ2VtZW50IEFjY291bnQuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdEVjMlBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB3ZWlnaHQ6IDQsXG4gICAgICAgIGxvZTogMVxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRFYzJDaGVjayk7XG4gICAgY29uc3QgY2ZhdFZwY0NoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIk1hbmFnZW1lbnQgQWNjb3VudCBWUENzIHJlbW92ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiTWFuYWdlbWVudCBBY2NvdW50IHNob3VsZCBub3QgaGF2ZSBhbnkgVlBDcy5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0VnBjUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHdlaWdodDogNCxcbiAgICAgICAgbG9lOiAxLFxuICAgICAgICByZW1lZGlhdGlvbkxpbms6IFwiaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkLWZvdW5kYXRpb25zLW9uLWF3cy9jbG91ZC1mb3VuZGF0aW9ucy10ZW1wbGF0ZXMvYmxvYi9tYWluL25ldHdvcmsvbmV0d29yay1kZWZhdWx0LXZwYy1kZWxldGlvbi9SRUFETUUubWRcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRWcGNDaGVjayk7XG4gICAgY29uc3QgY2ZhdENsb3VkVHJhaWxDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJDbG91ZFRyYWlsIFRyYWlsIGNyZWF0ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2xvdWRUcmFpbCBzaG91bGQgYmUgZW5hYmxlZCB3aXRoaW4gdGhlIGFjY291bnQuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdENsb3VkVHJhaWxQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMyxcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hd3NjbG91ZHRyYWlsL2xhdGVzdC91c2VyZ3VpZGUvY3JlYXRpbmctdHJhaWwtb3JnYW5pemF0aW9uLmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRDbG91ZFRyYWlsQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRDbG91ZFRyYWlsT3JnU2VydmljZUVuYWJsZWRDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJDbG91ZFRyYWlsIE9yZ2FuaXphdGlvbiBTZXJ2aWNlIGVuYWJsZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ2xvdWRUcmFpbCBzaG91bGQgYmUgZW5hYmxlZCBvbiB0aGUgT3JnYW5pemF0aW9uLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRDbG91ZFRyYWlsT3JnU2VydmljZUVuYWJsZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMSxcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9vcmdhbml6YXRpb25zL2xhdGVzdC91c2VyZ3VpZGUvc2VydmljZXMtdGhhdC1jYW4taW50ZWdyYXRlLWNsb3VkdHJhaWwuaHRtbFwiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdENsb3VkVHJhaWxPcmdTZXJ2aWNlRW5hYmxlZENoZWNrKTtcbiAgICBjb25zdCBjZmF0Q2xvdWRUcmFpbE9yZ1RyYWlsQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ2xvdWRUcmFpbCBPcmcgVHJhaWwgZGVwbG95ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQXQgbGVhc3Qgb25lIENsb3VkVHJhaWwgT3JnYW5pemF0aW9uIFRyYWlsIHNob3VsZCBiZSBlbmFibGVkLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRDbG91ZFRyYWlsT3JnVHJhaWxQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMSxcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hd3NjbG91ZHRyYWlsL2xhdGVzdC91c2VyZ3VpZGUvY3JlYXRpbmctdHJhaWwtb3JnYW5pemF0aW9uLmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRDbG91ZFRyYWlsT3JnVHJhaWxDaGVjayk7XG4gICAgY29uc3QgY2ZhdENvbmZpZ01hbmFnZW1lbnRBY2NvdW50Q2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ29uZmlnIFJlY29yZGVyIGluIE1hbmFnZW1lbnQgQWNjb3VudCBjb25maWd1cmVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbmZpZyBSZWNvcmRlciBpbiB0aGUgTWFuYWdlbWVudCBBY2NvdW50IHNob3VsZCBiZSBlbmFibGVkLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRDb25maWdNYW5hZ2VtZW50QWNjb3VudFBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHdlaWdodDogNixcbiAgICAgICAgbG9lOiAyLFxuICAgICAgICByZW1lZGlhdGlvbkxpbms6IFwiaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9ibG9ncy9tdC9tYW5hZ2luZy1hd3Mtb3JnYW5pemF0aW9ucy1hY2NvdW50cy11c2luZy1hd3MtY29uZmlnLWFuZC1hd3MtY2xvdWRmb3JtYXRpb24tc3RhY2tzZXRzL1wiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdENvbmZpZ01hbmFnZW1lbnRBY2NvdW50Q2hlY2spO1xuICAgIGNvbnN0IGNmYXRDb25maWdSZWNvcmRlck1hbmFnZW1lbnRBY2NvdW50Q2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ29uZmlnIERlbGl2ZXJ5IENoYW5uZWwgaW4gTWFuYWdlbWVudCBBY2NvdW50IGNvbmZpZ3VyZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29uZmlnIERlbGl2ZXJ5IENoYW5uZWwgaW4gTWFuYWdlbWVudCBBY2NvdW50IHNob3VsZCBiZSBlbmFibGVkLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRDb25maWdSZWNvcmRlck1hbmFnZW1lbnRBY2NvdW50UGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgd2VpZ2h0OiA2LFxuICAgICAgICBsb2U6IDIsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2F3cy5hbWF6b24uY29tL2Jsb2dzL210L21hbmFnaW5nLWF3cy1vcmdhbml6YXRpb25zLWFjY291bnRzLXVzaW5nLWF3cy1jb25maWctYW5kLWF3cy1jbG91ZGZvcm1hdGlvbi1zdGFja3NldHMvXCJcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0Q29uZmlnUmVjb3JkZXJNYW5hZ2VtZW50QWNjb3VudENoZWNrKTtcbiAgICBjb25zdCBjZmF0Q2xvdWRGb3JtYXRpb25FbmFibGVDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJDbG91ZEZvcm1hdGlvbiBTdGFja1NldHMgYWN0aXZhdGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNsb3VkRm9ybWF0aW9uIFN0YWNrU2V0cyBzaG91bGQgYmUgYWN0aXZhdGVkIGluIHRoZSBDbG91ZEZvcm1hdGlvbiBjb25zb2xlLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRPcmdDbG91ZEZvcm1hdGlvbkVuYWJsZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA1LFxuICAgICAgICBsb2U6IDEsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vb3JnYW5pemF0aW9ucy9sYXRlc3QvdXNlcmd1aWRlL3NlcnZpY2VzLXRoYXQtY2FuLWludGVncmF0ZS1jbG91ZGZvcm1hdGlvbi5odG1sI2ludGVncmF0ZS1lbmFibGUtdGEtY2xvdWRmb3JtYXRpb25cIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRDbG91ZEZvcm1hdGlvbkVuYWJsZUNoZWNrKTtcbiAgICBjb25zdCBjZmF0T3JnU2VydmljZUd1YXJkRHV0eUNoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIkd1YXJkRHV0eSBPcmdhbml6YXRpb24gc2VydmljZSBlbmFibGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkd1YXJkRHV0eSBPcmdhbml6YXRpb24gc2VydmljZXMgc2hvdWxkIGJlIGVuYWJsZWQuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdE9yZ1NlcnZpY2VHdWFyZER1dHlFbmFibGVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHdlaWdodDogNCxcbiAgICAgICAgbG9lOiAxXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdE9yZ1NlcnZpY2VHdWFyZER1dHlDaGVjayk7XG4gICAgY29uc3QgY2ZhdE9yZ1NlcnZpY2VSYW1DaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJSQU0gT3JnYW5pemF0aW9uIHNlcnZpY2UgZW5hYmxlZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJSZXNvdXJjZSBBY2Nlc3MgTWFuYWdlciAoUkFNKSB0cnVzdGVkIGFjY2VzcyBzaG91bGQgYmUgZW5hYmxlZCBpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbi5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0T3JnU2VydmljZVJhbUVuYWJsZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA0LFxuICAgICAgICBsb2U6IDFcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0T3JnU2VydmljZVJhbUNoZWNrKTtcbiAgICBjb25zdCBjZmF0T3JnU2VydmljZVNlY3VyaXR5SHViQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiU2VjdXJpdHkgSHViIE9yZ2FuaXphdGlvbiBzZXJ2aWNlIGVuYWJsZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiU2VjdXJpdHkgSHViIHRydXN0ZWQgYWNjZXNzIHNob3VsZCBiZSBlbmFibGVkIGluIHRoZSBBV1MgT3JnYW5pemF0aW9uLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRPcmdTZXJ2aWNlU2VjdXJpdHlIdWJFbmFibGVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHdlaWdodDogNCxcbiAgICAgICAgbG9lOiAxXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdE9yZ1NlcnZpY2VTZWN1cml0eUh1YkNoZWNrKTtcbiAgICBjb25zdCBjZmF0T3JnU2VydmljZUlhbUFjY2Vzc0FuYWx5emVyQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiSUFNIEFjY2VzcyBBbmFseXplciBPcmdhbml6YXRpb24gc2VydmljZSBlbmFibGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIklBTSBBY2Nlc3MgQW5hbHl6ZXIgdHJ1c3RlZCBhY2Nlc3Mgc2hvdWxkIGJlIGVuYWJsZWQgaW4gdGhlIEFXUyBPcmdhbml6YXRpb24uXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdE9yZ1NlcnZpY2VJYW1BY2Nlc3NBbmFseXplckVuYWJsZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA0LFxuICAgICAgICBsb2U6IDFcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0T3JnU2VydmljZUlhbUFjY2Vzc0FuYWx5emVyQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRPcmdTZXJ2aWNlQ29uZmlnQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ29uZmlnIE9yZ2FuaXphdGlvbiBzZXJ2aWNlIGVuYWJsZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQVdTIENvbmZpZyB0cnVzdGVkIGFjY2VzcyBzaG91bGQgYmUgZW5hYmxlZCBpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbi5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0T3JnU2VydmljZUF3c0NvbmZpZ0VuYWJsZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA0LFxuICAgICAgICBsb2U6IDFcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0T3JnU2VydmljZUNvbmZpZ0NoZWNrKTtcbiAgICBjb25zdCBjZmF0T3JnU2VydmljZUNsb3VkRm9ybWF0aW9uQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ2xvdWRGb3JtYXRpb24gT3JnYW5pemF0aW9uIHNlcnZpY2UgZW5hYmxlZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDbG91ZEZvcm1hdGlvbiB0cnVzdGVkIGFjY2VzcyBzaG91bGQgYmUgZW5hYmxlZCBpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbi5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0QmFja3VwUG9saWNpZXNFbmFibGVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIHdlaWdodDogNSxcbiAgICAgICAgbG9lOiAxLFxuICAgICAgICByZW1lZGlhdGlvbkxpbms6IFwiaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FXU0Nsb3VkRm9ybWF0aW9uL2xhdGVzdC9Vc2VyR3VpZGUvc3RhY2tzZXRzLW9yZ3MtYWN0aXZhdGUtdHJ1c3RlZC1hY2Nlc3MuaHRtbFwiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdE9yZ1NlcnZpY2VDbG91ZEZvcm1hdGlvbkNoZWNrKTtcbiAgICBjb25zdCBjZmF0SW5mcmFPdUNoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIlRvcC1sZXZlbCBJbmZyYXN0cnVjdHVyZSBPVSBkZXBsb3llZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJUb3AtbGV2ZWwgSW5mcmFzdHJ1Y3R1cmUgT1Ugc2hvdWxkIGV4aXN0LlwiLFxuICAgICAgICBzdGF0dXM6IGluZnJhc3RydWN0dXJlRm91bmQgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB3ZWlnaHQ6IDUsXG4gICAgICAgIGxvZTogMixcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vY2F0YWxvZy53b3Jrc2hvcHMuYXdzL2NvbnRyb2wtdG93ZXIvZW4tVVMvaW50cm9kdWN0aW9uL21hbmFnZS1vdVwiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdEluZnJhT3VDaGVjayk7XG4gICAgY29uc3QgY2ZhdFNlY3VyaXR5T3VDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJUb3AtbGV2ZWwgU2VjdXJpdHkgT1UgZGVwbG95ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVG9wLWxldmVsIFNlY3VyaXR5IE9VIHNob3VsZCBleGlzdC5cIixcbiAgICAgICAgc3RhdHVzOiBzZWN1cml0eUZvdW5kID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMixcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vY2F0YWxvZy53b3Jrc2hvcHMuYXdzL2NvbnRyb2wtdG93ZXIvZW4tVVMvaW50cm9kdWN0aW9uL21hbmFnZS1vdVwiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdFNlY3VyaXR5T3VDaGVjayk7XG4gICAgY29uc3QgY2ZhdFdvcmtsb2FkT3VDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJUb3AtbGV2ZWwgV29ya2xvYWRzIE9VIGRlcGxveWVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlRvcC1sZXZlbCBXb3JrbG9hZHMgT1Ugc2hvdWxkIGV4aXN0LlwiLFxuICAgICAgICBzdGF0dXM6IHdvcmtsb2Fkc0ZvdW5kID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA1LFxuICAgICAgICBsb2U6IDIsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2NhdGFsb2cud29ya3Nob3BzLmF3cy9jb250cm9sLXRvd2VyL2VuLVVTL2ludHJvZHVjdGlvbi9tYW5hZ2Utb3VcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRXb3JrbG9hZE91Q2hlY2spO1xuICAgIGNvbnN0IGNmYXRJYW1JZENPcmdTZXJ2aWNlQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiSUFNIElkQyBPcmdhbml6YXRpb24gc2VydmljZSBlbmFibGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIklBTSBJZGVudGl0eSBDZW50ZXIgdHJ1c3RlZCBhY2Nlc3Mgc2hvdWxkIGJlIGVuYWJsZWQgaW4gdGhlIEFXUyBPcmdhbml6YXRpb25cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0SWFtSWRQT3JnU2VydmljZVBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHdlaWdodDogNixcbiAgICAgICAgbG9lOiAxLFxuICAgICAgICByZW1lZGlhdGlvbkxpbms6IFwiaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL3NpbmdsZXNpZ25vbi9sYXRlc3QvdXNlcmd1aWRlL2dldC1zZXQtdXAtZm9yLWlkYy5odG1sXCJcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0SWFtSWRDT3JnU2VydmljZUNoZWNrKTtcbiAgICBjb25zdCBjZmF0SWFtSWRjQ29uZmlndXJlZENoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIklBTSBJZEMgY29uZmlndXJlZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJJQU0gSWRlbnRpdHkgQ2VudGVyIHNob3VsZCBiZSBjb25maWd1cmVkLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRJYW1JZGNDb25maWd1cmVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgd2VpZ2h0OiA2LFxuICAgICAgICBsb2U6IDMsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vc2luZ2xlc2lnbm9uL2xhdGVzdC91c2VyZ3VpZGUvdHV0b3JpYWxzLmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRJYW1JZGNDb25maWd1cmVkQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRPcmdQb2xpY3lTY3BFbmFibGVkID0ge1xuICAgICAgICB0YXNrOiBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY2llcyBFbmFibGVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3kgc2hvdWxkIGJlIGVuYWJsZWQgd2l0aGluIHRoZSBBV1MgT3JnYW5pemF0aW9uLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRTY3BFbmFibGVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgd2VpZ2h0OiA2LFxuICAgICAgICBsb2U6IDEsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vb3JnYW5pemF0aW9ucy9sYXRlc3QvdXNlcmd1aWRlL29yZ3NfbWFuYWdlX3BvbGljaWVzX2VuYWJsZS1kaXNhYmxlLmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRPcmdQb2xpY3lTY3BFbmFibGVkKTtcbiAgICBjb25zdCBjZmF0T3JnUG9saWN5VGFnUG9saWN5Q2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiT3JnYW5pemF0aW9uIFRhZyBQb2xpY3kgRW5hYmxlZFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJUYWcgUG9saWN5IHNob3VsZCBiZSBlbmFibGVkIHdpdGhpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbi5cIixcbiAgICAgICAgc3RhdHVzOiBjZmF0VGFnUG9saWNpZXNFbmFibGVkUGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgd2VpZ2h0OiA2LFxuICAgICAgICBsb2U6IDEsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vb3JnYW5pemF0aW9ucy9sYXRlc3QvdXNlcmd1aWRlL29yZ3NfbWFuYWdlX3BvbGljaWVzX2VuYWJsZS1kaXNhYmxlLmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRPcmdQb2xpY3lUYWdQb2xpY3lDaGVjayk7XG4gICAgY29uc3QgY2ZhdEJhY2t1cFBvbGljaWVzRW5hYmxlZENoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIk9yZ2FuaXphdGlvbiBCYWNrdXAgUG9saWN5IEVuYWJsZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQmFja3VwIFBvbGljeSBzaG91bGQgYmUgZW5hYmxlZCB3aXRoaW4gdGhlIEFXUyBPcmdhbml6YXRpb24uXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdEJhY2t1cFBvbGljaWVzRW5hYmxlZFBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB3ZWlnaHQ6IDUsXG4gICAgICAgIGxvZTogMSxcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9vcmdhbml6YXRpb25zL2xhdGVzdC91c2VyZ3VpZGUvb3Jnc19tYW5hZ2VfcG9saWNpZXNfZW5hYmxlLWRpc2FibGUuaHRtbFwiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdEJhY2t1cFBvbGljaWVzRW5hYmxlZENoZWNrKTtcbiAgICBjb25zdCBjZmF0Q29udHJvbFRvd2VyRGVwbG95ZWRDaGVjayA9IHtcbiAgICAgICAgdGFzazogXCJDb250cm9sIFRvd2VyIERlcGxveWVkXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbnRyb2wgVG93ZXIgc2hvdWxkIGJlIGRlcGxveWVkLlwiLFxuICAgICAgICBzdGF0dXM6IGNmYXRDb250cm9sVG93ZXJEZXBsb3llZFBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHdlaWdodDogNixcbiAgICAgICAgbG9lOiA2LFxuICAgICAgICByZW1lZGlhdGlvbkxpbms6IFwiaHR0cHM6Ly9jYXRhbG9nLndvcmtzaG9wcy5hd3MvY29udHJvbC10b3dlci9lbi1VUy9wcmVyZXF1aXNpdGVzL2RlcGxveWluZ1wiXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdENvbnRyb2xUb3dlckRlcGxveWVkQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRDb250cm9sVG93ZXJMYXRlc3RWZXJzaW9uQ2hlY2sgPSB7XG4gICAgICAgIHRhc2s6IFwiQ29udHJvbCBUb3dlciBMYXRlc3QgVmVyc2lvblwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJDb250cm9sIFRvd2VyIHNob3VsZCBiZSB0aGUgbGF0ZXN0IHZlcnNpb24uXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdENvbnRyb2xUb3dlckxhdGVzdFZlcnNpb25QYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgd2VpZ2h0OiA1LFxuICAgICAgICBsb2U6IDIsXG4gICAgICAgIHJlbWVkaWF0aW9uTGluazogXCJodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vY29udHJvbHRvd2VyL2xhdGVzdC91c2VyZ3VpZGUvdXBkYXRlLWNvbnRyb2x0b3dlci5odG1sXCJcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0Q29udHJvbFRvd2VyTGF0ZXN0VmVyc2lvbkNoZWNrKTtcbiAgICBjb25zdCBjZmF0Q29udHJvbFRvd2VyTm90RHJpZnRlZENoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIkNvbnRyb2wgVG93ZXIgbm90IGRyaWZ0ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQ29udHJvbCBUb3dlciBzaG91bGQgbm90IGJlIGRyaWZ0ZWQuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdENvbnRyb2xUb3dlck5vdERyaWZ0ZWRQYXNzID8gXCJjb21wbGV0ZVwiIDogXCJpbmNvbXBsZXRlXCIsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICB3ZWlnaHQ6IDYsXG4gICAgICAgIGxvZTogMixcbiAgICAgICAgcmVtZWRpYXRpb25MaW5rOiBcImh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9jb250cm9sdG93ZXIvbGF0ZXN0L3VzZXJndWlkZS9yZXNvbHZlLWRyaWZ0Lmh0bWxcIlxuICAgIH07XG4gICAgQ2ZhdENoZWNrcy5wdXNoKGNmYXRDb250cm9sVG93ZXJOb3REcmlmdGVkQ2hlY2spO1xuICAgIGNvbnN0IGNmYXRMb2dBcmNoaXZlQWNjb3VudENoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIkxvZyBBcmNoaXZlIGFjY291bnQgZGVwbG95ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiTG9nIEFyY2hpdmUgQWNjb3VudCBzaG91bGQgZXhpc3QuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdExvZ0FyY2hpdmVBY2NvdW50UGFzcyA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwiLFxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgd2VpZ2h0OiA2LFxuICAgICAgICBsb2U6IDJcbiAgICB9O1xuICAgIENmYXRDaGVja3MucHVzaChjZmF0TG9nQXJjaGl2ZUFjY291bnRDaGVjayk7XG4gICAgY29uc3QgY2ZhdEF1ZGl0QWNjb3VudENoZWNrID0ge1xuICAgICAgICB0YXNrOiBcIkF1ZGl0IGFjY291bnQgZGVwbG95ZWRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQXVkaXQgYWNjb3VudCBzaG91bGQgZXhpc3QuXCIsXG4gICAgICAgIHN0YXR1czogY2ZhdEF1ZGl0QWNjb3VudFBhc3MgPyBcImNvbXBsZXRlXCIgOiBcImluY29tcGxldGVcIixcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHdlaWdodDogNixcbiAgICAgICAgbG9lOiAyXG4gICAgfTtcbiAgICBDZmF0Q2hlY2tzLnB1c2goY2ZhdEF1ZGl0QWNjb3VudENoZWNrKTtcbiAgICByZXBvcnQuY2ZhdENoZWNrcyA9IENmYXRDaGVja3M7XG4gICAgY29uc29sZS50YWJsZShDZmF0Q2hlY2tzLCBbXCJ0YXNrXCIsIFwic3RhdHVzXCIsIFwicmVxdWlyZWRcIiwgXCJsb2VcIl0pO1xuICAgIGNvbnN0IHJlcG9ydEZpbGUgPSBcIi4vY2ZhdC50eHRcIjtcbiAgICBjb25zb2xlLmxvZyhgY29tcGlsaW5nIHJlcG9ydC4uLmApO1xuICAgIGNvbnN0IGFzc2Vzc21lbnQgPSBhd2FpdCBjcmVhdGVSZXBvcnQocmVwb3J0KTtcbiAgICBjb25zb2xlLmxvZyhgc2F2aW5nIHJlcG9ydCB0byAuL2NmYXQvY2ZhdC50eHQuLi5gKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBhc3Nlc3NtZW50KTtcbiAgICBjb25zb2xlLmxvZyhgY2xvdWQgZm91bmRhdGlvbiBhc3Nlc3NtZW50IGNvbXBsZXRlLiBBY2Nlc3MgeW91ciByZXBvcnQgYXQgLi9jZmF0L2NmYXQudHh0YCk7XG59O1xubWFpbigpO1xuIiwiaW1wb3J0IHsgRUMyQ2xpZW50LCBEZXNjcmliZVJlZ2lvbnNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEFsbFJlZ2lvbnMoKSB7XG4gICAgLy8gZ3JhYmJpbmcgYWxsIHJlZ2lvbnMgZnJvbSB1cy1lYXN0LTFcbiAgICBjb25zdCBlYzJDbGllbnQgPSBuZXcgRUMyQ2xpZW50KHsgcmVnaW9uOiBcInVzLWVhc3QtMVwiIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaWJlUmVnaW9uc0NvbW1hbmQgPSBuZXcgRGVzY3JpYmVSZWdpb25zQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoZGVzY3JpYmVSZWdpb25zQ29tbWFuZCk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVzcG9uc2UuUmVnaW9ucyB8fCBbXSkge1xuICAgICAgICAgICAgcmVnaW9ucy5wdXNoKHJlZ2lvbi5SZWdpb25OYW1lIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWdpb25zO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgcmVnaW9uczpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBlYzJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldEFsbFJlZ2lvbnM7XG4iLCJpbXBvcnQgeyBTVFNDbGllbnQsIEdldENhbGxlcklkZW50aXR5Q29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc3RzXCI7XG5pbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQsIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SWQocmVnaW9uKSB7XG4gICAgY29uc3Qgc3RzQ2xpZW50ID0gbmV3IFNUU0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQgPSBuZXcgR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgQWNjb3VudCA9IGF3YWl0IHN0c0NsaWVudC5zZW5kKGdldENhbGxlcklkZW50aXR5Q29tbWFuZCk7XG4gICAgICAgIHJldHVybiBBY2NvdW50LkFjY291bnQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBhY2NvdW50IElEOlwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbjtcbi8vIGZ1bmN0aW9uIGNoZWNraW5nIGlmIG1hbmFnZW1lbnQgYWNjb3VudCwgbWVtYmVyIGFjY291bnQsIG9yIHN0YW5kYWxvbmUgYWNjb3VudFxuZXhwb3J0IGNvbnN0IGRlZmluZUFjY291bnRUeXBlID0gYXN5bmMgKHJlZ2lvbikgPT4ge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbnNDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgaXNJbk9yZ2FuaXphdGlvbiA9IGZhbHNlO1xuICAgIGxldCBpc01hbmFnZW1lbnRBY2NvdW50ID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VycmVudEFjY291bnRJZCA9IGF3YWl0IGdldEFjY291bnRJZChyZWdpb24pO1xuICAgICAgICBpZiAoY3VycmVudEFjY291bnRJZCkge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlID0gYXdhaXQgb3JnYW5pemF0aW9uc0NsaWVudC5zZW5kKGRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCk7XG4gICAgICAgICAgICAvLyB0aGUgYWNjb3VudCBpcyBub3Qgc3RhbmRhbG9uZSBhbmQgcGFydCBvZiBBV1MgT3JnYW5pemF0aW9uXG4gICAgICAgICAgICBpZiAoZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZS5Pcmdhbml6YXRpb24/Lk1hc3RlckFjY291bnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZW1lbnRBY2NvdW50SWQgPSBkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlLk9yZ2FuaXphdGlvbj8uTWFzdGVyQWNjb3VudElkO1xuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50QWNjb3VudElkID09IGN1cnJlbnRBY2NvdW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhbiBvcmdhbml6YXRpb24gYW5kIHRoaXMgaXMgdGhlIG1hbmFnZW1lbnQgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICBpc01hbmFnZW1lbnRBY2NvdW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaXNJbk9yZ2FuaXphdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBhbiBvcmdhbml6YXRpb24sIGJ1dCB0aGlzIGlzbid0IHRoZSBtYW5hZ2VtZW50IGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgaXNJbk9yZ2FuaXphdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgaXNuJ3QgYW4gb3JnYW5pemF0aW9uIGFuZCB0aGlzIGFjY291bnQgaXMgc3RhbmRhbG9uZVxuICAgICAgICAgICAgICAgIGlzSW5Pcmdhbml6YXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdhbml6YXRpb25zQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNJbk9yZ2FuaXphdGlvbiwgaXNNYW5hZ2VtZW50QWNjb3VudCB9O1xufTtcbiIsImltcG9ydCB7IElBTUNsaWVudCwgTGlzdFVzZXJzQ29tbWFuZCwgTGlzdEFjY2Vzc0tleXNDb21tYW5kLCBHZXRBY2Nlc3NLZXlMYXN0VXNlZENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiO1xuLy8gZnVuY3Rpb24gbGlzdCBhbGwgSUFNIHVzZXJzIGFuZCBpZiB0aGV5IGhhdmUga2V5cyBpbiB0aGUgbWFuYWdlbWVudCBhY2NvdW50XG5jb25zdCBjaGVja0lhbVVzZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIFNldCB0byB1cy1lYXN0LTEgYXMgSUFNIGlzIGdsb2JhbCBhbmQgcmVnaW9uIGlzbid0IGEgY29uY2VyblxuICAgIGNvbnN0IGlhbUNsaWVudCA9IG5ldyBJQU1DbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIGNvbnN0IGlhbVVzZXJJbmZvID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbGlzdFVzZXJzQ29tbWFuZCA9IG5ldyBMaXN0VXNlcnNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgbGlzdFVzZXJzUmVzcG9uc2UgPSBhd2FpdCBpYW1DbGllbnQuc2VuZChsaXN0VXNlcnNDb21tYW5kKTtcbiAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIGxpc3RVc2Vyc1Jlc3BvbnNlLlVzZXJzIHx8IFtdKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyTmFtZSA9IHVzZXIuVXNlck5hbWUgfHwgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RBY2Nlc3NLZXlzQ29tbWFuZCA9IG5ldyBMaXN0QWNjZXNzS2V5c0NvbW1hbmQoe1xuICAgICAgICAgICAgICAgIFVzZXJOYW1lOiB1c2VyTmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgbGlzdEFjY2Vzc0tleXNSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGxpc3RBY2Nlc3NLZXlzQ29tbWFuZCk7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NLZXlzID0gbGlzdEFjY2Vzc0tleXNSZXNwb25zZS5BY2Nlc3NLZXlNZXRhZGF0YSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChhY2Nlc3NLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjY2Vzc0tleSBvZiBhY2Nlc3NLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0tleUlkID0gYWNjZXNzS2V5LkFjY2Vzc0tleUlkIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdldExhc3RVc2VkQ29tbWFuZCA9IG5ldyBHZXRBY2Nlc3NLZXlMYXN0VXNlZENvbW1hbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXNzS2V5SWQ6IGFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFVzZWRSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGdldExhc3RVc2VkQ29tbWFuZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kVXNlckluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVzZWQ6IGxhc3RVc2VkUmVzcG9uc2UgJiYgbGFzdFVzZWRSZXNwb25zZS5BY2Nlc3NLZXlMYXN0VXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7bGFzdFVzZWRSZXNwb25zZS5BY2Nlc3NLZXlMYXN0VXNlZC5MYXN0VXNlZERhdGV9YCB8fCBcIk5vdCBhdmFpbGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJOb3QgYXZhaWxhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlhbVVzZXJJbmZvLnB1c2goZm91bmRVc2VySW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRVc2VySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlck5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlhbVVzZXJJbmZvLnB1c2goZm91bmRVc2VySW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWFtQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIGlhbVVzZXJJbmZvO1xufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrSWFtVXNlcnM7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlSW5zdGFuY2VzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZWMyXCI7XG5hc3luYyBmdW5jdGlvbiBjaGVja0VjMkV4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGVjMlZhbGlkYXRpb24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGVjMkNsaWVudCA9IG5ldyBFQzJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuUmVzZXJ2YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlJlc2VydmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYFdBUk5JTkc6IEluc3RhbmNlKHMpIGV4aXN0cyBpbiByZWdpb246ICR7cmVnaW9ufWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlYzJGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWMyRm91bmQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYzJGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlYzJGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgIGVjMkZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjaGVja2luZyBpbnN0YW5jZTogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGVjMkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9IC8vIGVuZCBmb3JcbiAgICByZXR1cm4gZWMyVmFsaWRhdGlvbjtcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrRWMyRXhpc3RzO1xuIiwiaW1wb3J0IHsgRUMyQ2xpZW50LCBEZXNjcmliZVZwY3NDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrVnBjRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgdnBjVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgZWMyQ2xpZW50ID0gbmV3IEVDMkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZVZwY3NDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuVnBjcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5WcGNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHZwY0ZvdW5kOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2cGNGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdnBjRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdnBjRm91bmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICB2cGNGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZwY1ZhbGlkYXRpb24ucHVzaCh2cGNGb3VuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBlYzJDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfSAvLyBlbmQgZm9yXG4gICAgcmV0dXJuIHZwY1ZhbGlkYXRpb247XG59XG47XG5leHBvcnQgZGVmYXVsdCBjaGVja1ZwY0V4aXN0cztcbiIsImltcG9ydCB7IENsb3VkVHJhaWxDbGllbnQsIERlc2NyaWJlVHJhaWxzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsJztcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQ2xvdWRUcmFpbEV4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGNsb3VkVHJhaWxWYWxpZGF0aW9uID0gW107XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgICAgICBjb25zdCBjbG91ZFRyYWlsQ2xpZW50ID0gbmV3IENsb3VkVHJhaWxDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGNvbnN0IGNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQgPSBuZXcgRGVzY3JpYmVUcmFpbHNDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNsb3VkVHJhaWxSZXNwb25zZSA9IGF3YWl0IGNsb3VkVHJhaWxDbGllbnQuc2VuZChjbG91ZFRyYWlsRGVzY3JpYmVDb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChjbG91ZFRyYWlsUmVzcG9uc2UudHJhaWxMaXN0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmFpbCBvZiBjbG91ZFRyYWlsUmVzcG9uc2UudHJhaWxMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFpbEluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYWlsLkhvbWVSZWdpb24gPT0gcmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGB0cmFpbCBmb3VuZCBpbiAke3JlZ2lvbn1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsRm91bmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcmdUcmFpbDogdHJhaWwuSXNNdWx0aVJlZ2lvblRyYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXVsdGlSZWdpb246IHRyYWlsLklzTXVsdGlSZWdpb25UcmFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjbG91ZFRyYWlsVmFsaWRhdGlvbi5wdXNoKHRyYWlsSW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGNoZWNraW5nIGluc3RhbmNlOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY2xvdWRUcmFpbENsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9IC8vIGVuZCBmb3IgcmVnaW9uc1xuICAgIHJldHVybiBjbG91ZFRyYWlsVmFsaWRhdGlvbjtcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrQ2xvdWRUcmFpbEV4aXN0cztcbiIsImltcG9ydCB7IENvbmZpZ1NlcnZpY2VDbGllbnQsIERlc2NyaWJlQ29uZmlndXJhdGlvblJlY29yZGVyU3RhdHVzQ29tbWFuZCwgRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1jb25maWctc2VydmljZSc7XG5hc3luYyBmdW5jdGlvbiBjaGVja0NvbmZpZ0V4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGNvbmZpZ0RldGFpbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ1NlcnZpY2VDbGllbnQgPSBuZXcgQ29uZmlnU2VydmljZUNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgbGV0IGNvbmZpZ0RldGFpbCA9IHtcbiAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgY29uZmlnUmVjb3JkZXJGb3VuZDogZmFsc2UsXG4gICAgICAgICAgICBjb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIENvbmZpZyByZWNvcmRlciBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZGVyUmVzcG9uc2UgPSBhd2FpdCBjb25maWdTZXJ2aWNlQ2xpZW50LnNlbmQobmV3IERlc2NyaWJlQ29uZmlndXJhdGlvblJlY29yZGVyU3RhdHVzQ29tbWFuZCh7fSkpO1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkZXJFeGlzdHMgPSByZWNvcmRlclJlc3BvbnNlLkNvbmZpZ3VyYXRpb25SZWNvcmRlcnNTdGF0dXM/Lmxlbmd0aCAhPT0gMDtcbiAgICAgICAgICAgIGlmIChyZWNvcmRlckV4aXN0cykge1xuICAgICAgICAgICAgICAgIGNvbmZpZ0RldGFpbC5jb25maWdSZWNvcmRlckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIENvbmZpZyBkZWxpdmVyeSBjaGFubmVsIGV4aXN0c1xuICAgICAgICAgICAgY29uc3QgY2hhbm5lbFJlc3BvbnNlID0gYXdhaXQgY29uZmlnU2VydmljZUNsaWVudC5zZW5kKG5ldyBEZXNjcmliZURlbGl2ZXJ5Q2hhbm5lbHNDb21tYW5kKHt9KSk7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsRXhpc3RzID0gY2hhbm5lbFJlc3BvbnNlLkRlbGl2ZXJ5Q2hhbm5lbHM/Lmxlbmd0aCAhPT0gMDtcbiAgICAgICAgICAgIGlmIChjaGFubmVsRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnRGV0YWlsLmNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZ0RldGFpbHMucHVzaChjb25maWdEZXRhaWwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2hlY2tpbmcgQVdTIENvbmZpZyBpbiAke3JlZ2lvbn06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgY29uZmlnU2VydmljZUNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbmZpZ0RldGFpbHM7XG59XG5leHBvcnQgZGVmYXVsdCBjaGVja0NvbmZpZ0V4aXN0cztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCwgTGlzdFJvb3RzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnRGV0YWlscyhyZWdpb24pIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgb3JnRGV0YWlscyA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZ0Rlc2NyaWJlQ29tbWFuZCA9IG5ldyBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCBvcmdEYXRhID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQob3JnRGVzY3JpYmVDb21tYW5kKTtcbiAgICAgICAgaWYgKG9yZ0RhdGEuT3JnYW5pemF0aW9uKSB7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLmlkID0gb3JnRGF0YS5Pcmdhbml6YXRpb24uSWQgPz8gXCJcIjtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBPcmdhbml6YXRpb24gSUQ6ICR7b3JnRGV0YWlscy5pZH1gICk7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLmFybiA9IG9yZ0RhdGEuT3JnYW5pemF0aW9uLkFybiA/PyBcIlwiO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE9yZ2FuaXphdGlvbiBBUk46ICR7b3JnRGV0YWlscy5hcm59YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0Um9vdHNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3Qgcm9vdHMgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJvb3RzLlJvb3RzKSB7XG4gICAgICAgICAgICBvcmdEZXRhaWxzLnJvb3RPdUlkID0gcm9vdHMuUm9vdHNbMF0uSWQ7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQVdTIE9yZyByb290IG91IGlkOiAke29yZ0RldGFpbHMucm9vdE91SWR9YClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBpbmZvIGZvdW5kIGZvciB5b3VyIEFXUyBPcmdhbml6YXRpb24uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIG9yZ0RldGFpbHM7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnRGV0YWlscztcbiIsImltcG9ydCB7IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQsIERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiO1xuY29uc3QgY2hlY2tMZWdhY3lDdXIgPSBhc3luYyAocmVnaW9uKSA9PiB7XG4gICAgLy8gU2V0IHVwIEFXUyBTREsgY2xpZW50IGZvciBDb3N0IEV4cGxvcmVyXG4gICAgY29uc3QgY3VyQ2xpZW50ID0gbmV3IENvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBDb3N0IEV4cGxvcmVyIGlzIHNldCB1cFxuICAgICAgICBjb25zdCBpbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kKGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjdXJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zICYmIHJlc3BvbnNlLlJlcG9ydERlZmluaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGlzTGVnYWN5Q3VyU2V0dXAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBlcnJvciBpcyByZWxhdGVkIHRvIENvc3QgRXhwbG9yZXIgc2V0dXBcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgIGlzTGVnYWN5Q3VyU2V0dXAgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHsgaXNMZWdhY3lDdXJTZXR1cCB9O1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIEFXUyBTREsgY2xpZW50XG4gICAgICAgIGN1ckNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrTGVnYWN5Q3VyO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdFJvb3RzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzKHJlZ2lvbikge1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBwb2xpY3lUeXBlc0VuYWJsZWQgPSB7XG4gICAgICAgIHNjcEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB0YWdQb2xpY3lFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgYmFja3VwUG9saWN5RW5hYmxlZDogZmFsc2VcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0ge307XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdFJvb3RzQ29tbWFuZChpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJvb3RzID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyb290cy5Sb290cykge1xuICAgICAgICAgICAgaWYgKHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbmFibGVkUG9saWN5IG9mIHJvb3RzLlJvb3RzWzBdLlBvbGljeVR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1NFUlZJQ0VfQ09OVFJPTF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnNjcEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ1RBR19QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLnRhZ1BvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkUG9saWN5LlR5cGUgPT0gJ0JBQ0tVUF9QT0xJQ1knICYmIGVuYWJsZWRQb2xpY3kuU3RhdHVzID09ICdFTkFCTEVEJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5VHlwZXNFbmFibGVkLmJhY2t1cFBvbGljeUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAvLyBlbmQgZm9yXG4gICAgICAgICAgICB9IC8vIGVuZCBpZlxuICAgICAgICB9IC8vIGVuZCBpZlxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gcG9saWN5VHlwZXNFbmFibGVkO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldEVuYWJsZWRPcmdQb2xpY3lUeXBlcztcbiIsImltcG9ydCB7IE9yZ2FuaXphdGlvbnNDbGllbnQsIExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RW5hYmxlZE9yZ1NlcnZpY2VzKHJlZ2lvbikge1xuICAgIGNvbnN0IGRpc2NvdmVyZWRPcmdTZXJ2aWNlcyA9IFtdO1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kID0gbmV3IExpc3RBV1NTZXJ2aWNlQWNjZXNzRm9yT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKG9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kKTtcbiAgICAgICAgaWYgKG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMgJiYgb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcmdTZXJ2aWNlIG9mIG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZE9yZ1NlcnZpY2UgPSB7IHNlcnZpY2U6IG9yZ1NlcnZpY2UuU2VydmljZVByaW5jaXBhbCA/PyBcIlwiIH07XG4gICAgICAgICAgICAgICAgZGlzY292ZXJlZE9yZ1NlcnZpY2VzLnB1c2goZm91bmRPcmdTZXJ2aWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2VydmljZSBhY2Nlc3M6JywgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgcmV0dXJuIGRpc2NvdmVyZWRPcmdTZXJ2aWNlcztcbiAgICB9XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRFbmFibGVkT3JnU2VydmljZXM7XG4iLCJpbXBvcnQgeyBDbG91ZEZvcm1hdGlvbkNsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25zQWNjZXNzQ29tbWFuZCwgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdDbG91ZEZvcm1hdGlvbihyZWdpb24pIHtcbiAgICBsZXQgb3JnQ2ZuU3RhdHVzID0ge1xuICAgICAgICBzdGF0dXM6IFwiZGlzYWJsZWRcIlxuICAgIH07XG4gICAgY29uc3QgY2xvdWRGb3JtYXRpb25DbGllbnQgPSBuZXcgQ2xvdWRGb3JtYXRpb25DbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCA9IHt9O1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uc0FjY2Vzc0NvbW1hbmQoZGVzY3JpYmVPcmdBY2Nlc3NJbnB1dCk7XG4gICAgICAgIGNvbnN0IGNsb3VkRm9ybWF0aW9uT3JnQWNjZXNzID0gYXdhaXQgY2xvdWRGb3JtYXRpb25DbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkNsb3VkRm9ybWF0aW9uIGFjdGl2YXRpb24gc3RhdHVzOiBcIiwgY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzKVxuICAgICAgICBvcmdDZm5TdGF0dXMuc3RhdHVzID0gY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MuU3RhdHVzID8/IFwiZGlzYWJsZWRcIjtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgLy90aHJvdyBuZXcgRXJyb3IoYEVycm9yOiAke2Vycm9yfWApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgY2xvdWRGb3JtYXRpb25DbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gb3JnQ2ZuU3RhdHVzO1xuICAgIH1cbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0Nsb3VkRm9ybWF0aW9uO1xuIiwiaW1wb3J0IHsgQ29udHJvbFRvd2VyQ2xpZW50LCBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCwgR2V0TGFuZGluZ1pvbmVDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb250cm9sdG93ZXJcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldENvbnRyb2xUb3dlcihyZWdpb24pIHtcbiAgICBsZXQgY29udHJvbFRvd2VySW5mbyA9IHt9O1xuICAgIGNvbnN0IGNvbnRyb2xUb3dlckNsaWVudCA9IG5ldyBDb250cm9sVG93ZXJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0TGFuZGluZ1pvbmVzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29udHJvbFRvd2VyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5sYW5kaW5nWm9uZXMgJiYgcmVzcG9uc2UubGFuZGluZ1pvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICAgICAgICAgIGxhbmRpbmdab25lSWRlbnRpZmllcjogcmVzcG9uc2UubGFuZGluZ1pvbmVzWzBdLmFybixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBselJlZ2lvbiA9IHJlc3BvbnNlLmxhbmRpbmdab25lc1swXS5hcm4/LnRvU3RyaW5nKCkuc3BsaXQoJzonKVszXSA/PyBcIlwiO1xuICAgICAgICAgICAgaWYgKGx6UmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5jb250cm9sVG93ZXJSZWdpb24gPSBselJlZ2lvbjtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sVG93ZXJDbGllbnRSZWdpb24gPSBuZXcgQ29udHJvbFRvd2VyQ2xpZW50KHsgcmVnaW9uOiBselJlZ2lvbiB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldExhbmRpbmdab25lQ29tbWFuZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbHpSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbi5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIGlmIChselJlc3BvbnNlLmxhbmRpbmdab25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uc3RhdHVzID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8ubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5kZXBsb3llZFZlcnNpb24gPSBselJlc3BvbnNlLmxhbmRpbmdab25lLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xUb3dlckluZm8uZHJpZnRTdGF0dXMgPSBselJlc3BvbnNlLmxhbmRpbmdab25lLmRyaWZ0U3RhdHVzPy5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBDb250cm9sIFRvd2VyIGluICR7cmVnaW9ufTpgLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjb250cm9sVG93ZXJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbFRvd2VySW5mbztcbn1cbmV4cG9ydCBkZWZhdWx0IGdldENvbnRyb2xUb3dlcjtcbiIsImltcG9ydCB7IFNTT0FkbWluQ2xpZW50LCBMaXN0SW5zdGFuY2VzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRJZGNJbmZvKHJlZ2lvbkxpc3QpIHtcbiAgICBsZXQgaWRjRGV0YWlscyA9IHsgZm91bmQ6IGZhbHNlIH07XG4gICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9uTGlzdCkge1xuICAgICAgICBjb25zdCBzc29BZG1pbkNsaWVudCA9IG5ldyBTU09BZG1pbkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNzb0lucHV0ID0ge1xuICAgICAgICAgICAgICAgIE1heFJlc3VsdHM6IE51bWJlcihcIjEwMFwiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdEluc3RhbmNlc0NvbW1hbmQoc3NvSW5wdXQpO1xuICAgICAgICAgICAgY29uc3Qgc3NvSW5zdGFuY2VSZXNwb25zZSA9IGF3YWl0IHNzb0FkbWluQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMgJiYgc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNzb0luc3RhbmNlID0gc3NvSW5zdGFuY2VSZXNwb25zZS5JbnN0YW5jZXNbMF07XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5yZWdpb24gPSByZWdpb247XG4gICAgICAgICAgICAgICAgaWRjRGV0YWlscy5hcm4gPSBzc29JbnN0YW5jZS5JbnN0YW5jZUFybjtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLmlkID0gc3NvSW5zdGFuY2UuSWRlbnRpdHlTdG9yZUlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGxvb2tpbmcgZm9yIEFXUyBJZGVudGl0eSBDZW50ZXIgZGV0YWlscyBpbiByZWdpb24gJHtyZWdpb259YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzc29BZG1pbkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGlkY0RldGFpbHM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRJZGNJbmZvO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCwgTGlzdERlbGVnYXRlZFNlcnZpY2VzRm9yQWNjb3VudENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ0RhQWNjb3VudHMoKSB7XG4gICAgbGV0IG9yZ0RhRGV0YWlscyA9IFtdO1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uOiAndXMtZWFzdC0xJyB9KTtcbiAgICBsZXQgb3JnRGFEZXRhaWwgPSB7fTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3REZWxlZ2F0ZWRBZG1pbmlzdHJhdG9yc0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocmVzcG9uc2UuRGVsZWdhdGVkQWRtaW5pc3RyYXRvcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGEgb2YgcmVzcG9uc2UuRGVsZWdhdGVkQWRtaW5pc3RyYXRvcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IHsgQWNjb3VudElkOiBkYS5JZCB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdERlbGVnYXRlZFNlcnZpY2VzRm9yQWNjb3VudENvbW1hbmQoaW5wdXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50UmVzcG9uc2UuRGVsZWdhdGVkU2VydmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JnRGFEZXRhaWwgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlczogYWNjb3VudFJlc3BvbnNlLkRlbGVnYXRlZFNlcnZpY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU6IGRhLk5hbWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgb3JnRGFEZXRhaWxzLnB1c2gob3JnRGFEZXRhaWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGxvb2tpbmcgZm9yIGRlbGVnYXRlZCBzZXJ2aWNlcy5gKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBvcmdEYURldGFpbHM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdEYUFjY291bnRzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdEFjY291bnRzQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zJztcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ01lbWJlckFjY291bnRzKCkge1xuICAgIGxldCBvcmdNZW1iZXJBY2NvdW50SW5mbyA9IFtdO1xuICAgIGNvbnN0IG9yZ3NDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbjogJ3VzLWVhc3QtMScgfSk7XG4gICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIE1heFJlc3VsdHM6IE51bWJlcihcIjIwMFwiKSxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IG9yZ3NDbGllbnQuc2VuZChuZXcgTGlzdEFjY291bnRzQ29tbWFuZCh7fSkpO1xuICAgICAgICBpZiAocmVzcG9uc2UuQWNjb3VudHMgJiYgcmVzcG9uc2UuQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIHJlc3BvbnNlLkFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9yZ01lbWJlckFjY291bnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lOiBhY2NvdW50Lk5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGFjY291bnRFbWFpbDogYWNjb3VudC5FbWFpbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG9yZ01lbWJlckFjY291bnRJbmZvLnB1c2gob3JnTWVtYmVyQWNjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLk5leHRUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IG9yZ3NDbGllbnQuc2VuZChuZXcgTGlzdEFjY291bnRzQ29tbWFuZCh7IE5leHRUb2tlbjogcmVzcG9uc2UuTmV4dFRva2VuIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLkFjY291bnRzICYmIHJlc3BvbnNlLkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiByZXNwb25zZS5BY2NvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcmdNZW1iZXJBY2NvdW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZTogYWNjb3VudC5OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50RW1haWw6IGFjY291bnQuRW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdNZW1iZXJBY2NvdW50SW5mby5wdXNoKG9yZ01lbWJlckFjY291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAocmVzcG9uc2UuTmV4dFRva2VuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbGlzdGluZyBBV1MgYWNjb3VudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3Jnc0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBvcmdNZW1iZXJBY2NvdW50SW5mbztcbn1cbmV4cG9ydCBkZWZhdWx0IGdldE9yZ01lbWJlckFjY291bnRzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdE9yZ2FuaXphdGlvbmFsVW5pdHNGb3JQYXJlbnRDb21tYW5kLCBMaXN0QWNjb3VudHNGb3JQYXJlbnRDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdUb3BMZXZlbE91cyhyZWdpb24sIHJvb3RPdUlkKSB7XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IHRvcExldmVsT3VzID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbGlzdE9Vc0NvbW1hbmQgPSBuZXcgTGlzdE9yZ2FuaXphdGlvbmFsVW5pdHNGb3JQYXJlbnRDb21tYW5kKHtcbiAgICAgICAgICAgIFBhcmVudElkOiByb290T3VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxpc3RPVXNSZXNwb25zZSA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGxpc3RPVXNDb21tYW5kKTtcbiAgICAgICAgaWYgKGxpc3RPVXNSZXNwb25zZS5Pcmdhbml6YXRpb25hbFVuaXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG91IG9mIGxpc3RPVXNSZXNwb25zZS5Pcmdhbml6YXRpb25hbFVuaXRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcExldmVsT3UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBvdS5JZCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogb3UuTmFtZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudFJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQobmV3IExpc3RBY2NvdW50c0ZvclBhcmVudENvbW1hbmQoeyBQYXJlbnRJZDogb3UuSWQgfSkpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50UmVzcG9uc2UuQWNjb3VudHMgJiYgYWNjb3VudFJlc3BvbnNlLkFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wTGV2ZWxPdS5hY2NvdW50cyA9IGFjY291bnRSZXNwb25zZS5BY2NvdW50cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG9wTGV2ZWxPdXMucHVzaCh0b3BMZXZlbE91KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgc2VydmljZSBhY2Nlc3M6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZXR1cm4gdG9wTGV2ZWxPdXM7XG59XG47XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdUb3BMZXZlbE91cztcbiJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiYXN5bmMiLCJkZXBsb3lPdVRhc2siLCJ0YXNrTnVtYmVyIiwid2F5cG9pbnQiLCJPdU5hbWUiLCJyZW1vdmVJYW1Vc2VyVGFzayIsIklhbVVzZXJOYW1lIiwicmVtb3ZlSWFtVXNlckFwaUtleVRhc2siLCJJYW1Vc2VyQXBpS2V5SWQiLCJkZWxldGVWcGMiLCJyZWdpb24iLCJkZWxldGVFYzIiLCJlbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlIiwic2VydmljZU5hbWUiLCJkZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZSIsImVuYWJsZVBvbGljeVR5cGVUYXNrIiwicG9saWN5VHlwZSIsInRzIiwiVHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiY2h1bmsiLCJlbmMiLCJjYiIsImxvZ2dlciIsIkNvbnNvbGUiLCJzdGRvdXQiLCJyZXBvcnQiLCJDZmF0Q2hlY2tzIiwicHJvY2VzcyIsImVudiIsIkFXU19SRUdJT04iLCJhbGxSZWdpb25zIiwiZWMyQ2xpZW50IiwiRUMyQ2xpZW50IiwiZGVzY3JpYmVSZWdpb25zQ29tbWFuZCIsIkRlc2NyaWJlUmVnaW9uc0NvbW1hbmQiLCJyZXNwb25zZSIsInNlbmQiLCJyZWdpb25zIiwiUmVnaW9ucyIsInB1c2giLCJSZWdpb25OYW1lIiwiZXJyb3IiLCJjb25zb2xlIiwiZGVzdHJveSIsImxvZyIsImFjY291bnRUeXBlIiwib3JnYW5pemF0aW9uc0NsaWVudCIsIk9yZ2FuaXphdGlvbnNDbGllbnQiLCJpc0luT3JnYW5pemF0aW9uIiwiaXNNYW5hZ2VtZW50QWNjb3VudCIsImN1cnJlbnRBY2NvdW50SWQiLCJzdHNDbGllbnQiLCJTVFNDbGllbnQiLCJnZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQiLCJHZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQiLCJBY2NvdW50IiwiZ2V0QWNjb3VudElkIiwiZGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kIiwiRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kIiwiZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZSIsIk9yZ2FuaXphdGlvbiIsIk1hc3RlckFjY291bnRJZCIsIm1hbmFnZW1lbnRBY2NvdW50SWQiLCJkZWZpbmVBY2NvdW50VHlwZSIsInRyYW5zaXRpb25hbEZvdW5kIiwic3VzcGVuZGVkRm91bmQiLCJpbmZyYXN0cnVjdHVyZUZvdW5kIiwid29ya2xvYWRzRm91bmQiLCJzZWN1cml0eUZvdW5kIiwiY2ZhdElhbVVzZXJQYXNzIiwiY2ZhdElhbUlkUE9yZ1NlcnZpY2VQYXNzIiwiY2ZhdElhbUlkY0NvbmZpZ3VyZWRQYXNzIiwiY2ZhdENsb3VkVHJhaWxQYXNzIiwiY2ZhdENsb3VkVHJhaWxPcmdUcmFpbFBhc3MiLCJjZmF0VnBjUGFzcyIsImNmYXRFYzJQYXNzIiwiY2ZhdENvbmZpZ01hbmFnZW1lbnRBY2NvdW50UGFzcyIsImNmYXRDb25maWdSZWNvcmRlck1hbmFnZW1lbnRBY2NvdW50UGFzcyIsImNmYXRDbG91ZFRyYWlsT3JnU2VydmljZUVuYWJsZWRQYXNzIiwiY2ZhdFRhZ1BvbGljaWVzRW5hYmxlZFBhc3MiLCJjZmF0U2NwRW5hYmxlZFBhc3MiLCJjZmF0QmFja3VwUG9saWNpZXNFbmFibGVkUGFzcyIsImNmYXRPcmdDbG91ZEZvcm1hdGlvblN0YXR1c1Bhc3MiLCJjZmF0T3JnU2VydmljZUd1YXJkRHV0eUVuYWJsZWRQYXNzIiwiY2ZhdE9yZ1NlcnZpY2VTZWN1cml0eUh1YkVuYWJsZWRQYXNzIiwiY2ZhdE9yZ1NlcnZpY2VJYW1BY2Nlc3NBbmFseXplckVuYWJsZWRQYXNzIiwiY2ZhdE9yZ1NlcnZpY2VBd3NDb25maWdFbmFibGVkUGFzcyIsImNmYXRPcmdTZXJ2aWNlUmFtRW5hYmxlZFBhc3MiLCJjZmF0Q29udHJvbFRvd2VyRGVwbG95ZWRQYXNzIiwiY2ZhdENvbnRyb2xUb3dlck5vdERyaWZ0ZWRQYXNzIiwiY2ZhdENvbnRyb2xUb3dlckxhdGVzdFZlcnNpb25QYXNzIiwiY2ZhdExvZ0FyY2hpdmVBY2NvdW50UGFzcyIsImNmYXRBdWRpdEFjY291bnRQYXNzIiwiY2ZhdE1hbmFnZW1lbnRBY2NvdW50UGFzcyIsImNmYXRPcmdTZXJ2aWNlQmFja3VwRW5hYmxlZFBhc3MiLCJvcmdhbml6YXRpb25EZXBsb3kiLCJtYW5hZ2VtZW50QWNjb3VudCIsInVuZGVmaW5lZCIsImlhbVVzZXJSZXN1bHQiLCJpYW1DbGllbnQiLCJJQU1DbGllbnQiLCJpYW1Vc2VySW5mbyIsImxpc3RVc2Vyc0NvbW1hbmQiLCJMaXN0VXNlcnNDb21tYW5kIiwibGlzdFVzZXJzUmVzcG9uc2UiLCJ1c2VyIiwiVXNlcnMiLCJ1c2VyTmFtZSIsIlVzZXJOYW1lIiwibGlzdEFjY2Vzc0tleXNDb21tYW5kIiwiTGlzdEFjY2Vzc0tleXNDb21tYW5kIiwiYWNjZXNzS2V5cyIsIkFjY2Vzc0tleU1ldGFkYXRhIiwibGVuZ3RoIiwiYWNjZXNzS2V5IiwiYWNjZXNzS2V5SWQiLCJBY2Nlc3NLZXlJZCIsImdldExhc3RVc2VkQ29tbWFuZCIsIkdldEFjY2Vzc0tleUxhc3RVc2VkQ29tbWFuZCIsImxhc3RVc2VkUmVzcG9uc2UiLCJmb3VuZFVzZXJJbmZvIiwibGFzdFVzZWQiLCJBY2Nlc3NLZXlMYXN0VXNlZCIsIkxhc3RVc2VkRGF0ZSIsImlhbVVzZXJDaGVja3MiLCJlYzJDaGVjayIsImVjMlZhbGlkYXRpb24iLCJjb21tYW5kIiwiRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kIiwiUmVzZXJ2YXRpb25zIiwiZWMyRm91bmQiLCJmaW5kIiwicGFyYW0iLCJlYzJDaGVja3MiLCJpbmZvIiwiZWMyIiwidnBjQ2hlY2siLCJ2cGNWYWxpZGF0aW9uIiwiRGVzY3JpYmVWcGNzQ29tbWFuZCIsIlZwY3MiLCJ2cGNGb3VuZCIsInZwY0NoZWNrcyIsImNsb3VkVHJhaWxEZXRhaWxzIiwiY2xvdWRUcmFpbFZhbGlkYXRpb24iLCJjbG91ZFRyYWlsQ2xpZW50IiwiQ2xvdWRUcmFpbENsaWVudCIsImNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQiLCJEZXNjcmliZVRyYWlsc0NvbW1hbmQiLCJjbG91ZFRyYWlsUmVzcG9uc2UiLCJ0cmFpbExpc3QiLCJ0cmFpbCIsInRyYWlsSW5mbyIsIkhvbWVSZWdpb24iLCJ0cmFpbEZvdW5kIiwiaXNPcmdUcmFpbCIsIklzTXVsdGlSZWdpb25UcmFpbCIsImlzTXVsdGlSZWdpb24iLCJjb25maWdEZXRhaWxzIiwiY29uZmlnU2VydmljZUNsaWVudCIsIkNvbmZpZ1NlcnZpY2VDbGllbnQiLCJjb25maWdEZXRhaWwiLCJjb25maWdSZWNvcmRlckZvdW5kIiwiY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQiLCJyZWNvcmRlclJlc3BvbnNlIiwiRGVzY3JpYmVDb25maWd1cmF0aW9uUmVjb3JkZXJTdGF0dXNDb21tYW5kIiwiQ29uZmlndXJhdGlvblJlY29yZGVyc1N0YXR1cyIsImNoYW5uZWxSZXNwb25zZSIsIkRlc2NyaWJlRGVsaXZlcnlDaGFubmVsc0NvbW1hbmQiLCJEZWxpdmVyeUNoYW5uZWxzIiwiY29uZmlnRmluZCIsIm9yZ0RldGFpbHMiLCJvcmdDbGllbnQiLCJvcmdEZXNjcmliZUNvbW1hbmQiLCJvcmdEYXRhIiwiaWQiLCJJZCIsImFybiIsIkFybiIsIkxpc3RSb290c0NvbW1hbmQiLCJyb290cyIsIlJvb3RzIiwicm9vdE91SWQiLCJsZWdhY3lDdXJDaGVjayIsImN1ckNsaWVudCIsIkNvc3RBbmRVc2FnZVJlcG9ydFNlcnZpY2VDbGllbnQiLCJpc0xlZ2FjeUN1clNldHVwIiwiaW5wdXQiLCJEZXNjcmliZVJlcG9ydERlZmluaXRpb25zQ29tbWFuZCIsIlJlcG9ydERlZmluaXRpb25zIiwiZW5hYmxlT3JnUG9saWNpZXNDaGVjayIsInBvbGljeVR5cGVzRW5hYmxlZCIsInNjcEVuYWJsZWQiLCJ0YWdQb2xpY3lFbmFibGVkIiwiYmFja3VwUG9saWN5RW5hYmxlZCIsIlBvbGljeVR5cGVzIiwiZW5hYmxlZFBvbGljeSIsIlR5cGUiLCJTdGF0dXMiLCJvcmdTZXJ2aWNlcyIsImRpc2NvdmVyZWRPcmdTZXJ2aWNlcyIsIm9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kIiwiTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kIiwib3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlIiwiRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzIiwib3JnU2VydmljZSIsImZvdW5kT3JnU2VydmljZSIsInNlcnZpY2UiLCJTZXJ2aWNlUHJpbmNpcGFsIiwiY2ZuT3JnU3RhdHVzIiwib3JnQ2ZuU3RhdHVzIiwic3RhdHVzIiwiY2xvdWRGb3JtYXRpb25DbGllbnQiLCJDbG91ZEZvcm1hdGlvbkNsaWVudCIsImRlc2NyaWJlT3JnQWNjZXNzSW5wdXQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kIiwiY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MiLCJjb250cm9sVG93ZXJEZXRhaWxzIiwiY29udHJvbFRvd2VySW5mbyIsImNvbnRyb2xUb3dlckNsaWVudCIsIkNvbnRyb2xUb3dlckNsaWVudCIsIkxpc3RMYW5kaW5nWm9uZXNDb21tYW5kIiwibGFuZGluZ1pvbmVzIiwibGFuZGluZ1pvbmVJZGVudGlmaWVyIiwibHpSZWdpb24iLCJ0b1N0cmluZyIsInNwbGl0IiwiY29udHJvbFRvd2VyUmVnaW9uIiwiY29udHJvbFRvd2VyQ2xpZW50UmVnaW9uIiwiR2V0TGFuZGluZ1pvbmVDb21tYW5kIiwibHpSZXNwb25zZSIsImxhbmRpbmdab25lIiwibGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiIsImRlcGxveWVkVmVyc2lvbiIsInZlcnNpb24iLCJkcmlmdFN0YXR1cyIsImlkY0luZm8iLCJyZWdpb25MaXN0IiwiaWRjRGV0YWlscyIsImZvdW5kIiwic3NvQWRtaW5DbGllbnQiLCJTU09BZG1pbkNsaWVudCIsInNzb0lucHV0IiwiTWF4UmVzdWx0cyIsIk51bWJlciIsIkxpc3RJbnN0YW5jZXNDb21tYW5kIiwic3NvSW5zdGFuY2VSZXNwb25zZSIsIkluc3RhbmNlcyIsInNzb0luc3RhbmNlIiwiSW5zdGFuY2VBcm4iLCJJZGVudGl0eVN0b3JlSWQiLCJvcmdEZWxlZ2F0ZWRBZG1pbkFjY291bnRzIiwib3JnRGFEZXRhaWxzIiwib3JnRGFEZXRhaWwiLCJMaXN0RGVsZWdhdGVkQWRtaW5pc3RyYXRvcnNDb21tYW5kIiwiRGVsZWdhdGVkQWRtaW5pc3RyYXRvcnMiLCJkYSIsIkFjY291bnRJZCIsIkxpc3REZWxlZ2F0ZWRTZXJ2aWNlc0ZvckFjY291bnRDb21tYW5kIiwiYWNjb3VudFJlc3BvbnNlIiwiRGVsZWdhdGVkU2VydmljZXMiLCJzZXJ2aWNlcyIsImFjY291bnROYW1lIiwiTmFtZSIsIm9yZ01lbWJlckFjY291bnRzIiwib3JnTWVtYmVyQWNjb3VudEluZm8iLCJvcmdzQ2xpZW50IiwiTGlzdEFjY291bnRzQ29tbWFuZCIsIkFjY291bnRzIiwiYWNjb3VudCIsIm9yZ01lbWJlckFjY291bnQiLCJhY2NvdW50RW1haWwiLCJFbWFpbCIsIk5leHRUb2tlbiIsIm9yZ0FybiIsIm9yZ0lkIiwib3JnUm9vdE91SWQiLCJvcmdDbG91ZEZvcm1hdGlvblN0YXR1cyIsImNvbnRyb2xUb3dlckRlcGxveWVkVmVyc2lvbiIsImNvbnRyb2xUb3dlckRyaWZ0U3RhdHVzIiwiY29udHJvbFRvd2VyTGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiIsImNvbnRyb2xUb3dlclN0YXR1cyIsImN0RmluZCIsIm9yZ091SW5mbyIsInRvcExldmVsT3VzIiwibGlzdE9Vc0NvbW1hbmQiLCJMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQiLCJQYXJlbnRJZCIsImxpc3RPVXNSZXNwb25zZSIsIk9yZ2FuaXphdGlvbmFsVW5pdHMiLCJvdSIsInRvcExldmVsT3UiLCJuYW1lIiwiTGlzdEFjY291bnRzRm9yUGFyZW50Q29tbWFuZCIsImFjY291bnRzIiwidG9Mb3dlckNhc2UiLCJtZW1iZXJBY2NvdW50IiwiaWRlbnRpdHlEZWxlZ2F0ZWQiLCJzZWN1cml0eUh1YkRlbGVnYXRlZCIsImd1YXJkRHV0eURlbGVnYXRlZCIsImNvbmZpZ0RlbGVnYXRlZCIsImlhbUFjY2Vzc0FuYWx5emVyRGVsZWdhdGVkIiwiczNTdG9yYWdlTGVuc0RlbGVnYXRlZCIsImlwYW1EZWxlZ2F0ZWQiLCJhY2NvdW50RGVsZWdhdGVkIiwiYmFja3VwRGVsZWdhdGVkIiwic3J2IiwibWVzc2FnZSIsIndhcm4iLCJPcmdDaGVjayIsInRhc2siLCJkZXNjcmlwdGlvbiIsInJlcXVpcmVkIiwid2VpZ2h0IiwibG9lIiwiTUFDaGVjayIsImNmYXRJYW1Vc2VyQ2hlY2siLCJjZmF0RWMyQ2hlY2siLCJjZmF0VnBjQ2hlY2siLCJyZW1lZGlhdGlvbkxpbmsiLCJjZmF0Q2xvdWRUcmFpbENoZWNrIiwiY2ZhdENsb3VkVHJhaWxPcmdTZXJ2aWNlRW5hYmxlZENoZWNrIiwiY2ZhdENsb3VkVHJhaWxPcmdUcmFpbENoZWNrIiwiY2ZhdENvbmZpZ01hbmFnZW1lbnRBY2NvdW50Q2hlY2siLCJjZmF0Q29uZmlnUmVjb3JkZXJNYW5hZ2VtZW50QWNjb3VudENoZWNrIiwiY2ZhdE9yZ1NlcnZpY2VHdWFyZER1dHlDaGVjayIsImNmYXRPcmdTZXJ2aWNlUmFtQ2hlY2siLCJjZmF0T3JnU2VydmljZVNlY3VyaXR5SHViQ2hlY2siLCJjZmF0T3JnU2VydmljZUlhbUFjY2Vzc0FuYWx5emVyQ2hlY2siLCJjZmF0T3JnU2VydmljZUNvbmZpZ0NoZWNrIiwiY2ZhdE9yZ1NlcnZpY2VDbG91ZEZvcm1hdGlvbkNoZWNrIiwiY2ZhdEluZnJhT3VDaGVjayIsImNmYXRTZWN1cml0eU91Q2hlY2siLCJjZmF0V29ya2xvYWRPdUNoZWNrIiwiY2ZhdElhbUlkQ09yZ1NlcnZpY2VDaGVjayIsImNmYXRJYW1JZGNDb25maWd1cmVkQ2hlY2siLCJjZmF0T3JnUG9saWN5U2NwRW5hYmxlZCIsImNmYXRPcmdQb2xpY3lUYWdQb2xpY3lDaGVjayIsImNmYXRCYWNrdXBQb2xpY2llc0VuYWJsZWRDaGVjayIsImNmYXRDb250cm9sVG93ZXJEZXBsb3llZENoZWNrIiwiY2ZhdENvbnRyb2xUb3dlckxhdGVzdFZlcnNpb25DaGVjayIsImNmYXRDb250cm9sVG93ZXJOb3REcmlmdGVkQ2hlY2siLCJjZmF0TG9nQXJjaGl2ZUFjY291bnRDaGVjayIsImNmYXRBdWRpdEFjY291bnRDaGVjayIsImNmYXRDaGVja3MiLCJ0YWJsZSIsImFzc2Vzc21lbnQiLCJEYXRlIiwidG9VVENTdHJpbmciLCJzY29yZSIsInRvdGFsUmVxdWlyZWRMb2UiLCJ0b3RhbFNjb3JlIiwiY2ZhdFN0YXR1cyIsImNoZWNrIiwiZGF0YSIsInJlYWQiLCJpYW1Vc2VyIiwidnBjRmluZCIsIm1ndFRhc2tOdW1iZXIiLCJtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50IiwiZ292V2F5cG9pbnQiLCJnb3ZUYXNrTnVtYmVyIiwibWFzVGFza051bWJlciIsIm1hc1dheXBvaW50IiwibHpUYXNrTnVtYmVyIiwibHpXYXlwb2ludCIsImN1cnJlbnRWZXJzaW9uIiwibGF0ZXN0VmVyc2lvbiIsInNzb1Rhc2tOdW1iZXIiLCJzc29XYXlwb2ludCIsInNlY1Rhc2tOdW1iZXIiLCJzZWNXYXlwb2ludCIsIm5ldFRhc2tOdW1iZXIiLCJuZXR3b3JrV2F5cG9pbnQiLCJvYlRhc2tOdW1iZXIiLCJvYldheXBvaW50IiwiYmFja1Rhc2tOdW1iZXIiLCJiYWNrdXBXYXlwb2ludCIsIm1haW4iXSwic291cmNlUm9vdCI6IiJ9