(()=>{"use strict";const n=require("@aws-sdk/client-sts"),e=require("@aws-sdk/client-organizations"),a=require("@aws-sdk/client-iam"),o=require("@aws-sdk/client-cloudformation"),i=require("@aws-sdk/client-sso-admin"),c=require("@aws-sdk/client-ec2"),t=require("@aws-sdk/client-cloudtrail"),s=require("@aws-sdk/client-config-service"),r=require("@aws-sdk/client-controltower"),l=require("@aws-sdk/client-cost-and-usage-report-service");async function d(n,e,a){return`${e} - Task ${n} - Deploy top-level OU ${a}.`}async function p(n,e,a){return`${e} - Task ${n} - Remove IAM user ${a}`}async function y(n,e,a,o){return`${e} - Task ${n} - Remove IAM user ${a} API key: ${o}`}async function S(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function u(n,e,a){return`${e} - Task ${n} - Delete VPC in the ${a} region.`}async function f(n,e,a){return`${e} - Task ${n} - Enable the AWS service ${a} within your AWS Organization`}async function g(n,e,a){return`${e} - Task ${n} - Delegate the AWS service ${a} within your AWS Organization to a member account`}async function A(n,e,a){return`${e} - Task ${n} - Enable the policy type ${a} within your AWS Organization.`}const F=require("fs");(async()=>{const w="./Pathfinder.txt";let m=new Date;const C=process.env.AWS_REGION||"us-east-1",E=await async function(){const n=new c.EC2Client({region:"us-east-1"});try{const e=new c.DescribeRegionsCommand({}),a=await n.send(e),o=[];for(const n of a.Regions||[])o.push(n.RegionName||"");return o}catch(n){return console.error("Error retrieving regions:",n),[]}finally{n.destroy()}}();console.log("Discovering your AWS environment....");const I=await(async a=>{const o=new e.OrganizationsClient({region:a});let i=!1,c=!1;try{const t=await async function(e){const a=new n.STSClient({region:e});try{const e=new n.GetCallerIdentityCommand({});return(await a.send(e)).Account}catch(n){throw console.error("Error getting account ID:",n),n}}(a);if(t){const n=new e.DescribeOrganizationCommand({}),a=await o.send(n);if(a.Organization?.MasterAccountId){const n=a.Organization?.MasterAccountId;n==t?(c=!0,i=!0):i=!0}else i=!1}}catch(n){console.error("Error:",n)}finally{o.destroy()}return{isInOrganization:i,isManagementAccount:c}})(C);F.writeFileSync(w,"Cloud Foundations - Pathfinder"),F.appendFileSync(w,`\nGenerated on: ${m.toUTCString()} \n\n`),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n                   MANAGEMENT ACCOUNT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ACCOUNT TYPE\n"),I&&(console.dir(I,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Is in AWS Organization: ${I.isInOrganization}`),F.appendFileSync(w,`\n  Assessing AWS Management Account: ${I.isManagementAccount}`)),console.log("Discovering IAM Users....");const N=await(async()=>{const n=new a.IAMClient({region:"us-east-1"}),e=[];try{const o=new a.ListUsersCommand({}),i=await n.send(o);for(const o of i.Users||[]){const i=o.UserName||"",c=new a.ListAccessKeysCommand({UserName:i}),t=(await n.send(c)).AccessKeyMetadata||[];if(t.length>0)for(const o of t){const c=o.AccessKeyId||"",t=new a.GetAccessKeyLastUsedCommand({AccessKeyId:c}),s=await n.send(t),r={userName:i,accessKeyId:c,lastUsed:s&&s.AccessKeyLastUsed&&`${s.AccessKeyLastUsed.LastUsedDate}`||"Not available"};e.push(r)}else{const n={userName:i};e.push(n)}}}catch(n){console.error("Error:",n)}finally{n.destroy()}return e})();if(F.appendFileSync(w,"\n\nIAM USERS CHECK\n"),N&&N.length>0){console.dir(N,{depth:null,colors:!0});for(const n of N)F.appendFileSync(w,`\n  IAM User: ${n.userName}`),n.accessKeyId&&F.appendFileSync(w,`\n    User API Key ID: ${n.accessKeyId}`),F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n  No IAM Users found.");console.log("Discovering EC2 instances across all AWS Regions....");const $=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),o=new c.DescribeInstancesCommand({});try{const i=await n.send(o);if(i.Reservations)if(i.Reservations.length>0){const n={region:a,ec2Found:!0};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}else{const n={region:a,ec2Found:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nEC2 INSTANCE CHECK\n"),$&&$.find((n=>!0===n.ec2Found))){console.dir($,{depth:null,colors:!0});for(const n of $)n.ec2Found&&F.appendFileSync(w,`\n  ${n.region} - found EC2 Instance(s).`)}else F.appendFileSync(w,"\n  No EC2 instances found.");console.log("Discovering VPCs across all AWS Regions....");const O=await async function(n){let e=[];for(const a of n){const n=new c.EC2Client({region:a}),o=new c.DescribeVpcsCommand({});try{const i=await n.send(o);if(i.Vpcs)if(i.Vpcs.length>0){const n={region:a,vpcFound:!0};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}else{const n={region:a,vpcFound:!1};e.push(n)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nVPC CHECK\n"),O&&O.length>0){console.dir(O,{depth:null,colors:!0});for(const n of O)n.vpcFound&&F.appendFileSync(w,`\n  ${n.region} - found VPC(s).`)}else F.appendFileSync(w,"\n  No VPCs found.");console.log("Discovering AWS Config configurations across all AWS Regions....");const T=await async function(n){let e=[];for(const a of n){const n=new t.CloudTrailClient({region:a}),o=new t.DescribeTrailsCommand({});try{const i=await n.send(o);if(i.trailList)for(const n of i.trailList){let o={};o=n.HomeRegion==a?{region:a,trailFound:!0,isOrgTrail:n.IsMultiRegionTrail,isMultiRegion:n.IsMultiRegionTrail}:{region:a,trailFound:!1},e.push(o)}}catch(n){console.log(`Error checking instance: ${n}`)}finally{n.destroy()}}return e}(E),h=await async function(n){let e=[];for(const a of n){const n=new s.ConfigServiceClient({region:a});let o={region:a,configRecorderFound:!1,configDeliveryChannelFound:!1};try{const a=await n.send(new s.DescribeConfigurationRecorderStatusCommand({}));0!==a.ConfigurationRecordersStatus?.length&&(o.configRecorderFound=!0);const i=await n.send(new s.DescribeDeliveryChannelsCommand({}));0!==i.DeliveryChannels?.length&&(o.configDeliveryChannelFound=!0),e.push(o)}catch(n){console.error(`Error checking AWS Config in ${a}:`,n)}finally{n.destroy()}}return e}(E);if(F.appendFileSync(w,"\n\nAWS CONFIG CHECK\n"),h&&h.find((n=>!0===n.configRecorderFound))){console.dir(h,{depth:null,colors:!0});for(const n of h)n.configRecorderFound&&F.appendFileSync(w,`\n  ${n.region} - Config Recorder found`),n.configDeliveryChannelFound&&F.appendFileSync(w,`\n  ${n.region} - Config Delivery Channel found`)}else F.appendFileSync(w,"\n  No AWS Config resource discovered");if(I.isInOrganization&&I.isManagementAccount){const n=await async function(n){const a=new e.OrganizationsClient({region:n});let o={};try{const n=new e.DescribeOrganizationCommand({}),i=await a.send(n);i.Organization&&(o.id=i.Organization.Id??"",o.arn=i.Organization.Arn??"");const c=new e.ListRootsCommand({}),t=await a.send(c);t.Roots?o.rootOuId=t.Roots[0].Id:console.log("No info found for your AWS Organization.")}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),o}}("us-east-1");console.dir(n,{depth:null,colors:!0});const a=await(async n=>{const e=new l.CostAndUsageReportServiceClient({region:n});let a=!1;try{const n={},o=new l.DescribeReportDefinitionsCommand(n),i=await e.send(o);return i.ReportDefinitions&&i.ReportDefinitions.length>0&&(a=!0),{isLegacyCurSetup:a}}catch(n){return console.error(`Error: ${n}`),a=!1,{isLegacyCurSetup:a}}finally{e.destroy()}})("us-east-1"),c=await async function(n){const a=new e.OrganizationsClient({region:n});let o={scpEnabled:!1,tagPolicyEnabled:!1,backupPolicyEnabled:!1};try{const n={},i=new e.ListRootsCommand(n),c=await a.send(i);if(c.Roots&&c.Roots[0].PolicyTypes)for(const n of c.Roots[0].PolicyTypes)"SERVICE_CONTROL_POLICY"==n.Type&&"ENABLED"==n.Status&&(o.scpEnabled=!0),"TAG_POLICY"==n.Type&&"ENABLED"==n.Status&&(o.tagPolicyEnabled=!0),"BACKUP_POLICY"==n.Type&&"ENABLED"==n.Status&&(o.backupPolicyEnabled=!0)}catch(n){console.error(`An error occurred: ${n}`)}finally{return a.destroy(),o}}("us-east-1");console.dir(c,{depth:null,colors:!0});const t=await async function(n){const a=[],o=new e.OrganizationsClient({region:n});try{const n=new e.ListAWSServiceAccessForOrganizationCommand({}),i=await o.send(n);if(i.EnabledServicePrincipals&&i.EnabledServicePrincipals.length>0){i.EnabledServicePrincipals;for(const n of i.EnabledServicePrincipals){const e={service:n.ServicePrincipal??""};a.push(e)}}}catch(n){console.error("Error checking service access:",n)}finally{return o.destroy(),a}}("us-east-1");console.dir(t,{depth:null,colors:!0});const s=await async function(n){let e={status:"disabled"};const a=new o.CloudFormationClient({region:n});try{const n={},i=new o.DescribeOrganizationsAccessCommand(n),c=await a.send(i);e.status=c.Status??"disabled"}catch(n){console.log(`Error: ${n}`)}finally{return a.destroy(),e}}(C);console.dir(s,{depth:null,colors:!0});const m=await async function(n){let e={};const a=new r.ControlTowerClient({region:n});try{const n=new r.ListLandingZonesCommand({}),o=await a.send(n);if(console.log(JSON.stringify(o.landingZones,null,2)),o.landingZones&&o.landingZones.length>0){const n={landingZoneIdentifier:o.landingZones[0].arn},a=o.landingZones[0].arn?.toString().split(":")[3]??"";if(a){e.controlTowerRegion=a;const o=new r.ControlTowerClient({region:a}),i=new r.GetLandingZoneCommand(n),c=await o.send(i);c.landingZone&&(console.log(JSON.stringify(c.landingZone,null,2)),e.status=c.landingZone.status,e.latestAvailableVersion=c.landingZone.latestAvailableVersion,e.deployedVersion=c.landingZone.version,e.driftStatus=c.landingZone.driftStatus?.status)}}}catch(e){console.error(`Error checking Control Tower in ${n}:`,e)}finally{a.destroy()}return e}(C),I=await async function(n){let e={found:!1};for(const a of n){const n=new i.SSOAdminClient({region:a});try{const o={MaxResults:Number("100")},c=new i.ListInstancesCommand(o),t=await n.send(c);if(t.Instances&&t.Instances.length>0){const n=t.Instances[0];e.found=!0,e.region=a,e.arn=n.InstanceArn,e.id=n.IdentityStoreId;break}}catch(n){console.log(`Error looking for AWS Identity Center details in region ${a}`)}finally{n.destroy()}}return e}(E);console.dir(I,{depth:null,colors:!0});const h=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"});let o={};try{const i=new e.ListDelegatedAdministratorsCommand({}),c=await a.send(i);if(c.DelegatedAdministrators)for(const i of c.DelegatedAdministrators){const c={AccountId:i.Id},t=new e.ListDelegatedServicesForAccountCommand(c),s=await a.send(t);s.DelegatedServices&&(o={services:s.DelegatedServices,accountName:i.Name},n.push(o))}}catch(n){console.log("Error looking for delegated services.")}finally{a.destroy()}return n}();console.dir(h,{depth:null,colors:!0});const v=await async function(){let n=[];const a=new e.OrganizationsClient({region:"us-east-1"});Number("200");try{let o=await a.send(new e.ListAccountsCommand({}));if(o.Accounts&&o.Accounts.length>0){for(const e of o.Accounts){let a={accountName:e.Name,accountEmail:e.Email};n.push(a)}do{if(o.NextToken&&(o=await a.send(new e.ListAccountsCommand({NextToken:o.NextToken})),o.Accounts&&o.Accounts.length>0))for(const e of o.Accounts){let a={accountName:e.Name,accountEmail:e.Email};n.push(a)}}while(o.NextToken)}}catch(n){console.error("Error listing AWS accounts:",n)}finally{a.destroy()}return n}();console.dir(v,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nMANAGEMENT ACCOUNT RECOMMENDED TASKS:");let R=1;const D="Management Account";if(N&&N.length>0)for(const n of N){const e=await p(R,D,n.userName);if(F.appendFileSync(w,`\n  ${e}`),R++,n.accessKeyId){const e=await y(R,D,n.userName,n.accessKeyId);F.appendFileSync(w,`\n  ${e}`),R++}}if($&&$.find((n=>!0===n.ec2Found)))for(const n of $)if(n.ec2Found&&n.region){const e=await u(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(O&&O.length>0)for(const n of O)if(n.vpcFound&&n.region){const e=await S(R,D,n.region);F.appendFileSync(w,`\n  ${e}`),R++}if(F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    GOVERNANCE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION POLICY TYPES\n"),F.appendFileSync(w,`\n  Service Control Policies (SCP) enabled: ${c.scpEnabled}`),F.appendFileSync(w,`\n  Tag Policies enabled: ${c.tagPolicyEnabled}`),F.appendFileSync(w,`\n  Backup Policies enabled: ${c.backupPolicyEnabled}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`),F.appendFileSync(w,"\n\nCLOUDTRAIL CHECK\n"),T&&T.length>0){console.dir(T,{depth:null,colors:!0});for(const n of T)n.trailFound&&(F.appendFileSync(w,`\n  CloudTrail found in ${n.region}`),F.appendFileSync(w,`\n    Is Organization Trail: ${n.isOrgTrail}`),F.appendFileSync(w,`\n    Is MultiRegion: ${n.isMultiRegion}`),F.appendFileSync(w,"\n"))}else F.appendFileSync(w,"\n  No AWS CloudTrail resource discovered");F.appendFileSync(w,"\n\nGOVERNANCE SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nGOVERNANCE RECOMMENDED TASKS:");const z="Governance";let W=1;if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(W,z,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),W++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(W,z,"AWS Config");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.scpEnabled){const n=await A(W,z,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.tagPolicyEnabled){const n=await A(W,z,"Tag Policy");F.appendFileSync(w,`\n  ${n}`),W++}if(!c.backupPolicyEnabled){const n=await A(W,z,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),W++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                FINANCIAL MANAGEMENT"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nLegacy CUR"),F.appendFileSync(w,`\n  Is legacy CUR setup: ${a.isLegacyCurSetup}`),F.appendFileSync(w,"\n\nCLOUD FINANCIAL MANAGEMENT RECOMMENDED TASKS:");let b=1;const M="Cloud Financial Management";if(!a.isLegacyCurSetup){const n=await async function(n,e){return`${e} - Task ${n} - Enable and create a Cost and Utilization Report (CUR) in the billing console.`}(b,M);F.appendFileSync(w,`\n  ${n}`)}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                MULTI-ACCOUNT STRATEGY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS ORGANIZATION DETAILS\n"),F.appendFileSync(w,`\n  AWS Organization Id: ${n.id}`),F.appendFileSync(w,`\n  AWS Organization ARN: ${n.arn}`),F.appendFileSync(w,`\n  AWS Organization Root OU Id: ${n.rootOuId}`),F.appendFileSync(w,"\n\nAWS ORGANIZATION CLOUDFORMATION\n"),F.appendFileSync(w,`\n  AWS CloudFormation Organization stack sets status : ${s.status}`);let P,L,k,U=!1;if(n.rootOuId){const a=await async function(n,a){const o=new e.OrganizationsClient({region:n});let i=[];try{const n=new e.ListOrganizationalUnitsForParentCommand({ParentId:a}),c=await o.send(n);if(c.OrganizationalUnits)for(const n of c.OrganizationalUnits){let a={id:n.Id,name:n.Name};const c=await o.send(new e.ListAccountsForParentCommand({ParentId:n.Id}));c.Accounts&&c.Accounts.length>0&&(a.accounts=c.Accounts),i.push(a)}}catch(n){return console.error("Error checking service access:",n),[]}finally{o.destroy()}return i}("us-east-1",n.rootOuId);if(console.dir(a,{depth:null,colors:!0}),F.appendFileSync(w,"\n\nAWS ORGANIZATION TOP-LEVEL ORGANIZATION UNITS\n"),F.appendFileSync(w,"\n  List of Organization's top-level OUs and AWS accounts:"),a&&a.length>0)for(const n of a)if("suspended"===n.name?.toLowerCase()&&(L=!0),"transitional"===n.name?.toLowerCase()&&(P=!0),"workloads"===n.name?.toLowerCase()&&(k=!0),"security"===n.name?.toLowerCase()&&(U=!0),F.appendFileSync(w,`\n    Organizational Unit: ${n.name}`),F.appendFileSync(w,`\n      Organizational Unit Id: ${n.id}`),n.accounts&&n.accounts.length>0){F.appendFileSync(w,"\n      AWS Accounts:");for(const e of n.accounts)F.appendFileSync(w,`\n        ${e.Name}`);F.appendFileSync(w,"\n")}else F.appendFileSync(w,"\n      AWS Accounts: None"),F.appendFileSync(w,"\n");else F.appendFileSync(w,"\n  No top level OUs found.")}if(F.appendFileSync(w,"\n\nAWS ORGANIZATION MEMBER ACCOUNTS\n"),v&&v.length>0)for(const n of v)F.appendFileSync(w,`\n  Account: ${n.accountName}`),F.appendFileSync(w,`\n  Account Email: ${n.accountEmail}\n`);else F.appendFileSync(w,"No member accounts found which is amazing as this is running from one.");F.appendFileSync(w,"\n\nAWS ORGANIZATION ENABLED SERVICES\n"),F.appendFileSync(w,"\n  The following AWS Services are enabled within your AWS Organization:");for(const n of t)F.appendFileSync(w,`\n    ${n.service}`);let G=!1,K=!1,V=!1,Z=!1,B=!1,Y=!1,q=!1,H=!1,x=!1;if(F.appendFileSync(w,"\n\nAWS ORGANIZATION INTEGRATED SERVICE REGISTERED DELEGATED ADMINS\n"),h&&h.length>0)for(const n of h){if(F.appendFileSync(w,`\n  Account: ${n.accountName}`),n.services&&n.services.length>0){F.appendFileSync(w,"\n  Delegated Services:");for(const e of n.services)F.appendFileSync(w,`\n    ${e.ServicePrincipal}`),"securityhub.amazonaws.com"===e.ServicePrincipal&&(K=!0),"guardduty.amazonaws.com"===e.ServicePrincipal&&(V=!0),"sso.amazonaws.com"===e.ServicePrincipal&&(G=!0),"config.amazonaws.com"===e.ServicePrincipal&&(Z=!0),"access-analyzer.amazonaws.com"===e.ServicePrincipal&&(B=!0),"storage-lens.s3.amazonaws.com"===e.ServicePrincipal&&(Y=!0),"ipam.amazonaws.com"===e.ServicePrincipal&&(q=!0),"account.amazonaws.com"===e.ServicePrincipal&&(H=!0),"backup.amazonaws.com"===e.ServicePrincipal&&(x=!0)}F.appendFileSync(w,"\n ")}else F.appendFileSync(w,"\n  No delegated admin accounts in AWS Organization");F.appendFileSync(w,"\n\nMULTI-ACCOUNT STRATEGY RECOMMENDED TASKS:");let _=1,J="Multi-Account Strategy";const j=await async function(n,e){return`${e} - Task ${n} - Review and validate your email addresses and their domains for the root user administrator for management and all member accounts.`}(_,J);if(F.appendFileSync(w,`\n  ${j}`),_++,!c.scpEnabled){const n=await A(_,J,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),_++}if(!P){const n=await d(_,J,"Transitional");F.appendFileSync(w,`\n  ${n}`),_++}if(!L){const n=await d(_,J,"Suspended");F.appendFileSync(w,`\n  ${n}`),_++}if(!k){const n=await d(_,J,"Workloads");F.appendFileSync(w,`\n  ${n}`),_++}if(!U){const n=await d(_,J,"Security");F.appendFileSync(w,`\n  ${n}`),_++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  LANDING ZONE"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS CONTROL TOWER\n"),m.controlTowerRegion?(console.dir(m,{depth:null,colors:!0}),F.appendFileSync(w,`\n  Control Tower home region: ${m.controlTowerRegion}`),F.appendFileSync(w,`\n  Control Tower status: ${m.status}`),F.appendFileSync(w,`\n  Control Tower Landing Zone version: ${m.deployedVersion}`),F.appendFileSync(w,`\n  Latest available version: ${m.latestAvailableVersion}`),F.appendFileSync(w,`\n  Drift Status: ${m.driftStatus}`)):F.appendFileSync(w,"\n  AWS Control Tower is not deployed in the AWS Organization"),F.appendFileSync(w,"\n\nLANDING ZONE RECOMMENDED TASKS:");let Q=1;const X="Landing Zone";if(void 0===m.controlTowerRegion){const n=await async function(n,e){return`${e} - Task ${n} - Deploy AWS Control Tower in your home AWS Region.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if("DRIFTED"===m.driftStatus){const n=await async function(n,e){return`${e} - Task ${n} - Fix drift in deployed landing zone.`}(Q,X);F.appendFileSync(w,`\n  ${n}`),Q++}if(m.deployedVersion!==m.latestAvailableVersion){const n=m.deployedVersion??"",e=m.latestAvailableVersion??"",a=await async function(n,e,a,o){return`${e} - Task ${n} - Update your AWS Control Tower Landing Zone from ${a} to ${o}.`}(Q,X,n,e);F.appendFileSync(w,`\n  ${a}`),Q++}if(!t.find((n=>"member.org.stacksets.cloudformation.amazonaws.com"===n.service))){const n=await f(Q,X,"AWS CloudFormation");F.appendFileSync(w,`\n  ${n}`),Q++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    IDENTITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS IAM IDENTITY CENTER\n"),F.appendFileSync(w,`\n  IdC Region: ${I.region}`),F.appendFileSync(w,`\n  IdC ARN: ${I.arn}`),F.appendFileSync(w,`\n  IdC Instance Id: ${I.id}`),F.appendFileSync(w,"\n\nIDENTITY RECOMMENDED TASKS:");let nn=1;const en="Identity";if(!t.find((n=>"sso.amazonaws.com"===n.service))){const n=await f(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!G){const n=await g(nn,en,"AWS IAM Identity Center");F.appendFileSync(w,`\n  ${n}`),nn++}if(!c.scpEnabled){const n=await A(nn,en,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),nn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    SECURITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nAWS SECURITY SERVICES ENABLED IN AWS ORGANIZATION:\n"),t.find((n=>"guardduty.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS GuardDuty"),t.find((n=>"securityhub.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Security Hub"),t.find((n=>"access-analyzer.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  IAM Access Analyzer"),t.find((n=>"macie.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Macie"),t.find((n=>"storage-lens.s3.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon S3 Storage Lens"),t.find((n=>"inspector2.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  Amazon Inspector"),t.find((n=>"cloudtrail.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS CloudTrail"),t.find((n=>"config.amazonaws.com"===n.service))&&F.appendFileSync(w,"\n  AWS Config"),F.appendFileSync(w,"\n\nSECURITY RECOMMENDED TASKS:");let an=1;const on="Security";if(!c.scpEnabled){const n=await A(an,on,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(an,on,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"securityhub.amazonaws.com"===n.service))){const n=await f(an,on,"AWS SecurityHub");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"access-analyzer.amazonaws.com"===n.service))){const n=await f(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"cloudtrail.amazonaws.com"===n.service))){const n=await f(an,on,"AWS CloudTrail");F.appendFileSync(w,`\n  ${n}`),an++}if(!t.find((n=>"config.amazonaws.com"===n.service))){const n=await f(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!K){const n=await g(an,on,"Security Hub");F.appendFileSync(w,`\n  ${n}`),an++}if(!V){const n=await g(an,on,"GuardDuty");F.appendFileSync(w,`\n  ${n}`),an++}if(!Z){const n=await g(an,on,"AWS Config");F.appendFileSync(w,`\n  ${n}`),an++}if(!B){const n=await g(an,on,"AWS IAM Access Analyzer");F.appendFileSync(w,`\n  ${n}`),an++}if(!Y){const n=await g(an,on,"S3 Storage Lens");F.appendFileSync(w,`\n  ${n}`),an++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                    NETWORK"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nNETWORK RECOMMENDED TASKS:");let cn=1;const tn="Network";if(!t.find((n=>"guardduty.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS GuardDuty");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ipam.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!t.find((n=>"ram.amazonaws.com"===n.service))){const n=await f(cn,tn,"AWS Resource Access Manager");F.appendFileSync(w,`\n  ${n}`),cn++}if(!q){const n=await g(cn,tn,"AWS IPAM");F.appendFileSync(w,`\n  ${n}`),cn++}if(!c.scpEnabled){const n=await A(cn,tn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),cn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n                  OBSERVABILITY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nOBSERVABILITY RECOMMENDED TASKS:");let sn=1;const rn="Observability";if(!t.find((n=>"account.amazonaws.com"===n.service))){const n=await f(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}if(!H){const n=await g(sn,rn,"Account Manager");F.appendFileSync(w,`\n  ${n}`),sn++}F.appendFileSync(w,"\n\n*********************************************************"),F.appendFileSync(w,"\n               BACKUP AND RECOVERY"),F.appendFileSync(w,"\n*********************************************************"),F.appendFileSync(w,"\n\nBACKUP AND RECOVERY RECOMMENDED TASKS:");let ln=1;const dn="Backup and Recovery";if(!t.find((n=>"backup.amazonaws.com"===n.service))){const n=await f(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!x){const n=await g(ln,dn,"AWS Backup");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.backupPolicyEnabled){const n=await A(ln,dn,"Backup Policy");F.appendFileSync(w,`\n  ${n}`),ln++}if(!c.scpEnabled){const n=await A(ln,dn,"Service Control Policy");F.appendFileSync(w,`\n  ${n}`),ln++}}else if(I.isInOrganization&&!I.isManagementAccount){const n="\nWARNING: You are running Pathfinder from an account that is a member of your AWS Organization. Please run the solution from your AWS Management account.";console.warn(n),F.appendFileSync(w,n)}else{const n="\nWARNING: You are running Pathfinder from an account that not part of an AWS Organization. This account will be treated as a standalone account.";console.warn(n),F.appendFileSync(w,n)}F.appendFileSync(w,"\n\n\n  END REVIEW")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDOUIsSUFBSWdSLEdBQWlCLEVBQ3JCLE1BQU1DLEdBQWlCLHNCQUV2QixJQUFLbEksRUFBbUJsRSxNQUFLQyxHQUEyQix5QkFBbEJBLEVBQU15RSxVQUFxQyxDQUM3RSxNQUFNdUUsUUFBZ0IsRUFBbUNrRCxHQUFnQkMsR0FBZ0IsY0FDekYsaUJBQWtCalIsRUFBWSxPQUFPOE4sS0FDckNrRCxJQUNKLENBQ0EsSUFBS2xCLEVBQWlCLENBQ2xCLE1BQU1oQyxRQUFnQixFQUF1Q2tELEdBQWdCQyxHQUFnQixjQUM3RixpQkFBa0JqUixFQUFZLE9BQU84TixLQUNyQ2tELElBQ0osQ0FDQSxJQUFLMUksRUFBdUJJLG9CQUFxQixDQUM3QyxNQUFNb0YsUUFBZ0IsRUFBMkJrRCxHQUFnQkMsR0FBZ0IsaUJBQ2pGLGlCQUFrQmpSLEVBQVksT0FBTzhOLEtBQ3JDa0QsSUFDSixDQUNBLElBQUsxSSxFQUF1QkUsV0FBWSxDQUNwQyxNQUFNc0YsUUFBZ0IsRUFBMkJrRCxHQUFnQkMsR0FBZ0IsMEJBQ2pGLGlCQUFrQmpSLEVBQVksT0FBTzhOLEtBQ3JDa0QsSUFDSixDQUNKLE1BQ0ssR0FBSTNQLEVBQVlHLG1CQUFxQkgsRUFBWUksb0JBQXFCLENBQ3ZFLE1BQU1xTSxFQUFVLDZKQUNoQjVNLFFBQVFnUSxLQUFLcEQsR0FDYixpQkFBa0I5TixFQUFZOE4sRUFDbEMsS0FDSyxDQUNELE1BQU1BLEVBQVUsb0pBQ2hCNU0sUUFBUWdRLEtBQUtwRCxHQUNiLGlCQUFrQjlOLEVBQVk4TixFQUNsQyxDQUNBLGlCQUFrQjlOLEVBQVkscUJBQXFCLEVBRXZEbVIsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1zdHNcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1pYW1cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb25cIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLXNkay9jbGllbnQtc3NvLWFkbWluXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWVjMlwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZHRyYWlsXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvbmZpZy1zZXJ2aWNlXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1zZGsvY2xpZW50LWNvbnRyb2x0b3dlclwiIiwid2VicGFjazovLy9leHRlcm5hbCBjb21tb25qcyBcIkBhd3Mtc2RrL2NsaWVudC1jb3N0LWFuZC11c2FnZS1yZXBvcnQtc2VydmljZVwiIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL3Rhc2tzLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiZnNcIiIsIndlYnBhY2s6Ly8vLi9idWlsZC9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LXJlZ2lvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZGVmaW5lLWFjY291bnQtdHlwZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay1pYW0tdXNlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stZWMyLWV4aXN0ZW5jZS5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9jaGVjay12cGMtZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWNsb3VkdHJhaWwtZXhpc3RlbmNlLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWNvbmZpZy1leGlzdGVuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1kZXRhaWxzLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWxlZ2FjeS1jdXIuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LWVuYWJsZWQtb3JnLXBvbGljeS10eXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9idWlsZC9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctc2VydmljZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvY2hlY2stb3JnLWNsb3VkZm9ybWF0aW9uLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2NoZWNrLWNvbnRyb2wtdG93ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LWlkYy1pbmZvLmpzIiwid2VicGFjazovLy8uL2J1aWxkL3NyYy9hY3Rpb25zL2dldC1vcmctZGEtYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1tZW1iZXItYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vLy4vYnVpbGQvc3JjL2FjdGlvbnMvZ2V0LW9yZy1vdXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtc3RzXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtaWFtXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZm9ybWF0aW9uXCIpOyIsImNvbnN0IF9fV0VCUEFDS19OQU1FU1BBQ0VfT0JKRUNUX18gPSByZXF1aXJlKFwiQGF3cy1zZGsvY2xpZW50LXNzby1hZG1pblwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY2xvdWR0cmFpbFwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jb25maWctc2VydmljZVwiKTsiLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcIkBhd3Mtc2RrL2NsaWVudC1jb250cm9sdG93ZXJcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJAYXdzLXNkay9jbGllbnQtY29zdC1hbmQtdXNhZ2UtcmVwb3J0LXNlcnZpY2VcIik7IiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveUNvbmZpZ1JlY29yZGVyVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgcmVnaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlcGxveSBBV1MgQ29uZmlnIFJlY29yZGVyIHRvIHRoZSAke3JlZ2lvbn0gcmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95Q29uZmlnRGVsaXZlcnlDaGFubmVsVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgcmVnaW9uKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEFkZCBBV1MgQ29uZmlnIERlbGl2ZXJ5IENoYW5uZWwgdG8gdGhlICR7cmVnaW9ufSByZWdpb24uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXBsb3lDbG91ZFRyYWlsT3JnVHJhaWxUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIENyZWF0ZSBhIG11bHRpLXJlZ2lvbiBDbG91ZFRyYWlsIE9yZ2FuaXphdGlvbiBUcmFpbCBpbiB5b3VyIGhvbWUgQVdTIFJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlcGxveUNvbnRyb2xUb3dlclRhc2sodGFza051bWJlciwgd2F5cG9pbnQpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVwbG95IEFXUyBDb250cm9sIFRvd2VyIGluIHlvdXIgaG9tZSBBV1MgUmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTHpDb250cm9sVG93ZXJUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBjdXJyZW50VmVyc2lvbiwgbGF0ZXN0VmVyc2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBVcGRhdGUgeW91ciBBV1MgQ29udHJvbCBUb3dlciBMYW5kaW5nIFpvbmUgZnJvbSAke2N1cnJlbnRWZXJzaW9ufSB0byAke2xhdGVzdFZlcnNpb259LmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZml4THpEcmlmdCh0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBGaXggZHJpZnQgaW4gZGVwbG95ZWQgbGFuZGluZyB6b25lLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVwbG95T3VUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBPdU5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVwbG95IHRvcC1sZXZlbCBPVSAke091TmFtZX0uYDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVJYW1Vc2VyVGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgSWFtVXNlck5hbWUpIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gUmVtb3ZlIElBTSB1c2VyICR7SWFtVXNlck5hbWV9YDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayh0YXNrTnVtYmVyLCB3YXlwb2ludCwgSWFtVXNlck5hbWUsIElhbVVzZXJBcGlLZXlJZCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBSZW1vdmUgSUFNIHVzZXIgJHtJYW1Vc2VyTmFtZX0gQVBJIGtleTogJHtJYW1Vc2VyQXBpS2V5SWR9YDtcbiAgICByZXR1cm4gdGFzaztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVWcGModGFza051bWJlciwgd2F5cG9pbnQsIHJlZ2lvbikge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBEZWxldGUgVlBDIGluIHRoZSAke3JlZ2lvbn0gcmVnaW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRWMyKHRhc2tOdW1iZXIsIHdheXBvaW50LCByZWdpb24pIHtcbiAgICBjb25zdCB0YXNrID0gYCR7d2F5cG9pbnR9IC0gVGFzayAke3Rhc2tOdW1iZXJ9IC0gRGVsZXRlIFZQQyBpbiB0aGUgJHtyZWdpb259IHJlZ2lvbi5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UodGFza051bWJlciwgd2F5cG9pbnQsIHNlcnZpY2VOYW1lKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEVuYWJsZSB0aGUgQVdTIHNlcnZpY2UgJHtzZXJ2aWNlTmFtZX0gd2l0aGluIHlvdXIgQVdTIE9yZ2FuaXphdGlvbmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2UodGFza051bWJlciwgd2F5cG9pbnQsIHNlcnZpY2VOYW1lKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIERlbGVnYXRlIHRoZSBBV1Mgc2VydmljZSAke3NlcnZpY2VOYW1lfSB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uIHRvIGEgbWVtYmVyIGFjY291bnRgO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUF3c0N1cih0YXNrTnVtYmVyLCB3YXlwb2ludCkge1xuICAgIGNvbnN0IHRhc2sgPSBgJHt3YXlwb2ludH0gLSBUYXNrICR7dGFza051bWJlcn0gLSBFbmFibGUgYW5kIGNyZWF0ZSBhIENvc3QgYW5kIFV0aWxpemF0aW9uIFJlcG9ydCAoQ1VSKSBpbiB0aGUgYmlsbGluZyBjb25zb2xlLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV2aWV3QWNjb3VudEVtYWlsQWRkcmVzc2VzKHRhc2tOdW1iZXIsIHdheXBvaW50KSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIFJldmlldyBhbmQgdmFsaWRhdGUgeW91ciBlbWFpbCBhZGRyZXNzZXMgYW5kIHRoZWlyIGRvbWFpbnMgZm9yIHRoZSByb290IHVzZXIgYWRtaW5pc3RyYXRvciBmb3IgbWFuYWdlbWVudCBhbmQgYWxsIG1lbWJlciBhY2NvdW50cy5gO1xuICAgIHJldHVybiB0YXNrO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuYWJsZVBvbGljeVR5cGVUYXNrKHRhc2tOdW1iZXIsIHdheXBvaW50LCBwb2xpY3lUeXBlKSB7XG4gICAgY29uc3QgdGFzayA9IGAke3dheXBvaW50fSAtIFRhc2sgJHt0YXNrTnVtYmVyfSAtIEVuYWJsZSB0aGUgcG9saWN5IHR5cGUgJHtwb2xpY3lUeXBlfSB3aXRoaW4geW91ciBBV1MgT3JnYW5pemF0aW9uLmA7XG4gICAgcmV0dXJuIHRhc2s7XG59XG4iLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gcmVxdWlyZShcImZzXCIpOyIsImltcG9ydCB7IGRlZmluZUFjY291bnRUeXBlIH0gZnJvbSAnLi9zcmMvYWN0aW9ucy9kZWZpbmUtYWNjb3VudC10eXBlLmpzJztcbmltcG9ydCBjaGVja0lhbVVzZXJzIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2staWFtLXVzZXJzLmpzJztcbmltcG9ydCBnZXRFbmFibGVkT3JnUG9saWN5VHlwZXMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctcG9saWN5LXR5cGVzLmpzJztcbmltcG9ydCBnZXRFbmFibGVkT3JnU2VydmljZXMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtZW5hYmxlZC1vcmctc2VydmljZXMuanMnO1xuaW1wb3J0IGdldE9yZ0Nsb3VkRm9ybWF0aW9uIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stb3JnLWNsb3VkZm9ybWF0aW9uLmpzJztcbmltcG9ydCBnZXRJZGNJbmZvIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LWlkYy1pbmZvLmpzJztcbmltcG9ydCBnZXRPcmdEZXRhaWxzIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LW9yZy1kZXRhaWxzLmpzJztcbmltcG9ydCBnZXRPcmdUb3BMZXZlbE91cyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctb3VzLmpzJztcbmltcG9ydCBnZXRBbGxSZWdpb25zIGZyb20gJy4vc3JjL2FjdGlvbnMvZ2V0LXJlZ2lvbnMuanMnO1xuaW1wb3J0IGNoZWNrRWMyRXhpc3RzIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stZWMyLWV4aXN0ZW5jZS5qcyc7XG5pbXBvcnQgY2hlY2tWcGNFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay12cGMtZXhpc3RlbmNlLmpzJztcbmltcG9ydCBjaGVja0Nsb3VkVHJhaWxFeGlzdHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1jbG91ZHRyYWlsLWV4aXN0ZW5jZS5qcyc7XG5pbXBvcnQgZ2V0T3JnRGFBY2NvdW50cyBmcm9tICcuL3NyYy9hY3Rpb25zL2dldC1vcmctZGEtYWNjb3VudHMuanMnO1xuaW1wb3J0IGNoZWNrQ29uZmlnRXhpc3RzIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stY29uZmlnLWV4aXN0ZW5jZS5qcyc7XG5pbXBvcnQgZ2V0T3JnTWVtYmVyQWNjb3VudHMgZnJvbSAnLi9zcmMvYWN0aW9ucy9nZXQtb3JnLW1lbWJlci1hY2NvdW50cy5qcyc7XG5pbXBvcnQgZ2V0Q29udHJvbFRvd2VyIGZyb20gJy4vc3JjL2FjdGlvbnMvY2hlY2stY29udHJvbC10b3dlci5qcyc7XG5pbXBvcnQgY2hlY2tMZWdhY3lDdXIgZnJvbSAnLi9zcmMvYWN0aW9ucy9jaGVjay1sZWdhY3ktY3VyLmpzJztcbmltcG9ydCAqIGFzIHRhc2tzIGZyb20gJy4vc3JjL2FjdGlvbnMvdGFza3MuanMnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuY29uc3QgbWFpbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCByZXBvcnRGaWxlID0gXCIuL1BhdGhmaW5kZXIudHh0XCI7XG4gICAgbGV0IGRhdGVUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCByZWdpb24gPSBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnO1xuICAgIGNvbnN0IGFsbFJlZ2lvbnMgPSBhd2FpdCBnZXRBbGxSZWdpb25zKCk7XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3ZlcmluZyB5b3VyIEFXUyBlbnZpcm9ubWVudC4uLi5cIik7XG4gICAgY29uc3QgYWNjb3VudFR5cGUgPSBhd2FpdCBkZWZpbmVBY2NvdW50VHlwZShyZWdpb24pO1xuICAgIGZzLndyaXRlRmlsZVN5bmMocmVwb3J0RmlsZSwgXCJDbG91ZCBGb3VuZGF0aW9ucyAtIFBhdGhmaW5kZXJcIik7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbkdlbmVyYXRlZCBvbjogJHtkYXRlVGltZS50b1VUQ1N0cmluZygpfSBcXG5cXG5gKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgICBNQU5BR0VNRU5UIEFDQ09VTlRgKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBBQ0NPVU5UIFRZUEVcXG5gKTtcbiAgICBpZiAoYWNjb3VudFR5cGUpIHtcbiAgICAgICAgY29uc29sZS5kaXIoYWNjb3VudFR5cGUsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSXMgaW4gQVdTIE9yZ2FuaXphdGlvbjogJHthY2NvdW50VHlwZS5pc0luT3JnYW5pemF0aW9ufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBc3Nlc3NpbmcgQVdTIE1hbmFnZW1lbnQgQWNjb3VudDogJHthY2NvdW50VHlwZS5pc01hbmFnZW1lbnRBY2NvdW50fWApO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkRpc2NvdmVyaW5nIElBTSBVc2Vycy4uLi5cIik7XG4gICAgY29uc3QgaWFtVXNlclJlc3VsdCA9IGF3YWl0IGNoZWNrSWFtVXNlcnMoKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuSUFNIFVTRVJTIENIRUNLXFxuYCk7XG4gICAgaWYgKGlhbVVzZXJSZXN1bHQgJiYgaWFtVXNlclJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUuZGlyKGlhbVVzZXJSZXN1bHQsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBpYW1Vc2VyIG9mIGlhbVVzZXJSZXN1bHQpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElBTSBVc2VyOiAke2lhbVVzZXIudXNlck5hbWV9YCk7XG4gICAgICAgICAgICBpZiAoaWFtVXNlci5hY2Nlc3NLZXlJZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgVXNlciBBUEkgS2V5IElEOiAke2lhbVVzZXIuYWNjZXNzS2V5SWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIElBTSBVc2VycyBmb3VuZC5gKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJEaXNjb3ZlcmluZyBFQzIgaW5zdGFuY2VzIGFjcm9zcyBhbGwgQVdTIFJlZ2lvbnMuLi4uXCIpO1xuICAgIGNvbnN0IGVjMkNoZWNrID0gYXdhaXQgY2hlY2tFYzJFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkVDMiBJTlNUQU5DRSBDSEVDS1xcbmApO1xuICAgIGlmIChlYzJDaGVjayAmJiBlYzJDaGVjay5maW5kKHBhcmFtID0+IHBhcmFtLmVjMkZvdW5kID09PSB0cnVlKSkge1xuICAgICAgICBjb25zb2xlLmRpcihlYzJDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGVjMiBvZiBlYzJDaGVjaykge1xuICAgICAgICAgICAgaWYgKGVjMi5lYzJGb3VuZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7ZWMyLnJlZ2lvbn0gLSBmb3VuZCBFQzIgSW5zdGFuY2UocykuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIEVDMiBpbnN0YW5jZXMgZm91bmQuYCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiRGlzY292ZXJpbmcgVlBDcyBhY3Jvc3MgYWxsIEFXUyBSZWdpb25zLi4uLlwiKTtcbiAgICBjb25zdCB2cGNDaGVjayA9IGF3YWl0IGNoZWNrVnBjRXhpc3RzKGFsbFJlZ2lvbnMpO1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5WUEMgQ0hFQ0tcXG5gKTtcbiAgICBpZiAodnBjQ2hlY2sgJiYgdnBjQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLmRpcih2cGNDaGVjaywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IHZwY0ZpbmQgb2YgdnBjQ2hlY2spIHtcbiAgICAgICAgICAgIGlmICh2cGNGaW5kLnZwY0ZvdW5kKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHt2cGNGaW5kLnJlZ2lvbn0gLSBmb3VuZCBWUEMocykuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIFZQQ3MgZm91bmQuYCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiRGlzY292ZXJpbmcgQVdTIENvbmZpZyBjb25maWd1cmF0aW9ucyBhY3Jvc3MgYWxsIEFXUyBSZWdpb25zLi4uLlwiKTtcbiAgICBjb25zdCBjbG91ZFRyYWlsQ2hlY2sgPSBhd2FpdCBjaGVja0Nsb3VkVHJhaWxFeGlzdHMoYWxsUmVnaW9ucyk7XG4gICAgY29uc3QgY29uZmlnQ2hlY2sgPSBhd2FpdCBjaGVja0NvbmZpZ0V4aXN0cyhhbGxSZWdpb25zKTtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIENPTkZJRyBDSEVDS1xcbmApO1xuICAgIGlmIChjb25maWdDaGVjayAmJiBjb25maWdDaGVjay5maW5kKHBhcmFtID0+IHBhcmFtLmNvbmZpZ1JlY29yZGVyRm91bmQgPT09IHRydWUpKSB7XG4gICAgICAgIGNvbnNvbGUuZGlyKGNvbmZpZ0NoZWNrLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGZvciAoY29uc3QgY29uZmlnRmluZCBvZiBjb25maWdDaGVjaykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZ0ZpbmQuY29uZmlnUmVjb3JkZXJGb3VuZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7Y29uZmlnRmluZC5yZWdpb259IC0gQ29uZmlnIFJlY29yZGVyIGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uZmlnRmluZC5jb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCkge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7Y29uZmlnRmluZC5yZWdpb259IC0gQ29uZmlnIERlbGl2ZXJ5IENoYW5uZWwgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gQVdTIENvbmZpZyByZXNvdXJjZSBkaXNjb3ZlcmVkYCk7XG4gICAgfVxuICAgIC8vIGFsbCBjYWxscyByZXF1aXJlIGFuIEFXUyBPcmdhbml6YXRpb24gZXhpc3QgYW5kIHRoZSBhY2NvdW50IGJlIGEgbWFuYWdlbWVudCBhY2NvdW50XG4gICAgaWYgKGFjY291bnRUeXBlLmlzSW5Pcmdhbml6YXRpb24gJiYgYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudCkge1xuICAgICAgICBjb25zdCBvcmdEZXRhaWxzID0gYXdhaXQgZ2V0T3JnRGV0YWlscygndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ0RldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgbGVnYWN5Q3VyQ2hlY2sgPSBhd2FpdCBjaGVja0xlZ2FjeUN1cigndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnN0IGVuYWJsZU9yZ1BvbGljaWVzQ2hlY2sgPSBhd2FpdCBnZXRFbmFibGVkT3JnUG9saWN5VHlwZXMoJ3VzLWVhc3QtMScpO1xuICAgICAgICBjb25zb2xlLmRpcihlbmFibGVPcmdQb2xpY2llc0NoZWNrLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IG9yZ0VuYWJsZWRTZXJ2aWNlcyA9IGF3YWl0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcygndXMtZWFzdC0xJyk7XG4gICAgICAgIGNvbnNvbGUuZGlyKG9yZ0VuYWJsZWRTZXJ2aWNlcywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBjZm5PcmdTdGF0dXMgPSBhd2FpdCBnZXRPcmdDbG91ZEZvcm1hdGlvbihyZWdpb24pO1xuICAgICAgICBjb25zb2xlLmRpcihjZm5PcmdTdGF0dXMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgY29udHJvbFRvd2VyRGV0YWlscyA9IGF3YWl0IGdldENvbnRyb2xUb3dlcihyZWdpb24pO1xuICAgICAgICBjb25zdCBpZGNJbmZvcm1hdGlvbiA9IGF3YWl0IGdldElkY0luZm8oYWxsUmVnaW9ucyk7XG4gICAgICAgIGNvbnNvbGUuZGlyKGlkY0luZm9ybWF0aW9uLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IG9yZ0RlbEFkbWluRGV0YWlscyA9IGF3YWl0IGdldE9yZ0RhQWNjb3VudHMoKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnRGVsQWRtaW5EZXRhaWxzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IG9yZ01lbWJlckFjY291bnREZXRhaWxzID0gYXdhaXQgZ2V0T3JnTWVtYmVyQWNjb3VudHMoKTtcbiAgICAgICAgY29uc29sZS5kaXIob3JnTWVtYmVyQWNjb3VudERldGFpbHMsIHsgZGVwdGg6IG51bGwsIGNvbG9yczogdHJ1ZSB9KTtcbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIE1BTkFHRU1FTlQgQUNDT1VOVCAvLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5NQU5BR0VNRU5UIEFDQ09VTlQgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBtZ3RUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3QgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCA9IFwiTWFuYWdlbWVudCBBY2NvdW50XCI7XG4gICAgICAgIGlmIChpYW1Vc2VyUmVzdWx0ICYmIGlhbVVzZXJSZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpYW1Vc2VyIG9mIGlhbVVzZXJSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MucmVtb3ZlSWFtVXNlclRhc2sobWd0VGFza051bWJlciwgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCwgaWFtVXNlci51c2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIG1ndFRhc2tOdW1iZXIrKztcbiAgICAgICAgICAgICAgICBpZiAoaWFtVXNlci5hY2Nlc3NLZXlJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MucmVtb3ZlSWFtVXNlckFwaUtleVRhc2sobWd0VGFza051bWJlciwgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCwgaWFtVXNlci51c2VyTmFtZSwgaWFtVXNlci5hY2Nlc3NLZXlJZCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWMyQ2hlY2sgJiYgZWMyQ2hlY2suZmluZChwYXJhbSA9PiBwYXJhbS5lYzJGb3VuZCA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWMyIG9mIGVjMkNoZWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVjMi5lYzJGb3VuZCAmJiBlYzIucmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxldGVFYzIobWd0VGFza051bWJlciwgbWFuYWdlbWVudEFjY291bnRXYXlwb2ludCwgZWMyLnJlZ2lvbik7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodnBjQ2hlY2sgJiYgdnBjQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB2cGNGaW5kIG9mIHZwY0NoZWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZwY0ZpbmQudnBjRm91bmQgJiYgdnBjRmluZC5yZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGV0ZVZwYyhtZ3RUYXNrTnVtYmVyLCBtYW5hZ2VtZW50QWNjb3VudFdheXBvaW50LCB2cGNGaW5kLnJlZ2lvbik7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgbWd0VGFza051bWJlcisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgICAgIEdPVkVSTkFOQ0VgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBQT0xJQ1kgVFlQRVNcXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgU2VydmljZSBDb250cm9sIFBvbGljaWVzIChTQ1ApIGVuYWJsZWQ6ICR7ZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBUYWcgUG9saWNpZXMgZW5hYmxlZDogJHtlbmFibGVPcmdQb2xpY2llc0NoZWNrLnRhZ1BvbGljeUVuYWJsZWR9YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEJhY2t1cCBQb2xpY2llcyBlbmFibGVkOiAke2VuYWJsZU9yZ1BvbGljaWVzQ2hlY2suYmFja3VwUG9saWN5RW5hYmxlZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gQ0xPVURGT1JNQVRJT05cXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENsb3VkRm9ybWF0aW9uIE9yZ2FuaXphdGlvbiBzdGFjayBzZXRzIHN0YXR1cyA6ICR7Y2ZuT3JnU3RhdHVzLnN0YXR1c31gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkNMT1VEVFJBSUwgQ0hFQ0tcXG5gKTtcbiAgICAgICAgaWYgKGNsb3VkVHJhaWxDaGVjayAmJiBjbG91ZFRyYWlsQ2hlY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS5kaXIoY2xvdWRUcmFpbENoZWNrLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGN0RmluZCBvZiBjbG91ZFRyYWlsQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBpZiAoY3RGaW5kLnRyYWlsRm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQ2xvdWRUcmFpbCBmb3VuZCBpbiAke2N0RmluZC5yZWdpb259YCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgSXMgT3JnYW5pemF0aW9uIFRyYWlsOiAke2N0RmluZC5pc09yZ1RyYWlsfWApO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgIElzIE11bHRpUmVnaW9uOiAke2N0RmluZC5pc011bHRpUmVnaW9ufWApO1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gQVdTIENsb3VkVHJhaWwgcmVzb3VyY2UgZGlzY292ZXJlZGApO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5HT1ZFUk5BTkNFIFNFUlZJQ0VTIEVOQUJMRUQgSU4gQVdTIE9SR0FOSVpBVElPTjpcXG5gKTtcbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENsb3VkVHJhaWxgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDb25maWdgKTtcbiAgICAgICAgfVxuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgR09WRVJOQU5DRSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuR09WRVJOQU5DRSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgY29uc3QgZ292V2F5cG9pbnQgPSBcIkdvdmVybmFuY2VcIjtcbiAgICAgICAgbGV0IGdvdlRhc2tOdW1iZXIgPSAxO1xuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UoZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiQVdTIENsb3VkVHJhaWxcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UoZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiQVdTIENvbmZpZ1wiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKGdvdlRhc2tOdW1iZXIsIGdvdldheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBnb3ZUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnRhZ1BvbGljeUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhnb3ZUYXNrTnVtYmVyLCBnb3ZXYXlwb2ludCwgXCJUYWcgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgZ292VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5iYWNrdXBQb2xpY3lFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2soZ292VGFza051bWJlciwgZ292V2F5cG9pbnQsIFwiQmFja3VwIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGdvdlRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICAgICAgICAgRklOQU5DSUFMIE1BTkFHRU1FTlRgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuTGVnYWN5IENVUmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJcyBsZWdhY3kgQ1VSIHNldHVwOiAke2xlZ2FjeUN1ckNoZWNrLmlzTGVnYWN5Q3VyU2V0dXB9YCk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBGSU5BTkNJQUwgTUFOQUdFTUVOVCAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQ0xPVUQgRklOQU5DSUFMIE1BTkFHRU1FTlQgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBmaW5UYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3QgZmluV2F5cG9pbnQgPSBcIkNsb3VkIEZpbmFuY2lhbCBNYW5hZ2VtZW50XCI7XG4gICAgICAgIGlmICghbGVnYWN5Q3VyQ2hlY2suaXNMZWdhY3lDdXJTZXR1cCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c0N1cihmaW5UYXNrTnVtYmVyLCBmaW5XYXlwb2ludCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgIE1VTFRJLUFDQ09VTlQgU1RSQVRFR1lgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBERVRBSUxTXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBPcmdhbml6YXRpb24gSWQ6ICR7b3JnRGV0YWlscy5pZH1gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIE9yZ2FuaXphdGlvbiBBUk46ICR7b3JnRGV0YWlscy5hcm59YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBPcmdhbml6YXRpb24gUm9vdCBPVSBJZDogJHtvcmdEZXRhaWxzLnJvb3RPdUlkfWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBDTE9VREZPUk1BVElPTlxcbmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgQ2xvdWRGb3JtYXRpb24gT3JnYW5pemF0aW9uIHN0YWNrIHNldHMgc3RhdHVzIDogJHtjZm5PcmdTdGF0dXMuc3RhdHVzfWApO1xuICAgICAgICBsZXQgdHJhbnNpdGlvbmFsRm91bmQsIHN1c3BlbmRlZEZvdW5kLCB3b3JrbG9hZHNGb3VuZCwgc2VjdXJpdHlGb3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAob3JnRGV0YWlscy5yb290T3VJZCkge1xuICAgICAgICAgICAgY29uc3Qgb3JnT3VzID0gYXdhaXQgZ2V0T3JnVG9wTGV2ZWxPdXMoJ3VzLWVhc3QtMScsIG9yZ0RldGFpbHMucm9vdE91SWQpO1xuICAgICAgICAgICAgY29uc29sZS5kaXIob3JnT3VzLCB7IGRlcHRoOiBudWxsLCBjb2xvcnM6IHRydWUgfSk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBUT1AtTEVWRUwgT1JHQU5JWkFUSU9OIFVOSVRTXFxuYCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBMaXN0IG9mIE9yZ2FuaXphdGlvbidzIHRvcC1sZXZlbCBPVXMgYW5kIEFXUyBhY2NvdW50czpgKTtcbiAgICAgICAgICAgIGlmIChvcmdPdXMgJiYgb3JnT3VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG91IG9mIG9yZ091cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3UubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3N1c3BlbmRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1c3BlbmRlZEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3UubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3RyYW5zaXRpb25hbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25hbEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3UubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3dvcmtsb2FkcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtsb2Fkc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3UubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3NlY3VyaXR5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdXJpdHlGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICBPcmdhbml6YXRpb25hbCBVbml0OiAke291Lm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICBPcmdhbml6YXRpb25hbCBVbml0IElkOiAke291LmlkfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3UuYWNjb3VudHMgJiYgb3UuYWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgIEFXUyBBY2NvdW50czpgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWNjb3VudCBvZiBvdS5hY2NvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgICAgICR7YWNjb3VudC5OYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgIEFXUyBBY2NvdW50czogTm9uZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTm8gdG9wIGxldmVsIE9VcyBmb3VuZC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBNRU1CRVIgQUNDT1VOVFNcXG5gKTtcbiAgICAgICAgaWYgKG9yZ01lbWJlckFjY291bnREZXRhaWxzICYmIG9yZ01lbWJlckFjY291bnREZXRhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWVtYmVyQWNjb3VudCBvZiBvcmdNZW1iZXJBY2NvdW50RGV0YWlscykge1xuICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFjY291bnQ6ICR7bWVtYmVyQWNjb3VudC5hY2NvdW50TmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBY2NvdW50IEVtYWlsOiAke21lbWJlckFjY291bnQuYWNjb3VudEVtYWlsfVxcbmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYE5vIG1lbWJlciBhY2NvdW50cyBmb3VuZCB3aGljaCBpcyBhbWF6aW5nIGFzIHRoaXMgaXMgcnVubmluZyBmcm9tIG9uZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIE9SR0FOSVpBVElPTiBFTkFCTEVEIFNFUlZJQ0VTXFxuYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIFRoZSBmb2xsb3dpbmcgQVdTIFNlcnZpY2VzIGFyZSBlbmFibGVkIHdpdGhpbiB5b3VyIEFXUyBPcmdhbml6YXRpb246YCk7XG4gICAgICAgIGZvciAoY29uc3Qgb3JnU2VydmljZSBvZiBvcmdFbmFibGVkU2VydmljZXMpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgJHtvcmdTZXJ2aWNlLnNlcnZpY2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGlkZW50aXR5RGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBzZWN1cml0eUh1YkRlbGVnYXRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgZ3VhcmREdXR5RGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBjb25maWdEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlhbUFjY2Vzc0FuYWx5emVyRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBpcGFtRGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBhY2NvdW50RGVsZWdhdGVkID0gZmFsc2U7XG4gICAgICAgIGxldCBiYWNrdXBEZWxlZ2F0ZWQgPSBmYWxzZTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBPUkdBTklaQVRJT04gSU5URUdSQVRFRCBTRVJWSUNFIFJFR0lTVEVSRUQgREVMRUdBVEVEIEFETUlOU1xcbmApO1xuICAgICAgICBpZiAob3JnRGVsQWRtaW5EZXRhaWxzICYmIG9yZ0RlbEFkbWluRGV0YWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2Ygb3JnRGVsQWRtaW5EZXRhaWxzKSB7XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQWNjb3VudDogJHthY2NvdW50LmFjY291bnROYW1lfWApO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50LnNlcnZpY2VzICYmIGFjY291bnQuc2VydmljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBEZWxlZ2F0ZWQgU2VydmljZXM6YCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3J2IG9mIGFjY291bnQuc2VydmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICAgJHtzcnYuU2VydmljZVByaW5jaXBhbH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ3NlY3VyaXR5aHViLmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdXJpdHlIdWJEZWxlZ2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNydi5TZXJ2aWNlUHJpbmNpcGFsID09PSAnZ3VhcmRkdXR5LmFtYXpvbmF3cy5jb20nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmREdXR5RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ3Nzby5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ0RlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdhY2Nlc3MtYW5hbHl6ZXIuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpYW1BY2Nlc3NBbmFseXplckRlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3J2LlNlcnZpY2VQcmluY2lwYWwgPT09ICdzdG9yYWdlLWxlbnMuczMuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2lwYW0uYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcGFtRGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2FjY291bnQuYW1hem9uYXdzLmNvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50RGVsZWdhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcnYuU2VydmljZVByaW5jaXBhbCA9PT0gJ2JhY2t1cC5hbWF6b25hd3MuY29tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2t1cERlbGVnYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIE5vIGRlbGVnYXRlZCBhZG1pbiBhY2NvdW50cyBpbiBBV1MgT3JnYW5pemF0aW9uYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8vLy8gU0VUIFRIRSBCQUNLTE9HIFRBU0sgRk9SIE1VTFRJLUFDQ09VTlQgU1RSQVRFR1kgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbk1VTFRJLUFDQ09VTlQgU1RSQVRFR1kgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBtYXNUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgbGV0IG1hc1dheXBvaW50ID0gJ011bHRpLUFjY291bnQgU3RyYXRlZ3knO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MucmV2aWV3QWNjb3VudEVtYWlsQWRkcmVzc2VzKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50KTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIGlmICghZW5hYmxlT3JnUG9saWNpZXNDaGVjay5zY3BFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlUG9saWN5VHlwZVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYW5zaXRpb25hbEZvdW5kKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlRyYW5zaXRpb25hbFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN1c3BlbmRlZEZvdW5kKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIlN1c3BlbmRlZFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXdvcmtsb2Fkc0ZvdW5kKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVwbG95T3VUYXNrKG1hc1Rhc2tOdW1iZXIsIG1hc1dheXBvaW50LCBcIldvcmtsb2Fkc1wiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG1hc1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlY3VyaXR5Rm91bmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZXBsb3lPdVRhc2sobWFzVGFza051bWJlciwgbWFzV2F5cG9pbnQsIFwiU2VjdXJpdHlcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBtYXNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAgICAgICAgICAgICAgICAgTEFORElORyBaT05FYCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkFXUyBDT05UUk9MIFRPV0VSXFxuYCk7XG4gICAgICAgIGlmIChjb250cm9sVG93ZXJEZXRhaWxzLmNvbnRyb2xUb3dlclJlZ2lvbikge1xuICAgICAgICAgICAgY29uc29sZS5kaXIoY29udHJvbFRvd2VyRGV0YWlscywgeyBkZXB0aDogbnVsbCwgY29sb3JzOiB0cnVlIH0pO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQ29udHJvbCBUb3dlciBob21lIHJlZ2lvbjogJHtjb250cm9sVG93ZXJEZXRhaWxzLmNvbnRyb2xUb3dlclJlZ2lvbn1gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIENvbnRyb2wgVG93ZXIgc3RhdHVzOiAke2NvbnRyb2xUb3dlckRldGFpbHMuc3RhdHVzfWApO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQ29udHJvbCBUb3dlciBMYW5kaW5nIFpvbmUgdmVyc2lvbjogJHtjb250cm9sVG93ZXJEZXRhaWxzLmRlcGxveWVkVmVyc2lvbn1gKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIExhdGVzdCBhdmFpbGFibGUgdmVyc2lvbjogJHtjb250cm9sVG93ZXJEZXRhaWxzLmxhdGVzdEF2YWlsYWJsZVZlcnNpb259YCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBEcmlmdCBTdGF0dXM6ICR7Y29udHJvbFRvd2VyRGV0YWlscy5kcmlmdFN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDb250cm9sIFRvd2VyIGlzIG5vdCBkZXBsb3llZCBpbiB0aGUgQVdTIE9yZ2FuaXphdGlvbmApO1xuICAgICAgICB9XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBMQU5ESU5HIFpPTkUgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcbkxBTkRJTkcgWk9ORSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IGx6VGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IGx6V2F5cG9pbnQgPSBcIkxhbmRpbmcgWm9uZVwiO1xuICAgICAgICBpZiAoY29udHJvbFRvd2VyRGV0YWlscy5jb250cm9sVG93ZXJSZWdpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlcGxveUNvbnRyb2xUb3dlclRhc2sobHpUYXNrTnVtYmVyLCBseldheXBvaW50KTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGx6VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cm9sVG93ZXJEZXRhaWxzLmRyaWZ0U3RhdHVzID09PSAnRFJJRlRFRCcpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5maXhMekRyaWZ0KGx6VGFza051bWJlciwgbHpXYXlwb2ludCk7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBselRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbFRvd2VyRGV0YWlscy5kZXBsb3llZFZlcnNpb24gIT09IGNvbnRyb2xUb3dlckRldGFpbHMubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbikge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFZlcnNpb24gPSBjb250cm9sVG93ZXJEZXRhaWxzLmRlcGxveWVkVmVyc2lvbiA/PyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbGF0ZXN0VmVyc2lvbiA9IGNvbnRyb2xUb3dlckRldGFpbHMubGF0ZXN0QXZhaWxhYmxlVmVyc2lvbiA/PyBcIlwiO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLnVwZGF0ZUx6Q29udHJvbFRvd2VyVGFzayhselRhc2tOdW1iZXIsIGx6V2F5cG9pbnQsIGN1cnJlbnRWZXJzaW9uLCBsYXRlc3RWZXJzaW9uKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGx6VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ21lbWJlci5vcmcuc3RhY2tzZXRzLmNsb3VkZm9ybWF0aW9uLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobHpUYXNrTnVtYmVyLCBseldheXBvaW50LCBcIkFXUyBDbG91ZEZvcm1hdGlvblwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGx6VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgICAgSURFTlRJVFlgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIElBTSBJREVOVElUWSBDRU5URVJcXG5gKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgSWRDIFJlZ2lvbjogJHtpZGNJbmZvcm1hdGlvbi5yZWdpb259YCk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElkQyBBUk46ICR7aWRjSW5mb3JtYXRpb24uYXJufWApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBJZEMgSW5zdGFuY2UgSWQ6ICR7aWRjSW5mb3JtYXRpb24uaWR9YCk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBJREVOVElUWSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuSURFTlRJVFkgUkVDT01NRU5ERUQgVEFTS1M6YCk7XG4gICAgICAgIGxldCBzc29UYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3Qgc3NvV2F5cG9pbnQgPSAnSWRlbnRpdHknO1xuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzc28uYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzc29UYXNrTnVtYmVyLCBzc29XYXlwb2ludCwgXCJBV1MgSUFNIElkZW50aXR5IENlbnRlclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNzb1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlkZW50aXR5RGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc3NvVGFza051bWJlciwgc3NvV2F5cG9pbnQsIFwiQVdTIElBTSBJZGVudGl0eSBDZW50ZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzc29UYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhzc29UYXNrTnVtYmVyLCBzc29XYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc3NvVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgICAgU0VDVVJJVFlgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQVdTIFNFQ1VSSVRZIFNFUlZJQ0VTIEVOQUJMRUQgSU4gQVdTIE9SR0FOSVpBVElPTjpcXG5gKTtcbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdndWFyZGR1dHkuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBV1MgR3VhcmREdXR5YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBTZWN1cml0eSBIdWJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY2Vzcy1hbmFseXplci5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIElBTSBBY2Nlc3MgQW5hbHl6ZXJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ21hY2llLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgTWFjaWVgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ3N0b3JhZ2UtbGVucy5zMy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFtYXpvbiBTMyBTdG9yYWdlIExlbnNgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2luc3BlY3RvcjIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICBBbWF6b24gSW5zcGVjdG9yYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgQVdTIENsb3VkVHJhaWxgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2NvbmZpZy5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gIEFXUyBDb25maWdgKTtcbiAgICAgICAgfVxuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgU0VDVVJJVFkgLy8vLy9cbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcblxcblNFQ1VSSVRZIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgc2VjVGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IHNlY1dheXBvaW50ID0gXCJTZWN1cml0eVwiO1xuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIlNlcnZpY2UgQ29udHJvbCBQb2xpY3lcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnZ3VhcmRkdXR5LmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIEd1YXJkRHV0eVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdzZWN1cml0eWh1Yi5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKHNlY1Rhc2tOdW1iZXIsIHNlY1dheXBvaW50LCBcIkFXUyBTZWN1cml0eUh1YlwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdhY2Nlc3MtYW5hbHl6ZXIuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShzZWNUYXNrTnVtYmVyLCBzZWNXYXlwb2ludCwgXCJBV1MgSUFNIEFjY2VzcyBBbmFseXplclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdjbG91ZHRyYWlsLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIENsb3VkVHJhaWxcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnY29uZmlnLmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIENvbmZpZ1wiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlY3VyaXR5SHViRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiU2VjdXJpdHkgSHViXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZ3VhcmREdXR5RGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiR3VhcmREdXR5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29uZmlnRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIENvbmZpZ1wiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHNlY1Rhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlhbUFjY2Vzc0FuYWx5emVyRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiQVdTIElBTSBBY2Nlc3MgQW5hbHl6ZXJcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke21lc3NhZ2V9YCk7XG4gICAgICAgICAgICBzZWNUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uoc2VjVGFza051bWJlciwgc2VjV2F5cG9pbnQsIFwiUzMgU3RvcmFnZSBMZW5zXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgc2VjVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgICAgTkVUV09SS2ApO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqYCk7XG4gICAgICAgIC8vLy8vIFNFVCBUSEUgQkFDS0xPRyBUQVNLIEZPUiBORVRXT1JLIC8vLy8vXG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG5ORVRXT1JLIFJFQ09NTUVOREVEIFRBU0tTOmApO1xuICAgICAgICBsZXQgbmV0VGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IG5ldHdvcmtXYXlwb2ludCA9ICdOZXR3b3JrJztcbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnZ3VhcmRkdXR5LmFtYXpvbmF3cy5jb20nKSkge1xuICAgICAgICAgICAgY29uc3QgbmV0R3VhcmREdXR5RW5hYmxlTWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UobmV0VGFza051bWJlciwgbmV0d29ya1dheXBvaW50LCBcIkFXUyBHdWFyZER1dHlcIik7XG4gICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuICAke25ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBuZXRUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmdFbmFibGVkU2VydmljZXMuZmluZChwYXJhbSA9PiBwYXJhbS5zZXJ2aWNlID09PSAnaXBhbS5hbWF6b25hd3MuY29tJykpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVBd3NPcmdhbml6YXRpb25TZXJ2aWNlKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJBV1MgSVBBTVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdyYW0uYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShuZXRUYXNrTnVtYmVyLCBuZXR3b3JrV2F5cG9pbnQsIFwiQVdTIFJlc291cmNlIEFjY2VzcyBNYW5hZ2VyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXBhbURlbGVnYXRlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJBV1MgSVBBTVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG5ldFRhc2tOdW1iZXIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVuYWJsZU9yZ1BvbGljaWVzQ2hlY2suc2NwRW5hYmxlZCkge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHRhc2tzLmVuYWJsZVBvbGljeVR5cGVUYXNrKG5ldFRhc2tOdW1iZXIsIG5ldHdvcmtXYXlwb2ludCwgXCJTZXJ2aWNlIENvbnRyb2wgUG9saWN5XCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgbmV0VGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgICAgIE9CU0VSVkFCSUxJVFlgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgT0JTRVJWQUJJTElUWSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuT0JTRVJWQUJJTElUWSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IG9iVGFza051bWJlciA9IDE7XG4gICAgICAgIGNvbnN0IG9iV2F5cG9pbnQgPSAnT2JzZXJ2YWJpbGl0eSc7XG4gICAgICAgIGlmICghb3JnRW5hYmxlZFNlcnZpY2VzLmZpbmQocGFyYW0gPT4gcGFyYW0uc2VydmljZSA9PT0gJ2FjY291bnQuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShvYlRhc2tOdW1iZXIsIG9iV2F5cG9pbnQsIFwiQWNjb3VudCBNYW5hZ2VyXCIpO1xuICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgJHttZXNzYWdlfWApO1xuICAgICAgICAgICAgb2JUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY2NvdW50RGVsZWdhdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZGVsZWdhdGVBZG1pbmlzdHJhdGlvbkF3c1NlcnZpY2Uob2JUYXNrTnVtYmVyLCBvYldheXBvaW50LCBcIkFjY291bnQgTWFuYWdlclwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIG9iVGFza051bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG5cXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbiAgICAgICAgICAgICAgIEJBQ0tVUCBBTkQgUkVDT1ZFUllgKTtcbiAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMocmVwb3J0RmlsZSwgYFxcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKmApO1xuICAgICAgICAvLy8vLyBTRVQgVEhFIEJBQ0tMT0cgVEFTSyBGT1IgQkFDS1VQIEFORCBSRUNPVkVSWSAvLy8vL1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuQkFDS1VQIEFORCBSRUNPVkVSWSBSRUNPTU1FTkRFRCBUQVNLUzpgKTtcbiAgICAgICAgbGV0IGJhY2tUYXNrTnVtYmVyID0gMTtcbiAgICAgICAgY29uc3QgYmFja3VwV2F5cG9pbnQgPSAnQmFja3VwIGFuZCBSZWNvdmVyeSc7XG4gICAgICAgIC8vIGNoZWNrIGlmIEFXUyBCYWNrdXAgaXMgZW5hYmxlZFxuICAgICAgICBpZiAoIW9yZ0VuYWJsZWRTZXJ2aWNlcy5maW5kKHBhcmFtID0+IHBhcmFtLnNlcnZpY2UgPT09ICdiYWNrdXAuYW1hem9uYXdzLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgdGFza3MuZW5hYmxlQXdzT3JnYW5pemF0aW9uU2VydmljZShiYWNrVGFza051bWJlciwgYmFja3VwV2F5cG9pbnQsIFwiQVdTIEJhY2t1cFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGJhY2tUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFiYWNrdXBEZWxlZ2F0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5kZWxlZ2F0ZUFkbWluaXN0cmF0aW9uQXdzU2VydmljZShiYWNrVGFza051bWJlciwgYmFja3VwV2F5cG9pbnQsIFwiQVdTIEJhY2t1cFwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGJhY2tUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLmJhY2t1cFBvbGljeUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhiYWNrVGFza051bWJlciwgYmFja3VwV2F5cG9pbnQsIFwiQmFja3VwIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGJhY2tUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVPcmdQb2xpY2llc0NoZWNrLnNjcEVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCB0YXNrcy5lbmFibGVQb2xpY3lUeXBlVGFzayhiYWNrVGFza051bWJlciwgYmFja3VwV2F5cG9pbnQsIFwiU2VydmljZSBDb250cm9sIFBvbGljeVwiKTtcbiAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIGBcXG4gICR7bWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGJhY2tUYXNrTnVtYmVyKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYWNjb3VudFR5cGUuaXNJbk9yZ2FuaXphdGlvbiAmJiAhYWNjb3VudFR5cGUuaXNNYW5hZ2VtZW50QWNjb3VudCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ1xcbldBUk5JTkc6IFlvdSBhcmUgcnVubmluZyBQYXRoZmluZGVyIGZyb20gYW4gYWNjb3VudCB0aGF0IGlzIGEgbWVtYmVyIG9mIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi4gUGxlYXNlIHJ1biB0aGUgc29sdXRpb24gZnJvbSB5b3VyIEFXUyBNYW5hZ2VtZW50IGFjY291bnQuJztcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnXFxuV0FSTklORzogWW91IGFyZSBydW5uaW5nIFBhdGhmaW5kZXIgZnJvbSBhbiBhY2NvdW50IHRoYXQgbm90IHBhcnQgb2YgYW4gQVdTIE9yZ2FuaXphdGlvbi4gVGhpcyBhY2NvdW50IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHN0YW5kYWxvbmUgYWNjb3VudC4nO1xuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKHJlcG9ydEZpbGUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBmcy5hcHBlbmRGaWxlU3luYyhyZXBvcnRGaWxlLCBgXFxuXFxuXFxuICBFTkQgUkVWSUVXYCk7XG59O1xubWFpbigpO1xuIiwiaW1wb3J0IHsgRUMyQ2xpZW50LCBEZXNjcmliZVJlZ2lvbnNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldEFsbFJlZ2lvbnMoKSB7XG4gICAgLy8gZ3JhYmJpbmcgYWxsIHJlZ2lvbnMgZnJvbSB1cy1lYXN0LTFcbiAgICBjb25zdCBlYzJDbGllbnQgPSBuZXcgRUMyQ2xpZW50KHsgcmVnaW9uOiBcInVzLWVhc3QtMVwiIH0pO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaWJlUmVnaW9uc0NvbW1hbmQgPSBuZXcgRGVzY3JpYmVSZWdpb25zQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoZGVzY3JpYmVSZWdpb25zQ29tbWFuZCk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCByZWdpb24gb2YgcmVzcG9uc2UuUmVnaW9ucyB8fCBbXSkge1xuICAgICAgICAgICAgcmVnaW9ucy5wdXNoKHJlZ2lvbi5SZWdpb25OYW1lIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWdpb25zO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJldHJpZXZpbmcgcmVnaW9uczpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBlYzJDbGllbnQuZGVzdHJveSgpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGdldEFsbFJlZ2lvbnM7XG4iLCJpbXBvcnQgeyBTVFNDbGllbnQsIEdldENhbGxlcklkZW50aXR5Q29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtc3RzXCI7XG5pbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBEZXNjcmliZU9yZ2FuaXphdGlvbkNvbW1hbmQsIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SWQocmVnaW9uKSB7XG4gICAgY29uc3Qgc3RzQ2xpZW50ID0gbmV3IFNUU0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnZXRDYWxsZXJJZGVudGl0eUNvbW1hbmQgPSBuZXcgR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgQWNjb3VudCA9IGF3YWl0IHN0c0NsaWVudC5zZW5kKGdldENhbGxlcklkZW50aXR5Q29tbWFuZCk7XG4gICAgICAgIHJldHVybiBBY2NvdW50LkFjY291bnQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBhY2NvdW50IElEOlwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbjtcbi8vIGZ1bmN0aW9uIGNoZWNraW5nIGlmIG1hbmFnZW1lbnQgYWNjb3VudCwgbWVtYmVyIGFjY291bnQsIG9yIHN0YW5kYWxvbmUgYWNjb3VudFxuZXhwb3J0IGNvbnN0IGRlZmluZUFjY291bnRUeXBlID0gYXN5bmMgKHJlZ2lvbikgPT4ge1xuICAgIGNvbnN0IG9yZ2FuaXphdGlvbnNDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgaXNJbk9yZ2FuaXphdGlvbiA9IGZhbHNlO1xuICAgIGxldCBpc01hbmFnZW1lbnRBY2NvdW50ID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VycmVudEFjY291bnRJZCA9IGF3YWl0IGdldEFjY291bnRJZChyZWdpb24pO1xuICAgICAgICBpZiAoY3VycmVudEFjY291bnRJZCkge1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlID0gYXdhaXQgb3JnYW5pemF0aW9uc0NsaWVudC5zZW5kKGRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCk7XG4gICAgICAgICAgICAvLyB0aGUgYWNjb3VudCBpcyBub3Qgc3RhbmRhbG9uZSBhbmQgcGFydCBvZiBBV1MgT3JnYW5pemF0aW9uXG4gICAgICAgICAgICBpZiAoZGVzY3JpYmVPcmdhbml6YXRpb25SZXNwb25zZS5Pcmdhbml6YXRpb24/Lk1hc3RlckFjY291bnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZW1lbnRBY2NvdW50SWQgPSBkZXNjcmliZU9yZ2FuaXphdGlvblJlc3BvbnNlLk9yZ2FuaXphdGlvbj8uTWFzdGVyQWNjb3VudElkO1xuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50QWNjb3VudElkID09IGN1cnJlbnRBY2NvdW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhbiBvcmdhbml6YXRpb24gYW5kIHRoaXMgaXMgdGhlIG1hbmFnZW1lbnQgYWNjb3VudFxuICAgICAgICAgICAgICAgICAgICBpc01hbmFnZW1lbnRBY2NvdW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaXNJbk9yZ2FuaXphdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBhbiBvcmdhbml6YXRpb24sIGJ1dCB0aGlzIGlzbid0IHRoZSBtYW5hZ2VtZW50IGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgaXNJbk9yZ2FuaXphdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgaXNuJ3QgYW4gb3JnYW5pemF0aW9uIGFuZCB0aGlzIGFjY291bnQgaXMgc3RhbmRhbG9uZVxuICAgICAgICAgICAgICAgIGlzSW5Pcmdhbml6YXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdhbml6YXRpb25zQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNJbk9yZ2FuaXphdGlvbiwgaXNNYW5hZ2VtZW50QWNjb3VudCB9O1xufTtcbiIsImltcG9ydCB7IElBTUNsaWVudCwgTGlzdFVzZXJzQ29tbWFuZCwgTGlzdEFjY2Vzc0tleXNDb21tYW5kLCBHZXRBY2Nlc3NLZXlMYXN0VXNlZENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWlhbVwiO1xuLy8gZnVuY3Rpb24gbGlzdCBhbGwgSUFNIHVzZXJzIGFuZCBpZiB0aGV5IGhhdmUga2V5cyBpbiB0aGUgbWFuYWdlbWVudCBhY2NvdW50XG5jb25zdCBjaGVja0lhbVVzZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIFNldCB0byB1cy1lYXN0LTEgYXMgSUFNIGlzIGdsb2JhbCBhbmQgcmVnaW9uIGlzbid0IGEgY29uY2VyblxuICAgIGNvbnN0IGlhbUNsaWVudCA9IG5ldyBJQU1DbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIGNvbnN0IGlhbVVzZXJJbmZvID0gW107XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbGlzdFVzZXJzQ29tbWFuZCA9IG5ldyBMaXN0VXNlcnNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgbGlzdFVzZXJzUmVzcG9uc2UgPSBhd2FpdCBpYW1DbGllbnQuc2VuZChsaXN0VXNlcnNDb21tYW5kKTtcbiAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIGxpc3RVc2Vyc1Jlc3BvbnNlLlVzZXJzIHx8IFtdKSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyTmFtZSA9IHVzZXIuVXNlck5hbWUgfHwgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RBY2Nlc3NLZXlzQ29tbWFuZCA9IG5ldyBMaXN0QWNjZXNzS2V5c0NvbW1hbmQoe1xuICAgICAgICAgICAgICAgIFVzZXJOYW1lOiB1c2VyTmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgbGlzdEFjY2Vzc0tleXNSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGxpc3RBY2Nlc3NLZXlzQ29tbWFuZCk7XG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NLZXlzID0gbGlzdEFjY2Vzc0tleXNSZXNwb25zZS5BY2Nlc3NLZXlNZXRhZGF0YSB8fCBbXTtcbiAgICAgICAgICAgIGlmIChhY2Nlc3NLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjY2Vzc0tleSBvZiBhY2Nlc3NLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0tleUlkID0gYWNjZXNzS2V5LkFjY2Vzc0tleUlkIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdldExhc3RVc2VkQ29tbWFuZCA9IG5ldyBHZXRBY2Nlc3NLZXlMYXN0VXNlZENvbW1hbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXNzS2V5SWQ6IGFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFVzZWRSZXNwb25zZSA9IGF3YWl0IGlhbUNsaWVudC5zZW5kKGdldExhc3RVc2VkQ29tbWFuZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kVXNlckluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc0tleUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVzZWQ6IGxhc3RVc2VkUmVzcG9uc2UgJiYgbGFzdFVzZWRSZXNwb25zZS5BY2Nlc3NLZXlMYXN0VXNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7bGFzdFVzZWRSZXNwb25zZS5BY2Nlc3NLZXlMYXN0VXNlZC5MYXN0VXNlZERhdGV9YCB8fCBcIk5vdCBhdmFpbGFibGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJOb3QgYXZhaWxhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlhbVVzZXJJbmZvLnB1c2goZm91bmRVc2VySW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRVc2VySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlck5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlhbVVzZXJJbmZvLnB1c2goZm91bmRVc2VySW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWFtQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIGlhbVVzZXJJbmZvO1xufTtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrSWFtVXNlcnM7XG4iLCJpbXBvcnQgeyBFQzJDbGllbnQsIERlc2NyaWJlSW5zdGFuY2VzQ29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtZWMyXCI7XG5hc3luYyBmdW5jdGlvbiBjaGVja0VjMkV4aXN0cyhyZWdpb25zKSB7XG4gICAgbGV0IGVjMlZhbGlkYXRpb24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGVjMkNsaWVudCA9IG5ldyBFQzJDbGllbnQoeyByZWdpb24gfSk7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVzY3JpYmVJbnN0YW5jZXNDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuUmVzZXJ2YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlJlc2VydmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYFdBUk5JTkc6IEluc3RhbmNlKHMpIGV4aXN0cyBpbiByZWdpb246ICR7cmVnaW9ufWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlYzJGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWMyRm91bmQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVjMkZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlYzJGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlYzJGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgIGVjMkZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZWMyVmFsaWRhdGlvbi5wdXNoKGVjMkZvdW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjaGVja2luZyBpbnN0YW5jZTogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGVjMkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9IC8vIGVuZCBmb3JcbiAgICByZXR1cm4gZWMyVmFsaWRhdGlvbjtcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrRWMyRXhpc3RzO1xuIiwiaW1wb3J0IHsgRUMyQ2xpZW50LCBEZXNjcmliZVZwY3NDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1lYzJcIjtcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrVnBjRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgdnBjVmFsaWRhdGlvbiA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgZWMyQ2xpZW50ID0gbmV3IEVDMkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBEZXNjcmliZVZwY3NDb21tYW5kKHt9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZWMyQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuVnBjcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5WcGNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhgV0FSTklORzogVlBDKHMpIGV4aXN0cyBpbiByZWdpb246ICR7cmVnaW9ufWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2cGNGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdnBjRm91bmQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdnBjVmFsaWRhdGlvbi5wdXNoKHZwY0ZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZwY0ZvdW5kID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB2cGNGb3VuZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdnBjVmFsaWRhdGlvbi5wdXNoKHZwY0ZvdW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2cGNGb3VuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgIHZwY0ZvdW5kOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdnBjVmFsaWRhdGlvbi5wdXNoKHZwY0ZvdW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBjaGVja2luZyBpbnN0YW5jZTogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGVjMkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9IC8vIGVuZCBmb3JcbiAgICByZXR1cm4gdnBjVmFsaWRhdGlvbjtcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGNoZWNrVnBjRXhpc3RzO1xuIiwiaW1wb3J0IHsgQ2xvdWRUcmFpbENsaWVudCwgRGVzY3JpYmVUcmFpbHNDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWNsb3VkdHJhaWwnO1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tDbG91ZFRyYWlsRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgY2xvdWRUcmFpbFZhbGlkYXRpb24gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25zKSB7XG4gICAgICAgIGNvbnN0IGNsb3VkVHJhaWxDbGllbnQgPSBuZXcgQ2xvdWRUcmFpbENsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICAgICAgY29uc3QgY2xvdWRUcmFpbERlc2NyaWJlQ29tbWFuZCA9IG5ldyBEZXNjcmliZVRyYWlsc0NvbW1hbmQoe30pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2xvdWRUcmFpbFJlc3BvbnNlID0gYXdhaXQgY2xvdWRUcmFpbENsaWVudC5zZW5kKGNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQpO1xuICAgICAgICAgICAgaWYgKGNsb3VkVHJhaWxSZXNwb25zZS50cmFpbExpc3QpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWlsIG9mIGNsb3VkVHJhaWxSZXNwb25zZS50cmFpbExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRyYWlsSW5mbyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhaWwuSG9tZVJlZ2lvbiA9PSByZWdpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYHRyYWlsIGZvdW5kIGluICR7cmVnaW9ufWApXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFpbEluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxGb3VuZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09yZ1RyYWlsOiB0cmFpbC5Jc011bHRpUmVnaW9uVHJhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdWx0aVJlZ2lvbjogdHJhaWwuSXNNdWx0aVJlZ2lvblRyYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhaWxJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcmVnaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWlsRm91bmQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNsb3VkVHJhaWxWYWxpZGF0aW9uLnB1c2godHJhaWxJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgY2hlY2tpbmcgaW5zdGFuY2U6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjbG91ZFRyYWlsQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH0gLy8gZW5kIGZvciByZWdpb25zXG4gICAgcmV0dXJuIGNsb3VkVHJhaWxWYWxpZGF0aW9uO1xufVxuO1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tDbG91ZFRyYWlsRXhpc3RzO1xuIiwiaW1wb3J0IHsgQ29uZmlnU2VydmljZUNsaWVudCwgRGVzY3JpYmVDb25maWd1cmF0aW9uUmVjb3JkZXJTdGF0dXNDb21tYW5kLCBEZXNjcmliZURlbGl2ZXJ5Q2hhbm5lbHNDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWNvbmZpZy1zZXJ2aWNlJztcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQ29uZmlnRXhpc3RzKHJlZ2lvbnMpIHtcbiAgICBsZXQgY29uZmlnRGV0YWlscyA9IFtdO1xuICAgIGZvciAoY29uc3QgcmVnaW9uIG9mIHJlZ2lvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnU2VydmljZUNsaWVudCA9IG5ldyBDb25maWdTZXJ2aWNlQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICBsZXQgY29uZmlnRGV0YWlsID0ge1xuICAgICAgICAgICAgcmVnaW9uOiByZWdpb24sXG4gICAgICAgICAgICBjb25maWdSZWNvcmRlckZvdW5kOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbmZpZ0RlbGl2ZXJ5Q2hhbm5lbEZvdW5kOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgQ29uZmlnIHJlY29yZGVyIGV4aXN0c1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkZXJSZXNwb25zZSA9IGF3YWl0IGNvbmZpZ1NlcnZpY2VDbGllbnQuc2VuZChuZXcgRGVzY3JpYmVDb25maWd1cmF0aW9uUmVjb3JkZXJTdGF0dXNDb21tYW5kKHt9KSk7XG4gICAgICAgICAgICBjb25zdCByZWNvcmRlckV4aXN0cyA9IHJlY29yZGVyUmVzcG9uc2UuQ29uZmlndXJhdGlvblJlY29yZGVyc1N0YXR1cz8ubGVuZ3RoICE9PSAwO1xuICAgICAgICAgICAgaWYgKHJlY29yZGVyRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnRGV0YWlsLmNvbmZpZ1JlY29yZGVyRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgQ29uZmlnIGRlbGl2ZXJ5IGNoYW5uZWwgZXhpc3RzXG4gICAgICAgICAgICBjb25zdCBjaGFubmVsUmVzcG9uc2UgPSBhd2FpdCBjb25maWdTZXJ2aWNlQ2xpZW50LnNlbmQobmV3IERlc2NyaWJlRGVsaXZlcnlDaGFubmVsc0NvbW1hbmQoe30pKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWxFeGlzdHMgPSBjaGFubmVsUmVzcG9uc2UuRGVsaXZlcnlDaGFubmVscz8ubGVuZ3RoICE9PSAwO1xuICAgICAgICAgICAgaWYgKGNoYW5uZWxFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICBjb25maWdEZXRhaWwuY29uZmlnRGVsaXZlcnlDaGFubmVsRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnRGV0YWlscy5wdXNoKGNvbmZpZ0RldGFpbCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBBV1MgQ29uZmlnIGluICR7cmVnaW9ufTpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBjb25maWdTZXJ2aWNlQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uZmlnRGV0YWlscztcbn1cbmV4cG9ydCBkZWZhdWx0IGNoZWNrQ29uZmlnRXhpc3RzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgRGVzY3JpYmVPcmdhbml6YXRpb25Db21tYW5kLCBMaXN0Um9vdHNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRPcmdEZXRhaWxzKHJlZ2lvbikge1xuICAgIGNvbnN0IG9yZ0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgIGxldCBvcmdEZXRhaWxzID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3JnRGVzY3JpYmVDb21tYW5kID0gbmV3IERlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IG9yZ0RhdGEgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChvcmdEZXNjcmliZUNvbW1hbmQpO1xuICAgICAgICBpZiAob3JnRGF0YS5Pcmdhbml6YXRpb24pIHtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMuaWQgPSBvcmdEYXRhLk9yZ2FuaXphdGlvbi5JZCA/PyBcIlwiO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYE9yZ2FuaXphdGlvbiBJRDogJHtvcmdEZXRhaWxzLmlkfWAgKTtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMuYXJuID0gb3JnRGF0YS5Pcmdhbml6YXRpb24uQXJuID8/IFwiXCI7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgT3JnYW5pemF0aW9uIEFSTjogJHtvcmdEZXRhaWxzLmFybn1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RSb290c0NvbW1hbmQoe30pO1xuICAgICAgICBjb25zdCByb290cyA9IGF3YWl0IG9yZ0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocm9vdHMuUm9vdHMpIHtcbiAgICAgICAgICAgIG9yZ0RldGFpbHMucm9vdE91SWQgPSByb290cy5Sb290c1swXS5JZDtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBBV1MgT3JnIHJvb3Qgb3UgaWQ6ICR7b3JnRGV0YWlscy5yb290T3VJZH1gKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIGluZm8gZm91bmQgZm9yIHlvdXIgQVdTIE9yZ2FuaXphdGlvbi4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQ6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gb3JnRGV0YWlscztcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBnZXRPcmdEZXRhaWxzO1xuIiwiaW1wb3J0IHsgQ29zdEFuZFVzYWdlUmVwb3J0U2VydmljZUNsaWVudCwgRGVzY3JpYmVSZXBvcnREZWZpbml0aW9uc0NvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNvc3QtYW5kLXVzYWdlLXJlcG9ydC1zZXJ2aWNlXCI7XG5jb25zdCBjaGVja0xlZ2FjeUN1ciA9IGFzeW5jIChyZWdpb24pID0+IHtcbiAgICAvLyBTZXQgdXAgQVdTIFNESyBjbGllbnQgZm9yIENvc3QgRXhwbG9yZXJcbiAgICBjb25zdCBjdXJDbGllbnQgPSBuZXcgQ29zdEFuZFVzYWdlUmVwb3J0U2VydmljZUNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgaXNMZWdhY3lDdXJTZXR1cCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIENoZWNrIGlmIENvc3QgRXhwbG9yZXIgaXMgc2V0IHVwXG4gICAgICAgIGNvbnN0IGlucHV0ID0ge307XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVzY3JpYmVSZXBvcnREZWZpbml0aW9uc0NvbW1hbmQoaW5wdXQpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGN1ckNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICBpZiAocmVzcG9uc2UuUmVwb3J0RGVmaW5pdGlvbnMgJiYgcmVzcG9uc2UuUmVwb3J0RGVmaW5pdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaXNMZWdhY3lDdXJTZXR1cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgaXNMZWdhY3lDdXJTZXR1cCB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVycm9yIGlzIHJlbGF0ZWQgdG8gQ29zdCBFeHBsb3JlciBzZXR1cFxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgaXNMZWdhY3lDdXJTZXR1cCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4geyBpc0xlZ2FjeUN1clNldHVwIH07XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICAvLyBDbG9zZSB0aGUgQVdTIFNESyBjbGllbnRcbiAgICAgICAgY3VyQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgY2hlY2tMZWdhY3lDdXI7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0Um9vdHNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRFbmFibGVkT3JnUG9saWN5VHlwZXMocmVnaW9uKSB7XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgbGV0IHBvbGljeVR5cGVzRW5hYmxlZCA9IHtcbiAgICAgICAgc2NwRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHRhZ1BvbGljeUVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBiYWNrdXBQb2xpY3lFbmFibGVkOiBmYWxzZVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB7fTtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0Um9vdHNDb21tYW5kKGlucHV0KTtcbiAgICAgICAgY29uc3Qgcm9vdHMgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgaWYgKHJvb3RzLlJvb3RzKSB7XG4gICAgICAgICAgICBpZiAocm9vdHMuUm9vdHNbMF0uUG9saWN5VHlwZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVuYWJsZWRQb2xpY3kgb2Ygcm9vdHMuUm9vdHNbMF0uUG9saWN5VHlwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZWRQb2xpY3kuVHlwZSA9PSAnU0VSVklDRV9DT05UUk9MX1BPTElDWScgJiYgZW5hYmxlZFBvbGljeS5TdGF0dXMgPT0gJ0VOQUJMRUQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lUeXBlc0VuYWJsZWQuc2NwRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZWRQb2xpY3kuVHlwZSA9PSAnVEFHX1BPTElDWScgJiYgZW5hYmxlZFBvbGljeS5TdGF0dXMgPT0gJ0VOQUJMRUQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lUeXBlc0VuYWJsZWQudGFnUG9saWN5RW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuYWJsZWRQb2xpY3kuVHlwZSA9PSAnQkFDS1VQX1BPTElDWScgJiYgZW5hYmxlZFBvbGljeS5TdGF0dXMgPT0gJ0VOQUJMRUQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lUeXBlc0VuYWJsZWQuYmFja3VwUG9saWN5RW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IC8vIGVuZCBmb3JcbiAgICAgICAgICAgIH0gLy8gZW5kIGlmXG4gICAgICAgIH0gLy8gZW5kIGlmXG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBBbiBlcnJvciBvY2N1cnJlZDogJHtlcnJvcn1gKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBwb2xpY3lUeXBlc0VuYWJsZWQ7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZ2V0RW5hYmxlZE9yZ1BvbGljeVR5cGVzO1xuIiwiaW1wb3J0IHsgT3JnYW5pemF0aW9uc0NsaWVudCwgTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1vcmdhbml6YXRpb25zXCI7XG5hc3luYyBmdW5jdGlvbiBnZXRFbmFibGVkT3JnU2VydmljZXMocmVnaW9uKSB7XG4gICAgY29uc3QgZGlzY292ZXJlZE9yZ1NlcnZpY2VzID0gW107XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb24gfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3JnU2VydmljZUFjY2Vzc0NvbW1hbmQgPSBuZXcgTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kKHt9KTtcbiAgICAgICAgY29uc3Qgb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQob3JnU2VydmljZUFjY2Vzc0NvbW1hbmQpO1xuICAgICAgICBpZiAob3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscyAmJiBvcmdTZXJ2aWNlQWNjZXNzUmVzcG9uc2UuRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG9yZ1NlcnZpY2VBY2Nlc3NSZXNwb25zZS5FbmFibGVkU2VydmljZVByaW5jaXBhbHM7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9yZ1NlcnZpY2Ugb2Ygb3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlLkVuYWJsZWRTZXJ2aWNlUHJpbmNpcGFscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kT3JnU2VydmljZSA9IHsgc2VydmljZTogb3JnU2VydmljZS5TZXJ2aWNlUHJpbmNpcGFsID8/IFwiXCIgfTtcbiAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkT3JnU2VydmljZXMucHVzaChmb3VuZE9yZ1NlcnZpY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzZXJ2aWNlIGFjY2VzczonLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdDbGllbnQuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm4gZGlzY292ZXJlZE9yZ1NlcnZpY2VzO1xuICAgIH1cbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldEVuYWJsZWRPcmdTZXJ2aWNlcztcbiIsImltcG9ydCB7IENsb3VkRm9ybWF0aW9uQ2xpZW50LCBEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kLCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmb3JtYXRpb25cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ0Nsb3VkRm9ybWF0aW9uKHJlZ2lvbikge1xuICAgIGxldCBvcmdDZm5TdGF0dXMgPSB7XG4gICAgICAgIHN0YXR1czogXCJkaXNhYmxlZFwiXG4gICAgfTtcbiAgICBjb25zdCBjbG91ZEZvcm1hdGlvbkNsaWVudCA9IG5ldyBDbG91ZEZvcm1hdGlvbkNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkZXNjcmliZU9yZ0FjY2Vzc0lucHV0ID0ge307XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVzY3JpYmVPcmdhbml6YXRpb25zQWNjZXNzQ29tbWFuZChkZXNjcmliZU9yZ0FjY2Vzc0lucHV0KTtcbiAgICAgICAgY29uc3QgY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MgPSBhd2FpdCBjbG91ZEZvcm1hdGlvbkNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiQ2xvdWRGb3JtYXRpb24gYWN0aXZhdGlvbiBzdGF0dXM6IFwiLCBjbG91ZEZvcm1hdGlvbk9yZ0FjY2Vzcy5TdGF0dXMpXG4gICAgICAgIG9yZ0NmblN0YXR1cy5zdGF0dXMgPSBjbG91ZEZvcm1hdGlvbk9yZ0FjY2Vzcy5TdGF0dXMgPz8gXCJkaXNhYmxlZFwiO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAvL3Rocm93IG5ldyBFcnJvcihgRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBjbG91ZEZvcm1hdGlvbkNsaWVudC5kZXN0cm95KCk7XG4gICAgICAgIHJldHVybiBvcmdDZm5TdGF0dXM7XG4gICAgfVxufVxuO1xuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnQ2xvdWRGb3JtYXRpb247XG4iLCJpbXBvcnQgeyBDb250cm9sVG93ZXJDbGllbnQsIExpc3RMYW5kaW5nWm9uZXNDb21tYW5kLCBHZXRMYW5kaW5nWm9uZUNvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNvbnRyb2x0b3dlclwiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udHJvbFRvd2VyKHJlZ2lvbikge1xuICAgIGxldCBjb250cm9sVG93ZXJJbmZvID0ge307XG4gICAgY29uc3QgY29udHJvbFRvd2VyQ2xpZW50ID0gbmV3IENvbnRyb2xUb3dlckNsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IExpc3RMYW5kaW5nWm9uZXNDb21tYW5kKHt9KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb250cm9sVG93ZXJDbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UubGFuZGluZ1pvbmVzLCBudWxsLCAyKSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5sYW5kaW5nWm9uZXMgJiYgcmVzcG9uc2UubGFuZGluZ1pvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICAgICAgICAgIGxhbmRpbmdab25lSWRlbnRpZmllcjogcmVzcG9uc2UubGFuZGluZ1pvbmVzWzBdLmFybixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBselJlZ2lvbiA9IHJlc3BvbnNlLmxhbmRpbmdab25lc1swXS5hcm4/LnRvU3RyaW5nKCkuc3BsaXQoJzonKVszXSA/PyBcIlwiO1xuICAgICAgICAgICAgaWYgKGx6UmVnaW9uKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5jb250cm9sVG93ZXJSZWdpb24gPSBselJlZ2lvbjtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sVG93ZXJDbGllbnRSZWdpb24gPSBuZXcgQ29udHJvbFRvd2VyQ2xpZW50KHsgcmVnaW9uOiBselJlZ2lvbiB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tYW5kID0gbmV3IEdldExhbmRpbmdab25lQ29tbWFuZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbHpSZXNwb25zZSA9IGF3YWl0IGNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbi5zZW5kKGNvbW1hbmQpO1xuICAgICAgICAgICAgICAgIGlmIChselJlc3BvbnNlLmxhbmRpbmdab25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGx6UmVzcG9uc2UubGFuZGluZ1pvbmUsIG51bGwsIDIpKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5zdGF0dXMgPSBselJlc3BvbnNlLmxhbmRpbmdab25lLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5sYXRlc3RBdmFpbGFibGVWZXJzaW9uID0gbHpSZXNwb25zZS5sYW5kaW5nWm9uZS5sYXRlc3RBdmFpbGFibGVWZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sVG93ZXJJbmZvLmRlcGxveWVkVmVyc2lvbiA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbFRvd2VySW5mby5kcmlmdFN0YXR1cyA9IGx6UmVzcG9uc2UubGFuZGluZ1pvbmUuZHJpZnRTdGF0dXM/LnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIENvbnRyb2wgVG93ZXIgaW4gJHtyZWdpb259OmAsIGVycm9yKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGNvbnRyb2xUb3dlckNsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiBjb250cm9sVG93ZXJJbmZvO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0Q29udHJvbFRvd2VyO1xuIiwiaW1wb3J0IHsgU1NPQWRtaW5DbGllbnQsIExpc3RJbnN0YW5jZXNDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zc28tYWRtaW5cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldElkY0luZm8ocmVnaW9uTGlzdCkge1xuICAgIGxldCBpZGNEZXRhaWxzID0geyBmb3VuZDogZmFsc2UgfTtcbiAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiByZWdpb25MaXN0KSB7XG4gICAgICAgIGNvbnN0IHNzb0FkbWluQ2xpZW50ID0gbmV3IFNTT0FkbWluQ2xpZW50KHsgcmVnaW9uIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3NvSW5wdXQgPSB7XG4gICAgICAgICAgICAgICAgTWF4UmVzdWx0czogTnVtYmVyKFwiMTAwXCIpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0SW5zdGFuY2VzQ29tbWFuZChzc29JbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBzc29JbnN0YW5jZVJlc3BvbnNlID0gYXdhaXQgc3NvQWRtaW5DbGllbnQuc2VuZChjb21tYW5kKTtcbiAgICAgICAgICAgIGlmIChzc29JbnN0YW5jZVJlc3BvbnNlLkluc3RhbmNlcyAmJiBzc29JbnN0YW5jZVJlc3BvbnNlLkluc3RhbmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3NvSW5zdGFuY2UgPSBzc29JbnN0YW5jZVJlc3BvbnNlLkluc3RhbmNlc1swXTtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLnJlZ2lvbiA9IHJlZ2lvbjtcbiAgICAgICAgICAgICAgICBpZGNEZXRhaWxzLmFybiA9IHNzb0luc3RhbmNlLkluc3RhbmNlQXJuO1xuICAgICAgICAgICAgICAgIGlkY0RldGFpbHMuaWQgPSBzc29JbnN0YW5jZS5JZGVudGl0eVN0b3JlSWQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbG9va2luZyBmb3IgQVdTIElkZW50aXR5IENlbnRlciBkZXRhaWxzIGluIHJlZ2lvbiAke3JlZ2lvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNzb0FkbWluQ2xpZW50LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaWRjRGV0YWlscztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldElkY0luZm87XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0RGVsZWdhdGVkQWRtaW5pc3RyYXRvcnNDb21tYW5kLCBMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCB9IGZyb20gXCJAYXdzLXNkay9jbGllbnQtb3JnYW5pemF0aW9uc1wiO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnRGFBY2NvdW50cygpIHtcbiAgICBsZXQgb3JnRGFEZXRhaWxzID0gW107XG4gICAgY29uc3Qgb3JnQ2xpZW50ID0gbmV3IE9yZ2FuaXphdGlvbnNDbGllbnQoeyByZWdpb246ICd1cy1lYXN0LTEnIH0pO1xuICAgIGxldCBvcmdEYURldGFpbCA9IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCh7fSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5EZWxlZ2F0ZWRBZG1pbmlzdHJhdG9ycykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBkYSBvZiByZXNwb25zZS5EZWxlZ2F0ZWRBZG1pbmlzdHJhdG9ycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0geyBBY2NvdW50SWQ6IGRhLklkIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZChpbnB1dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudFJlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRSZXNwb25zZS5EZWxlZ2F0ZWRTZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgICAgICBvcmdEYURldGFpbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZpY2VzOiBhY2NvdW50UmVzcG9uc2UuRGVsZWdhdGVkU2VydmljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50TmFtZTogZGEuTmFtZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBvcmdEYURldGFpbHMucHVzaChvcmdEYURldGFpbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgbG9va2luZyBmb3IgZGVsZWdhdGVkIHNlcnZpY2VzLmApO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgb3JnQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yZ0RhRGV0YWlscztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ0RhQWNjb3VudHM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0QWNjb3VudHNDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnMnO1xuYXN5bmMgZnVuY3Rpb24gZ2V0T3JnTWVtYmVyQWNjb3VudHMoKSB7XG4gICAgbGV0IG9yZ01lbWJlckFjY291bnRJbmZvID0gW107XG4gICAgY29uc3Qgb3Jnc0NsaWVudCA9IG5ldyBPcmdhbml6YXRpb25zQ2xpZW50KHsgcmVnaW9uOiAndXMtZWFzdC0xJyB9KTtcbiAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgTWF4UmVzdWx0czogTnVtYmVyKFwiMjAwXCIpLFxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgb3Jnc0NsaWVudC5zZW5kKG5ldyBMaXN0QWNjb3VudHNDb21tYW5kKHt9KSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5BY2NvdW50cyAmJiByZXNwb25zZS5BY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgcmVzcG9uc2UuQWNjb3VudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgb3JnTWVtYmVyQWNjb3VudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudE5hbWU6IGFjY291bnQuTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEVtYWlsOiBhY2NvdW50LkVtYWlsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgb3JnTWVtYmVyQWNjb3VudEluZm8ucHVzaChvcmdNZW1iZXJBY2NvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuTmV4dFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgb3Jnc0NsaWVudC5zZW5kKG5ldyBMaXN0QWNjb3VudHNDb21tYW5kKHsgTmV4dFRva2VuOiByZXNwb25zZS5OZXh0VG9rZW4gfSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuQWNjb3VudHMgJiYgcmVzcG9uc2UuQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIHJlc3BvbnNlLkFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZ01lbWJlckFjY291bnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnROYW1lOiBhY2NvdW50Lk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRFbWFpbDogYWNjb3VudC5FbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ01lbWJlckFjY291bnRJbmZvLnB1c2gob3JnTWVtYmVyQWNjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IHdoaWxlIChyZXNwb25zZS5OZXh0VG9rZW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIEFXUyBhY2NvdW50czonLCBlcnJvcik7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBvcmdzQ2xpZW50LmRlc3Ryb3koKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yZ01lbWJlckFjY291bnRJbmZvO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2V0T3JnTWVtYmVyQWNjb3VudHM7XG4iLCJpbXBvcnQgeyBPcmdhbml6YXRpb25zQ2xpZW50LCBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQsIExpc3RBY2NvdW50c0ZvclBhcmVudENvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LW9yZ2FuaXphdGlvbnNcIjtcbmFzeW5jIGZ1bmN0aW9uIGdldE9yZ1RvcExldmVsT3VzKHJlZ2lvbiwgcm9vdE91SWQpIHtcbiAgICBjb25zdCBvcmdDbGllbnQgPSBuZXcgT3JnYW5pemF0aW9uc0NsaWVudCh7IHJlZ2lvbiB9KTtcbiAgICBsZXQgdG9wTGV2ZWxPdXMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBsaXN0T1VzQ29tbWFuZCA9IG5ldyBMaXN0T3JnYW5pemF0aW9uYWxVbml0c0ZvclBhcmVudENvbW1hbmQoe1xuICAgICAgICAgICAgUGFyZW50SWQ6IHJvb3RPdUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGlzdE9Vc1Jlc3BvbnNlID0gYXdhaXQgb3JnQ2xpZW50LnNlbmQobGlzdE9Vc0NvbW1hbmQpO1xuICAgICAgICBpZiAobGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ugb2YgbGlzdE9Vc1Jlc3BvbnNlLk9yZ2FuaXphdGlvbmFsVW5pdHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG9wTGV2ZWxPdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG91LklkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvdS5OYW1lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50UmVzcG9uc2UgPSBhd2FpdCBvcmdDbGllbnQuc2VuZChuZXcgTGlzdEFjY291bnRzRm9yUGFyZW50Q29tbWFuZCh7IFBhcmVudElkOiBvdS5JZCB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRSZXNwb25zZS5BY2NvdW50cyAmJiBhY2NvdW50UmVzcG9uc2UuQWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BMZXZlbE91LmFjY291bnRzID0gYWNjb3VudFJlc3BvbnNlLkFjY291bnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0b3BMZXZlbE91cy5wdXNoKHRvcExldmVsT3UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzZXJ2aWNlIGFjY2VzczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIG9yZ0NsaWVudC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJldHVybiB0b3BMZXZlbE91cztcbn1cbjtcbmV4cG9ydCBkZWZhdWx0IGdldE9yZ1RvcExldmVsT3VzO1xuIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJhc3luYyIsImRlcGxveU91VGFzayIsInRhc2tOdW1iZXIiLCJ3YXlwb2ludCIsIk91TmFtZSIsInJlbW92ZUlhbVVzZXJUYXNrIiwiSWFtVXNlck5hbWUiLCJyZW1vdmVJYW1Vc2VyQXBpS2V5VGFzayIsIklhbVVzZXJBcGlLZXlJZCIsImRlbGV0ZVZwYyIsInJlZ2lvbiIsImRlbGV0ZUVjMiIsImVuYWJsZUF3c09yZ2FuaXphdGlvblNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImRlbGVnYXRlQWRtaW5pc3RyYXRpb25Bd3NTZXJ2aWNlIiwiZW5hYmxlUG9saWN5VHlwZVRhc2siLCJwb2xpY3lUeXBlIiwicmVwb3J0RmlsZSIsImRhdGVUaW1lIiwiRGF0ZSIsInByb2Nlc3MiLCJlbnYiLCJBV1NfUkVHSU9OIiwiYWxsUmVnaW9ucyIsImVjMkNsaWVudCIsIkVDMkNsaWVudCIsImRlc2NyaWJlUmVnaW9uc0NvbW1hbmQiLCJEZXNjcmliZVJlZ2lvbnNDb21tYW5kIiwicmVzcG9uc2UiLCJzZW5kIiwicmVnaW9ucyIsIlJlZ2lvbnMiLCJwdXNoIiwiUmVnaW9uTmFtZSIsImVycm9yIiwiY29uc29sZSIsImRlc3Ryb3kiLCJsb2ciLCJhY2NvdW50VHlwZSIsIm9yZ2FuaXphdGlvbnNDbGllbnQiLCJPcmdhbml6YXRpb25zQ2xpZW50IiwiaXNJbk9yZ2FuaXphdGlvbiIsImlzTWFuYWdlbWVudEFjY291bnQiLCJjdXJyZW50QWNjb3VudElkIiwic3RzQ2xpZW50IiwiU1RTQ2xpZW50IiwiZ2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiR2V0Q2FsbGVySWRlbnRpdHlDb21tYW5kIiwiQWNjb3VudCIsImdldEFjY291bnRJZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsIkRlc2NyaWJlT3JnYW5pemF0aW9uQ29tbWFuZCIsImRlc2NyaWJlT3JnYW5pemF0aW9uUmVzcG9uc2UiLCJPcmdhbml6YXRpb24iLCJNYXN0ZXJBY2NvdW50SWQiLCJtYW5hZ2VtZW50QWNjb3VudElkIiwiZGVmaW5lQWNjb3VudFR5cGUiLCJ0b1VUQ1N0cmluZyIsImRpciIsImRlcHRoIiwiY29sb3JzIiwiaWFtVXNlclJlc3VsdCIsImlhbUNsaWVudCIsIklBTUNsaWVudCIsImlhbVVzZXJJbmZvIiwibGlzdFVzZXJzQ29tbWFuZCIsIkxpc3RVc2Vyc0NvbW1hbmQiLCJsaXN0VXNlcnNSZXNwb25zZSIsInVzZXIiLCJVc2VycyIsInVzZXJOYW1lIiwiVXNlck5hbWUiLCJsaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJMaXN0QWNjZXNzS2V5c0NvbW1hbmQiLCJhY2Nlc3NLZXlzIiwiQWNjZXNzS2V5TWV0YWRhdGEiLCJsZW5ndGgiLCJhY2Nlc3NLZXkiLCJhY2Nlc3NLZXlJZCIsIkFjY2Vzc0tleUlkIiwiZ2V0TGFzdFVzZWRDb21tYW5kIiwiR2V0QWNjZXNzS2V5TGFzdFVzZWRDb21tYW5kIiwibGFzdFVzZWRSZXNwb25zZSIsImZvdW5kVXNlckluZm8iLCJsYXN0VXNlZCIsIkFjY2Vzc0tleUxhc3RVc2VkIiwiTGFzdFVzZWREYXRlIiwiaWFtVXNlciIsImVjMkNoZWNrIiwiZWMyVmFsaWRhdGlvbiIsImNvbW1hbmQiLCJEZXNjcmliZUluc3RhbmNlc0NvbW1hbmQiLCJSZXNlcnZhdGlvbnMiLCJlYzJGb3VuZCIsImZpbmQiLCJwYXJhbSIsImVjMiIsInZwY0NoZWNrIiwidnBjVmFsaWRhdGlvbiIsIkRlc2NyaWJlVnBjc0NvbW1hbmQiLCJWcGNzIiwidnBjRm91bmQiLCJ2cGNGaW5kIiwiY2xvdWRUcmFpbENoZWNrIiwiY2xvdWRUcmFpbFZhbGlkYXRpb24iLCJjbG91ZFRyYWlsQ2xpZW50IiwiQ2xvdWRUcmFpbENsaWVudCIsImNsb3VkVHJhaWxEZXNjcmliZUNvbW1hbmQiLCJEZXNjcmliZVRyYWlsc0NvbW1hbmQiLCJjbG91ZFRyYWlsUmVzcG9uc2UiLCJ0cmFpbExpc3QiLCJ0cmFpbCIsInRyYWlsSW5mbyIsIkhvbWVSZWdpb24iLCJ0cmFpbEZvdW5kIiwiaXNPcmdUcmFpbCIsIklzTXVsdGlSZWdpb25UcmFpbCIsImlzTXVsdGlSZWdpb24iLCJjb25maWdDaGVjayIsImNvbmZpZ0RldGFpbHMiLCJjb25maWdTZXJ2aWNlQ2xpZW50IiwiQ29uZmlnU2VydmljZUNsaWVudCIsImNvbmZpZ0RldGFpbCIsImNvbmZpZ1JlY29yZGVyRm91bmQiLCJjb25maWdEZWxpdmVyeUNoYW5uZWxGb3VuZCIsInJlY29yZGVyUmVzcG9uc2UiLCJEZXNjcmliZUNvbmZpZ3VyYXRpb25SZWNvcmRlclN0YXR1c0NvbW1hbmQiLCJDb25maWd1cmF0aW9uUmVjb3JkZXJzU3RhdHVzIiwiY2hhbm5lbFJlc3BvbnNlIiwiRGVzY3JpYmVEZWxpdmVyeUNoYW5uZWxzQ29tbWFuZCIsIkRlbGl2ZXJ5Q2hhbm5lbHMiLCJjb25maWdGaW5kIiwib3JnRGV0YWlscyIsIm9yZ0NsaWVudCIsIm9yZ0Rlc2NyaWJlQ29tbWFuZCIsIm9yZ0RhdGEiLCJpZCIsIklkIiwiYXJuIiwiQXJuIiwiTGlzdFJvb3RzQ29tbWFuZCIsInJvb3RzIiwiUm9vdHMiLCJyb290T3VJZCIsImxlZ2FjeUN1ckNoZWNrIiwiY3VyQ2xpZW50IiwiQ29zdEFuZFVzYWdlUmVwb3J0U2VydmljZUNsaWVudCIsImlzTGVnYWN5Q3VyU2V0dXAiLCJpbnB1dCIsIkRlc2NyaWJlUmVwb3J0RGVmaW5pdGlvbnNDb21tYW5kIiwiUmVwb3J0RGVmaW5pdGlvbnMiLCJlbmFibGVPcmdQb2xpY2llc0NoZWNrIiwicG9saWN5VHlwZXNFbmFibGVkIiwic2NwRW5hYmxlZCIsInRhZ1BvbGljeUVuYWJsZWQiLCJiYWNrdXBQb2xpY3lFbmFibGVkIiwiUG9saWN5VHlwZXMiLCJlbmFibGVkUG9saWN5IiwiVHlwZSIsIlN0YXR1cyIsIm9yZ0VuYWJsZWRTZXJ2aWNlcyIsImRpc2NvdmVyZWRPcmdTZXJ2aWNlcyIsIm9yZ1NlcnZpY2VBY2Nlc3NDb21tYW5kIiwiTGlzdEFXU1NlcnZpY2VBY2Nlc3NGb3JPcmdhbml6YXRpb25Db21tYW5kIiwib3JnU2VydmljZUFjY2Vzc1Jlc3BvbnNlIiwiRW5hYmxlZFNlcnZpY2VQcmluY2lwYWxzIiwib3JnU2VydmljZSIsImZvdW5kT3JnU2VydmljZSIsInNlcnZpY2UiLCJTZXJ2aWNlUHJpbmNpcGFsIiwiY2ZuT3JnU3RhdHVzIiwib3JnQ2ZuU3RhdHVzIiwic3RhdHVzIiwiY2xvdWRGb3JtYXRpb25DbGllbnQiLCJDbG91ZEZvcm1hdGlvbkNsaWVudCIsImRlc2NyaWJlT3JnQWNjZXNzSW5wdXQiLCJEZXNjcmliZU9yZ2FuaXphdGlvbnNBY2Nlc3NDb21tYW5kIiwiY2xvdWRGb3JtYXRpb25PcmdBY2Nlc3MiLCJjb250cm9sVG93ZXJEZXRhaWxzIiwiY29udHJvbFRvd2VySW5mbyIsImNvbnRyb2xUb3dlckNsaWVudCIsIkNvbnRyb2xUb3dlckNsaWVudCIsIkxpc3RMYW5kaW5nWm9uZXNDb21tYW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhbmRpbmdab25lcyIsImxhbmRpbmdab25lSWRlbnRpZmllciIsImx6UmVnaW9uIiwidG9TdHJpbmciLCJzcGxpdCIsImNvbnRyb2xUb3dlclJlZ2lvbiIsImNvbnRyb2xUb3dlckNsaWVudFJlZ2lvbiIsIkdldExhbmRpbmdab25lQ29tbWFuZCIsImx6UmVzcG9uc2UiLCJsYW5kaW5nWm9uZSIsImxhdGVzdEF2YWlsYWJsZVZlcnNpb24iLCJkZXBsb3llZFZlcnNpb24iLCJ2ZXJzaW9uIiwiZHJpZnRTdGF0dXMiLCJpZGNJbmZvcm1hdGlvbiIsInJlZ2lvbkxpc3QiLCJpZGNEZXRhaWxzIiwiZm91bmQiLCJzc29BZG1pbkNsaWVudCIsIlNTT0FkbWluQ2xpZW50Iiwic3NvSW5wdXQiLCJNYXhSZXN1bHRzIiwiTnVtYmVyIiwiTGlzdEluc3RhbmNlc0NvbW1hbmQiLCJzc29JbnN0YW5jZVJlc3BvbnNlIiwiSW5zdGFuY2VzIiwic3NvSW5zdGFuY2UiLCJJbnN0YW5jZUFybiIsIklkZW50aXR5U3RvcmVJZCIsIm9yZ0RlbEFkbWluRGV0YWlscyIsIm9yZ0RhRGV0YWlscyIsIm9yZ0RhRGV0YWlsIiwiTGlzdERlbGVnYXRlZEFkbWluaXN0cmF0b3JzQ29tbWFuZCIsIkRlbGVnYXRlZEFkbWluaXN0cmF0b3JzIiwiZGEiLCJBY2NvdW50SWQiLCJMaXN0RGVsZWdhdGVkU2VydmljZXNGb3JBY2NvdW50Q29tbWFuZCIsImFjY291bnRSZXNwb25zZSIsIkRlbGVnYXRlZFNlcnZpY2VzIiwic2VydmljZXMiLCJhY2NvdW50TmFtZSIsIk5hbWUiLCJvcmdNZW1iZXJBY2NvdW50RGV0YWlscyIsIm9yZ01lbWJlckFjY291bnRJbmZvIiwib3Jnc0NsaWVudCIsIkxpc3RBY2NvdW50c0NvbW1hbmQiLCJBY2NvdW50cyIsImFjY291bnQiLCJvcmdNZW1iZXJBY2NvdW50IiwiYWNjb3VudEVtYWlsIiwiRW1haWwiLCJOZXh0VG9rZW4iLCJtZ3RUYXNrTnVtYmVyIiwibWFuYWdlbWVudEFjY291bnRXYXlwb2ludCIsIm1lc3NhZ2UiLCJjdEZpbmQiLCJnb3ZXYXlwb2ludCIsImdvdlRhc2tOdW1iZXIiLCJmaW5UYXNrTnVtYmVyIiwiZmluV2F5cG9pbnQiLCJ0cmFuc2l0aW9uYWxGb3VuZCIsInN1c3BlbmRlZEZvdW5kIiwid29ya2xvYWRzRm91bmQiLCJzZWN1cml0eUZvdW5kIiwib3JnT3VzIiwidG9wTGV2ZWxPdXMiLCJsaXN0T1VzQ29tbWFuZCIsIkxpc3RPcmdhbml6YXRpb25hbFVuaXRzRm9yUGFyZW50Q29tbWFuZCIsIlBhcmVudElkIiwibGlzdE9Vc1Jlc3BvbnNlIiwiT3JnYW5pemF0aW9uYWxVbml0cyIsIm91IiwidG9wTGV2ZWxPdSIsIm5hbWUiLCJMaXN0QWNjb3VudHNGb3JQYXJlbnRDb21tYW5kIiwiYWNjb3VudHMiLCJ0b0xvd2VyQ2FzZSIsIm1lbWJlckFjY291bnQiLCJpZGVudGl0eURlbGVnYXRlZCIsInNlY3VyaXR5SHViRGVsZWdhdGVkIiwiZ3VhcmREdXR5RGVsZWdhdGVkIiwiY29uZmlnRGVsZWdhdGVkIiwiaWFtQWNjZXNzQW5hbHl6ZXJEZWxlZ2F0ZWQiLCJzM1N0b3JhZ2VMZW5zRGVsZWdhdGVkIiwiaXBhbURlbGVnYXRlZCIsImFjY291bnREZWxlZ2F0ZWQiLCJiYWNrdXBEZWxlZ2F0ZWQiLCJzcnYiLCJtYXNUYXNrTnVtYmVyIiwibWFzV2F5cG9pbnQiLCJselRhc2tOdW1iZXIiLCJseldheXBvaW50IiwidW5kZWZpbmVkIiwiY3VycmVudFZlcnNpb24iLCJsYXRlc3RWZXJzaW9uIiwic3NvVGFza051bWJlciIsInNzb1dheXBvaW50Iiwic2VjVGFza051bWJlciIsInNlY1dheXBvaW50IiwibmV0VGFza051bWJlciIsIm5ldHdvcmtXYXlwb2ludCIsIm5ldEd1YXJkRHV0eUVuYWJsZU1lc3NhZ2UiLCJvYlRhc2tOdW1iZXIiLCJvYldheXBvaW50IiwiYmFja1Rhc2tOdW1iZXIiLCJiYWNrdXBXYXlwb2ludCIsIndhcm4iLCJtYWluIl0sInNvdXJjZVJvb3QiOiIifQ==